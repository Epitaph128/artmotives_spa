import{c as ct,az as ft,aA as Rt,aB as Ut,aC as Lt,p as nl,aD as sl,s as ul,aE as rl,a as S,z as dl,g as vt,h as V,Q as We,aF as cl,aq as ut,a4 as me,n as fl,r as L,w as Ce,e as ie,aG as vl,aH as ml,aI as hl,aJ as Sl,d as mt,ar as gl,aK as pl,aL as $t,aM as _e,aN as yl,aO as bl,D as it,aP as wl,ae as ke,a3 as Vl,aQ as kl,an as rt,L as Cl,_ as Dl,M as xl,ai as ql,N as z,O as Me,P as I,Y as D,R as c,X as R,aj as W,T as fe,U as ve,W as U,S as Ie,Z as Ke,$ as je,y as Ye,ak as Gt,al as Al,am as Ee,aR as ae,aS as Tt,ao as $l,ap as zt}from"./index.b280a161.js";import{Q as _t}from"./QBtnGroup.f8a46fe9.js";import{Q as dt,a as Mt}from"./QItem.2215b298.js";import{Q as Gl}from"./QItemSection.72421718.js";import{Q as Tl}from"./QItemLabel.2841f9c9.js";import{Q as zl}from"./QMenu.441b2658.js";import{n as It,d as nt}from"./date.1ba734fd.js";import{Q as _l,C as Et}from"./ClosePopup.d89e2f88.js";import{Q as Ml}from"./QTime.0d51c412.js";import{Q as Il}from"./QPage.ca52987e.js";import{u as El,Q as Bl}from"./QSpinnerFacebook.c32a040b.js";import{u as Fl}from"./store_goals.a6629be6.js";import{u as Ol}from"./store_successes.acfa9e22.js";import{u as Bt}from"./store_settings.3964c878.js";import"./selection.403a2a4e.js";import"./TouchPan.5ba478e2.js";var Rl=ct({name:"QField",inheritAttrs:!1,props:{...ft,tag:{type:String,default:"label"}},emits:Rt,setup(){return Ut(Lt({requiredForAttr:!1,tagProp:!0}))}});const Ul={xs:8,sm:10,md:14,lg:20,xl:24};var Ll=ct({name:"QChip",props:{...nl,...sl,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:l,emit:d}){const{proxy:{$q:g}}=vt(),q=ul(e,g),s=rl(e,Ul),i=S(()=>e.selected===!0||e.icon!==void 0),o=S(()=>e.selected===!0?e.iconSelected||g.iconSet.chip.selected:e.icon),h=S(()=>e.iconRemove||g.iconSet.chip.remove),b=S(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),f=S(()=>{const m=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(m?` text-${m} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(b.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(q.value===!0?" q-chip--dark q-dark":"")}),k=S(()=>{const m=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},N={...m,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||g.lang.label.remove};return{chip:m,remove:N}});function x(m){m.keyCode===13&&A(m)}function A(m){e.disable||(d("update:selected",!e.selected),d("click",m))}function _(m){(m.keyCode===void 0||m.keyCode===13)&&(me(m),e.disable===!1&&(d("update:modelValue",!1),d("remove")))}function Q(){const m=[];b.value===!0&&m.push(V("div",{class:"q-focus-helper"})),i.value===!0&&m.push(V(We,{class:"q-chip__icon q-chip__icon--left",name:o.value}));const N=e.label!==void 0?[V("div",{class:"ellipsis"},[e.label])]:void 0;return m.push(V("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},cl(l.default,N))),e.iconRight&&m.push(V(We,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&m.push(V(We,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:h.value,...k.value.remove,onClick:_,onKeyup:_})),m}return()=>{if(e.modelValue===!1)return;const m={class:f.value,style:s.value};return b.value===!0&&Object.assign(m,k.value.chip,{onClick:A,onKeyup:x}),dl("div",m,Q(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[ut,e.ripple]])}}});let Xe=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const l=document.createElement("div");Object.assign(l.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(l),e.scrollLeft=-1e3,Xe=e.scrollLeft>=0,e.remove()}const X=1e3,Hl=["start","center","end","start-force","center-force","end-force"],Ht=Array.prototype.filter,Pl=window.getComputedStyle(document.body).overflowAnchor===void 0?fl:function(e,l){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const d=e.children||[];Ht.call(d,q=>q.dataset&&q.dataset.qVsAnchor!==void 0).forEach(q=>{delete q.dataset.qVsAnchor});const g=d[l];g&&g.dataset&&(g.dataset.qVsAnchor="")}))};function De(e,l){return e+l}function st(e,l,d,g,q,s,i,o){const h=e===window?document.scrollingElement||document.documentElement:e,b=q===!0?"offsetWidth":"offsetHeight",f={scrollStart:0,scrollViewSize:-i-o,scrollMaxSize:0,offsetStart:-i,offsetEnd:-o};if(q===!0?(e===window?(f.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,f.scrollViewSize+=document.documentElement.clientWidth):(f.scrollStart=h.scrollLeft,f.scrollViewSize+=h.clientWidth),f.scrollMaxSize=h.scrollWidth,s===!0&&(f.scrollStart=(Xe===!0?f.scrollMaxSize-f.scrollViewSize:0)-f.scrollStart)):(e===window?(f.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,f.scrollViewSize+=document.documentElement.clientHeight):(f.scrollStart=h.scrollTop,f.scrollViewSize+=h.clientHeight),f.scrollMaxSize=h.scrollHeight),d!==null)for(let k=d.previousElementSibling;k!==null;k=k.previousElementSibling)k.classList.contains("q-virtual-scroll--skip")===!1&&(f.offsetStart+=k[b]);if(g!==null)for(let k=g.nextElementSibling;k!==null;k=k.nextElementSibling)k.classList.contains("q-virtual-scroll--skip")===!1&&(f.offsetEnd+=k[b]);if(l!==e){const k=h.getBoundingClientRect(),x=l.getBoundingClientRect();q===!0?(f.offsetStart+=x.left-k.left,f.offsetEnd-=x.width):(f.offsetStart+=x.top-k.top,f.offsetEnd-=x.height),e!==window&&(f.offsetStart+=f.scrollStart),f.offsetEnd+=f.scrollMaxSize-f.offsetStart}return f}function Ft(e,l,d,g){l==="end"&&(l=(e===window?document.body:e)[d===!0?"scrollWidth":"scrollHeight"]),e===window?d===!0?(g===!0&&(l=(Xe===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-l),window.scrollTo(l,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,l):d===!0?(g===!0&&(l=(Xe===!0?e.scrollWidth-e.offsetWidth:0)-l),e.scrollLeft=l):e.scrollTop=l}function Be(e,l,d,g){if(d>=g)return 0;const q=l.length,s=Math.floor(d/X),i=Math.floor((g-1)/X)+1;let o=e.slice(s,i).reduce(De,0);return d%X!==0&&(o-=l.slice(s*X,d).reduce(De,0)),g%X!==0&&g!==q&&(o-=l.slice(g,i*X).reduce(De,0)),o}const Ql={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Nl={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Ql};function Kl({virtualScrollLength:e,getVirtualScrollTarget:l,getVirtualScrollEl:d,virtualScrollItemSizeComputed:g}){const q=vt(),{props:s,emit:i,proxy:o}=q,{$q:h}=o;let b,f,k,x=[],A;const _=L(0),Q=L(0),m=L({}),N=L(null),te=L(null),P=L(null),E=L({from:0,to:0}),Fe=S(()=>s.tableColspan!==void 0?s.tableColspan:100);g===void 0&&(g=S(()=>s.virtualScrollItemSize));const B=S(()=>g.value+";"+s.virtualScrollHorizontal),le=S(()=>B.value+";"+s.virtualScrollSliceRatioBefore+";"+s.virtualScrollSliceRatioAfter);Ce(le,()=>{J()}),Ce(B,ne);function ne(){he(f,!0)}function xe(a){he(a===void 0?f:a)}function se(a,r){const p=l();if(p==null||p.nodeType===8)return;const T=st(p,d(),N.value,te.value,s.virtualScrollHorizontal,h.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd);k!==T.scrollViewSize&&J(T.scrollViewSize),K(p,T,Math.min(e.value-1,Math.max(0,parseInt(a,10)||0)),0,Hl.indexOf(r)!==-1?r:f!==-1&&a>f?"end":"start")}function Oe(){const a=l();if(a==null||a.nodeType===8)return;const r=st(a,d(),N.value,te.value,s.virtualScrollHorizontal,h.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd),p=e.value-1,T=r.scrollMaxSize-r.offsetStart-r.offsetEnd-Q.value;if(b===r.scrollStart)return;if(r.scrollMaxSize<=0){K(a,r,0,0);return}k!==r.scrollViewSize&&J(r.scrollViewSize),qe(E.value.from);const F=Math.floor(r.scrollMaxSize-Math.max(r.scrollViewSize,r.offsetEnd)-Math.min(A[p],r.scrollViewSize/2));if(F>0&&Math.ceil(r.scrollStart)>=F){K(a,r,p,r.scrollMaxSize-r.offsetEnd-x.reduce(De,0));return}let C=0,w=r.scrollStart-r.offsetStart,O=w;if(w<=T&&w+r.scrollViewSize>=_.value)w-=_.value,C=E.value.from,O=w;else for(let y=0;w>=x[y]&&C<p;y++)w-=x[y],C+=X;for(;w>0&&C<p;)w-=A[C],w>-r.scrollViewSize?(C++,O=w):O=A[C]+w;K(a,r,C,O)}function K(a,r,p,T,F){const C=typeof F=="string"&&F.indexOf("-force")!==-1,w=C===!0?F.replace("-force",""):F,O=w!==void 0?w:"start";let y=Math.max(0,p-m.value[O]),j=y+m.value.total;j>e.value&&(j=e.value,y=Math.max(0,j-m.value.total)),b=r.scrollStart;const oe=y!==E.value.from||j!==E.value.to;if(oe===!1&&w===void 0){Ae(p);return}const{activeElement:Ue}=document,Z=P.value;oe===!0&&Z!==null&&Z!==Ue&&Z.contains(Ue)===!0&&(Z.addEventListener("focusout",Re),setTimeout(()=>{Z!==null&&Z.removeEventListener("focusout",Re)})),Pl(Z,p-y);const Le=w!==void 0?A.slice(y,p).reduce(De,0):0;if(oe===!0){const ue=j>=E.value.from&&y<=E.value.to?E.value.to:j;E.value={from:y,to:ue},_.value=Be(x,A,0,y),Q.value=Be(x,A,j,e.value),requestAnimationFrame(()=>{E.value.to!==j&&b===r.scrollStart&&(E.value={from:E.value.from,to:j},Q.value=Be(x,A,j,e.value))})}requestAnimationFrame(()=>{if(b!==r.scrollStart)return;oe===!0&&qe(y);const ue=A.slice(y,p).reduce(De,0),re=ue+r.offsetStart+_.value,He=re+A[p];let Ge=re+T;if(w!==void 0){const Ze=ue-Le,Te=r.scrollStart+Ze;Ge=C!==!0&&Te<re&&He<Te+r.scrollViewSize?Te:w==="end"?He-r.scrollViewSize:re-(w==="start"?0:Math.round((r.scrollViewSize-A[p])/2))}b=Ge,Ft(a,Ge,s.virtualScrollHorizontal,h.lang.rtl),Ae(p)})}function qe(a){const r=P.value;if(r){const p=Ht.call(r.children,y=>y.classList&&y.classList.contains("q-virtual-scroll--skip")===!1),T=p.length,F=s.virtualScrollHorizontal===!0?y=>y.getBoundingClientRect().width:y=>y.offsetHeight;let C=a,w,O;for(let y=0;y<T;){for(w=F(p[y]),y++;y<T&&p[y].classList.contains("q-virtual-scroll--with-prev")===!0;)w+=F(p[y]),y++;O=w-A[C],O!==0&&(A[C]+=O,x[Math.floor(C/X)]+=O),C++}}}function Re(){P.value!==null&&P.value!==void 0&&P.value.focus()}function he(a,r){const p=1*g.value;(r===!0||Array.isArray(A)===!1)&&(A=[]);const T=A.length;A.length=e.value;for(let C=e.value-1;C>=T;C--)A[C]=p;const F=Math.floor((e.value-1)/X);x=[];for(let C=0;C<=F;C++){let w=0;const O=Math.min((C+1)*X,e.value);for(let y=C*X;y<O;y++)w+=A[y];x.push(w)}f=-1,b=void 0,_.value=Be(x,A,0,E.value.from),Q.value=Be(x,A,E.value.to,e.value),a>=0?(qe(E.value.from),ie(()=>{se(a)})):Se()}function J(a){if(a===void 0&&typeof window!="undefined"){const w=l();w!=null&&w.nodeType!==8&&(a=st(w,d(),N.value,te.value,s.virtualScrollHorizontal,h.lang.rtl,s.virtualScrollStickySizeStart,s.virtualScrollStickySizeEnd).scrollViewSize)}k=a;const r=parseFloat(s.virtualScrollSliceRatioBefore)||0,p=parseFloat(s.virtualScrollSliceRatioAfter)||0,T=1+r+p,F=a===void 0||a<=0?1:Math.ceil(a/g.value),C=Math.max(1,F,Math.ceil((s.virtualScrollSliceSize>0?s.virtualScrollSliceSize:10)/T));m.value={total:Math.ceil(C*T),start:Math.ceil(C*r),center:Math.ceil(C*(.5+r)),end:Math.ceil(C*(1+r)),view:F}}function Je(a,r){const p=s.virtualScrollHorizontal===!0?"width":"height",T={["--q-virtual-scroll-item-"+p]:g.value+"px"};return[a==="tbody"?V(a,{class:"q-virtual-scroll__padding",key:"before",ref:N},[V("tr",[V("td",{style:{[p]:`${_.value}px`,...T},colspan:Fe.value})])]):V(a,{class:"q-virtual-scroll__padding",key:"before",ref:N,style:{[p]:`${_.value}px`,...T}}),V(a,{class:"q-virtual-scroll__content",key:"content",ref:P,tabindex:-1},r.flat()),a==="tbody"?V(a,{class:"q-virtual-scroll__padding",key:"after",ref:te},[V("tr",[V("td",{style:{[p]:`${Q.value}px`,...T},colspan:Fe.value})])]):V(a,{class:"q-virtual-scroll__padding",key:"after",ref:te,style:{[p]:`${Q.value}px`,...T}})]}function Ae(a){f!==a&&(s.onVirtualScroll!==void 0&&i("virtualScroll",{index:a,from:E.value.from,to:E.value.to-1,direction:a<f?"decrease":"increase",ref:o}),f=a)}J();const Se=vl(Oe,h.platform.is.ios===!0?120:35);ml(()=>{J()});let $e=!1;return hl(()=>{$e=!0}),Sl(()=>{if($e!==!0)return;const a=l();b!==void 0&&a!==void 0&&a!==null&&a.nodeType!==8?Ft(a,b,s.virtualScrollHorizontal,h.lang.rtl):se(f)}),mt(()=>{Se.cancel()}),Object.assign(o,{scrollTo:se,reset:ne,refresh:xe}),{virtualScrollSliceRange:E,virtualScrollSliceSizeComputed:m,setVirtualScrollSize:J,onVirtualScrollEvt:Se,localResetVirtualScroll:he,padVirtualScroll:Je,scrollTo:se,reset:ne,refresh:xe}}const Ot=e=>["add","add-unique","toggle"].includes(e),jl=".*+?^${}()|[]\\",Yl=Object.keys(ft);var Wl=ct({name:"QSelect",inheritAttrs:!1,props:{...Nl,...gl,...ft,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Ot},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...Rt,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:l,emit:d}){const{proxy:g}=vt(),{$q:q}=g,s=L(!1),i=L(!1),o=L(-1),h=L(""),b=L(!1),f=L(!1);let k=null,x=null,A,_,Q,m=null,N,te,P,E;const Fe=L(null),B=L(null),le=L(null),ne=L(null),xe=L(null),se=pl(e),Oe=wl(Ct),K=S(()=>Array.isArray(e.options)?e.options.length:0),qe=S(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:Re,virtualScrollSliceSizeComputed:he,localResetVirtualScroll:J,padVirtualScroll:Je,onVirtualScrollEvt:Ae,scrollTo:Se,setVirtualScrollSize:$e}=Kl({virtualScrollLength:K,getVirtualScrollTarget:Kt,getVirtualScrollEl:Vt,virtualScrollItemSizeComputed:qe}),a=Lt(),r=S(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,u=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const n=e.mapOptions===!0&&A!==void 0?A:[],v=u.map(G=>Nt(G,n));return e.modelValue===null&&t===!0?v.filter(G=>G!==null):v}return u}),p=S(()=>{const t={};return Yl.forEach(u=>{const n=e[u];n!==void 0&&(t[u]=n)}),t}),T=S(()=>e.optionsDark===null?a.isDark.value:e.optionsDark),F=S(()=>$t(r.value)),C=S(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||r.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),w=S(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),O=S(()=>K.value===0),y=S(()=>r.value.map(t=>Y.value(t)).join(", ")),j=S(()=>e.displayValue!==void 0?e.displayValue:y.value),oe=S(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),Ue=S(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||r.value.some(oe.value))),Z=S(()=>a.focused.value===!0?e.tabindex:-1),Le=S(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":s.value===!0?"true":"false","aria-controls":`${a.targetUid.value}_lb`};return o.value>=0&&(t["aria-activedescendant"]=`${a.targetUid.value}_${o.value}`),t}),ue=S(()=>({id:`${a.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),re=S(()=>r.value.map((t,u)=>({index:u,opt:t,html:oe.value(t),selected:!0,removeAtIndex:Qt,toggleOption:de,tabindex:Z.value}))),He=S(()=>{if(K.value===0)return[];const{from:t,to:u}=Re.value;return e.options.slice(t,u).map((n,v)=>{const G=ge.value(n)===!0,$=lt(n)===!0,H=t+v,M={clickable:!0,active:$,activeClass:Te.value,manualFocus:!0,focused:!1,disable:G,tabindex:-1,dense:e.optionsDense,dark:T.value,role:"option","aria-selected":$===!0?"true":"false",id:`${a.targetUid.value}_${H}`,onClick:()=>{de(n)}};return G!==!0&&(o.value===H&&(M.focused=!0),q.platform.is.desktop===!0&&(M.onMousemove=()=>{s.value===!0&&pe(H)})),{index:H,opt:n,html:oe.value(n),label:Y.value(n),selected:M.active,focused:M.focused,toggleOption:de,setOptionIndex:pe,itemProps:M}})}),Ge=S(()=>e.dropdownIcon!==void 0?e.dropdownIcon:q.iconSet.arrow.dropdown),Ze=S(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Te=S(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),ee=S(()=>tt(e.optionValue,"value")),Y=S(()=>tt(e.optionLabel,"label")),ge=S(()=>tt(e.optionDisable,"disable")),Pe=S(()=>r.value.map(t=>ee.value(t))),Pt=S(()=>{const t={onInput:Ct,onChange:Oe,onKeydown:wt,onKeyup:yt,onKeypress:bt,onFocus:gt,onClick(u){_===!0&&ke(u)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=Oe,t});Ce(r,t=>{A=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&a.innerLoading.value!==!0&&(i.value!==!0&&s.value!==!0||F.value!==!0)&&(Q!==!0&&Ve(),(i.value===!0||s.value===!0)&&ye(""))},{immediate:!0}),Ce(()=>e.fillInput,Ve),Ce(s,ot),Ce(K,il);function ht(t){return e.emitValue===!0?ee.value(t):t}function et(t){if(t!==-1&&t<r.value.length)if(e.multiple===!0){const u=e.modelValue.slice();d("remove",{index:t,value:u.splice(t,1)[0]}),d("update:modelValue",u)}else d("update:modelValue",null)}function Qt(t){et(t),a.focus()}function St(t,u){const n=ht(t);if(e.multiple!==!0){e.fillInput===!0&&ze(Y.value(t),!0,!0),d("update:modelValue",n);return}if(r.value.length===0){d("add",{index:0,value:n}),d("update:modelValue",e.multiple===!0?[n]:n);return}if(u===!0&&lt(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const v=e.modelValue.slice();d("add",{index:v.length,value:n}),v.push(n),d("update:modelValue",v)}function de(t,u){if(a.editable.value!==!0||t===void 0||ge.value(t)===!0)return;const n=ee.value(t);if(e.multiple!==!0){u!==!0&&(ze(e.fillInput===!0?Y.value(t):"",!0,!0),ce()),B.value!==null&&B.value.focus(),(r.value.length===0||_e(ee.value(r.value[0]),n)!==!0)&&d("update:modelValue",e.emitValue===!0?n:t);return}if((_!==!0||b.value===!0)&&a.focus(),gt(),r.value.length===0){const $=e.emitValue===!0?n:t;d("add",{index:0,value:$}),d("update:modelValue",e.multiple===!0?[$]:$);return}const v=e.modelValue.slice(),G=Pe.value.findIndex($=>_e($,n));if(G!==-1)d("remove",{index:G,value:v.splice(G,1)[0]});else{if(e.maxValues!==void 0&&v.length>=e.maxValues)return;const $=e.emitValue===!0?n:t;d("add",{index:v.length,value:$}),v.push($)}d("update:modelValue",v)}function pe(t){if(q.platform.is.desktop!==!0)return;const u=t!==-1&&t<K.value?t:-1;o.value!==u&&(o.value=u)}function Qe(t=1,u){if(s.value===!0){let n=o.value;do n=It(n+t,-1,K.value-1);while(n!==-1&&n!==o.value&&ge.value(e.options[n])===!0);o.value!==n&&(pe(n),Se(n),u!==!0&&e.useInput===!0&&e.fillInput===!0&&Ne(n>=0?Y.value(e.options[n]):N,!0))}}function Nt(t,u){const n=v=>_e(ee.value(v),t);return e.options.find(n)||u.find(n)||t}function tt(t,u){const n=t!==void 0?t:u;return typeof n=="function"?n:v=>v!==null&&typeof v=="object"&&n in v?v[n]:v}function lt(t){const u=ee.value(t);return Pe.value.find(n=>_e(n,u))!==void 0}function gt(t){e.useInput===!0&&B.value!==null&&(t===void 0||B.value===t.target&&t.target.value===y.value)&&B.value.select()}function pt(t){Vl(t,27)===!0&&s.value===!0&&(ke(t),ce(),Ve()),d("keyup",t)}function yt(t){const{value:u}=t.target;if(t.keyCode!==void 0){pt(t);return}if(t.target.value="",k!==null&&(clearTimeout(k),k=null),x!==null&&(clearTimeout(x),x=null),Ve(),typeof u=="string"&&u.length!==0){const n=u.toLocaleLowerCase(),v=$=>{const H=e.options.find(M=>$.value(M).toLocaleLowerCase()===n);return H===void 0?!1:(r.value.indexOf(H)===-1?de(H):ce(),!0)},G=$=>{v(ee)!==!0&&(v(Y)===!0||$===!0||ye(u,!0,()=>G(!0)))};G()}else a.clearValue(t)}function bt(t){d("keypress",t)}function wt(t){if(d("keydown",t),kl(t)===!0)return;const u=h.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),n=t.shiftKey!==!0&&e.multiple!==!0&&(o.value!==-1||u===!0);if(t.keyCode===27){it(t);return}if(t.keyCode===9&&n===!1){be();return}if(t.target===void 0||t.target.id!==a.targetUid.value||a.editable.value!==!0)return;if(t.keyCode===40&&a.innerLoading.value!==!0&&s.value===!1){me(t),we();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&h.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?et(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&d("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof h.value!="string"||h.value.length===0)&&(me(t),o.value=-1,Qe(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&he.value!==void 0&&(me(t),o.value=Math.max(-1,Math.min(K.value,o.value+(t.keyCode===33?-1:1)*he.value.view)),Qe(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(me(t),Qe(t.keyCode===38?-1:1,e.multiple));const v=K.value;if((P===void 0||E<Date.now())&&(P=""),v>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||P.length!==0)){s.value!==!0&&we(t);const G=t.key.toLocaleLowerCase(),$=P.length===1&&P[0]===G;E=Date.now()+1500,$===!1&&(me(t),P+=G);const H=new RegExp("^"+P.split("").map(at=>jl.indexOf(at)!==-1?"\\"+at:at).join(".*"),"i");let M=o.value;if($===!0||M<0||H.test(Y.value(e.options[M]))!==!0)do M=It(M+1,-1,v-1);while(M!==o.value&&(ge.value(e.options[M])===!0||H.test(Y.value(e.options[M]))!==!0));o.value!==M&&ie(()=>{pe(M),Se(M),M>=0&&e.useInput===!0&&e.fillInput===!0&&Ne(Y.value(e.options[M]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||P!=="")&&(t.keyCode!==9||n===!1))){if(t.keyCode!==9&&me(t),o.value!==-1&&o.value<v){de(e.options[o.value]);return}if(u===!0){const G=($,H)=>{if(H){if(Ot(H)!==!0)return}else H=e.newValueMode;if(ze("",e.multiple!==!0,!0),$==null)return;(H==="toggle"?de:St)($,H==="add-unique"),e.multiple!==!0&&(B.value!==null&&B.value.focus(),ce())};if(e.onNewValue!==void 0?d("newValue",h.value,G):G(h.value),e.multiple!==!0)return}s.value===!0?be():a.innerLoading.value!==!0&&we()}}function Vt(){return _===!0?xe.value:le.value!==null&&le.value.contentEl!==null?le.value.contentEl:void 0}function Kt(){return Vt()}function jt(){return e.hideSelected===!0?[]:l["selected-item"]!==void 0?re.value.map(t=>l["selected-item"](t)).slice():l.selected!==void 0?[].concat(l.selected()):e.useChips===!0?re.value.map((t,u)=>V(Ll,{key:"option-"+u,removable:a.editable.value===!0&&ge.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:Z.value,onRemove(){t.removeAtIndex(u)}},()=>V("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:Y.value(t.opt)}))):[V("span",{[Ue.value===!0?"innerHTML":"textContent"]:j.value})]}function kt(){if(O.value===!0)return l["no-option"]!==void 0?l["no-option"]({inputValue:h.value}):void 0;const t=l.option!==void 0?l.option:n=>V(dt,{key:n.index,...n.itemProps},()=>V(Gl,()=>V(Tl,()=>V("span",{[n.html===!0?"innerHTML":"textContent"]:n.label}))));let u=Je("div",He.value.map(t));return l["before-options"]!==void 0&&(u=l["before-options"]().concat(u)),Cl(l["after-options"],u)}function Yt(t,u){const n=u===!0?{...Le.value,...a.splitAttrs.attributes.value}:void 0,v={ref:u===!0?B:void 0,key:"i_t",class:C.value,style:e.inputStyle,value:h.value!==void 0?h.value:"",type:"search",...n,id:u===!0?a.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Pt.value};return t!==!0&&_===!0&&(Array.isArray(v.class)===!0?v.class=[...v.class,"no-pointer-events"]:v.class+=" no-pointer-events"),V("input",v)}function Ct(t){k!==null&&(clearTimeout(k),k=null),x!==null&&(clearTimeout(x),x=null),!(t&&t.target&&t.target.qComposing===!0)&&(Ne(t.target.value||""),Q=!0,N=h.value,a.focused.value!==!0&&(_!==!0||b.value===!0)&&a.focus(),e.onFilter!==void 0&&(k=setTimeout(()=>{k=null,ye(h.value)},e.inputDebounce)))}function Ne(t,u){h.value!==t&&(h.value=t,u===!0||e.inputDebounce===0||e.inputDebounce==="0"?d("inputValue",t):x=setTimeout(()=>{x=null,d("inputValue",t)},e.inputDebounce))}function ze(t,u,n){Q=n!==!0,e.useInput===!0&&(Ne(t,!0),(u===!0||n!==!0)&&(N=t),u!==!0&&ye(t))}function ye(t,u,n){if(e.onFilter===void 0||u!==!0&&a.focused.value!==!0)return;a.innerLoading.value===!0?d("filterAbort"):(a.innerLoading.value=!0,f.value=!0),t!==""&&e.multiple!==!0&&r.value.length!==0&&Q!==!0&&t===Y.value(r.value[0])&&(t="");const v=setTimeout(()=>{s.value===!0&&(s.value=!1)},10);m!==null&&clearTimeout(m),m=v,d("filter",t,(G,$)=>{(u===!0||a.focused.value===!0)&&m===v&&(clearTimeout(m),typeof G=="function"&&G(),f.value=!1,ie(()=>{a.innerLoading.value=!1,a.editable.value===!0&&(u===!0?s.value===!0&&ce():s.value===!0?ot(!0):s.value=!0),typeof $=="function"&&ie(()=>{$(g)}),typeof n=="function"&&ie(()=>{n(g)})}))},()=>{a.focused.value===!0&&m===v&&(clearTimeout(m),a.innerLoading.value=!1,f.value=!1),s.value===!0&&(s.value=!1)})}function Wt(){return V(zl,{ref:le,class:w.value,style:e.popupContentStyle,modelValue:s.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&O.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:T.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:Ze.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...ue.value,onScrollPassive:Ae,onBeforeShow:xt,onBeforeHide:Xt,onShow:Jt},kt)}function Xt(t){qt(t),be()}function Jt(){$e()}function Zt(t){ke(t),B.value!==null&&B.value.focus(),b.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function el(t){ke(t),ie(()=>{b.value=!1})}function tl(){const t=[V(Rl,{class:`col-auto ${a.fieldClass.value}`,...p.value,for:a.targetUid.value,dark:T.value,square:!0,loading:f.value,itemAligned:!1,filled:!0,stackLabel:h.value.length!==0,...a.splitAttrs.listeners.value,onFocus:Zt,onBlur:el},{...l,rawControl:()=>a.getControl(!0),before:void 0,after:void 0})];return s.value===!0&&t.push(V("div",{ref:xe,class:w.value+" scroll",style:e.popupContentStyle,...ue.value,onClick:it,onScrollPassive:Ae},kt())),V(rt,{ref:ne,modelValue:i.value,position:e.useInput===!0?"top":void 0,transitionShow:te,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:xt,onBeforeHide:ll,onHide:ol,onShow:al},()=>V("div",{class:"q-select__dialog"+(T.value===!0?" q-select__dialog--dark q-dark":"")+(b.value===!0?" q-select__dialog--focused":"")},t))}function ll(t){qt(t),ne.value!==null&&ne.value.__updateRefocusTarget(a.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),a.focused.value=!1}function ol(t){ce(),a.focused.value===!1&&d("blur",t),Ve()}function al(){const t=document.activeElement;(t===null||t.id!==a.targetUid.value)&&B.value!==null&&B.value!==t&&B.value.focus(),$e()}function be(){i.value!==!0&&(o.value=-1,s.value===!0&&(s.value=!1),a.focused.value===!1&&(m!==null&&(clearTimeout(m),m=null),a.innerLoading.value===!0&&(d("filterAbort"),a.innerLoading.value=!1,f.value=!1)))}function we(t){a.editable.value===!0&&(_===!0?(a.onControlFocusin(t),i.value=!0,ie(()=>{a.focus()})):a.focus(),e.onFilter!==void 0?ye(h.value):(O.value!==!0||l["no-option"]!==void 0)&&(s.value=!0))}function ce(){i.value=!1,be()}function Ve(){e.useInput===!0&&ze(e.multiple!==!0&&e.fillInput===!0&&r.value.length!==0&&Y.value(r.value[0])||"",!0,!0)}function ot(t){let u=-1;if(t===!0){if(r.value.length!==0){const n=ee.value(r.value[0]);u=e.options.findIndex(v=>_e(ee.value(v),n))}J(u)}pe(u)}function il(t,u){s.value===!0&&a.innerLoading.value===!1&&(J(-1,!0),ie(()=>{s.value===!0&&a.innerLoading.value===!1&&(t>u?J():ot(!0))}))}function Dt(){i.value===!1&&le.value!==null&&le.value.updatePosition()}function xt(t){t!==void 0&&ke(t),d("popupShow",t),a.hasPopupOpen=!0,a.onControlFocusin(t)}function qt(t){t!==void 0&&ke(t),d("popupHide",t),a.hasPopupOpen=!1,a.onControlFocusout(t)}function At(){_=q.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?l["no-option"]!==void 0||e.onFilter!==void 0||O.value===!1:!0),te=q.platform.is.ios===!0&&_===!0&&e.useInput===!0?"fade":e.transitionShow}return yl(At),bl(Dt),At(),mt(()=>{k!==null&&clearTimeout(k),x!==null&&clearTimeout(x)}),Object.assign(g,{showPopup:we,hidePopup:ce,removeAtIndex:et,add:St,toggleOption:de,getOptionIndex:()=>o.value,setOptionIndex:pe,moveOptionSelection:Qe,filter:ye,updateMenuPosition:Dt,updateInputValue:ze,isOptionSelected:lt,getEmittingOptionValue:ht,isOptionDisabled:(...t)=>ge.value.apply(null,t)===!0,getOptionValue:(...t)=>ee.value.apply(null,t),getOptionLabel:(...t)=>Y.value.apply(null,t)}),Object.assign(a,{innerValue:r,fieldClass:S(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:Fe,targetRef:B,hasValue:F,showPopup:we,floatingLabel:S(()=>e.hideSelected!==!0&&F.value===!0||typeof h.value=="number"||h.value.length!==0||$t(e.displayValue)),getControlChild:()=>{if(a.editable.value!==!1&&(i.value===!0||O.value!==!0||l["no-option"]!==void 0))return _===!0?tl():Wt();a.hasPopupOpen===!0&&(a.hasPopupOpen=!1)},controlEvents:{onFocusin(t){a.onControlFocusin(t)},onFocusout(t){a.onControlFocusout(t,()=>{Ve(),be()})},onClick(t){if(it(t),_!==!0&&s.value===!0){be(),B.value!==null&&B.value.focus();return}we(t)}},getControl:t=>{const u=jt(),n=t===!0||i.value!==!0||_!==!0;if(e.useInput===!0)u.push(Yt(t,n));else if(a.editable.value===!0){const G=n===!0?Le.value:void 0;u.push(V("input",{ref:n===!0?B:void 0,key:"d_t",class:"q-select__focus-target",id:n===!0?a.targetUid.value:void 0,value:j.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...G,onKeydown:wt,onKeyup:pt,onKeypress:bt})),n===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&u.push(V("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:yt}))}if(se.value!==void 0&&e.disable!==!0&&Pe.value.length!==0){const G=Pe.value.map($=>V("option",{value:$,selected:!0}));u.push(V("select",{class:"hidden",name:se.value,multiple:e.multiple},G))}const v=e.useInput===!0||n!==!0?void 0:a.splitAttrs.attributes.value;return V("div",{class:"q-field__native row items-center",...v,...a.splitAttrs.listeners.value},u)},getInnerAppend:()=>e.loading!==!0&&f.value!==!0&&e.hideDropdownIcon!==!0?[V(We,{class:"q-select__dropdown-icon"+(s.value===!0?" rotate-180":""),name:Ge.value})]:null}),Ut(a)}});const Xl=xl({name:"IndexPage",data(){return{changeAlertTimeDialog:!1,coinsStorageKey:"coins",enableNotificationsBeta:!1,days:[{label:"Sunday",value:0},{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6}]}},beforeMount(){this.goalsStore=Fl(),this.goalsStore.initialize(),this.successesStore=Ol(),this.successesStore.initialize(),this.settingsStore=Bt(),this.settingsStore.initialize(),this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()),this.$emit("refresh-header")},created(){this.showLoading()},setup(){const e=El();let l;return mt(()=>{l!==void 0&&(clearTimeout(l),e.loading.hide())}),{showLoading(){e.loading.show({spinner:Bl,spinnerColor:"white",spinnerSize:140,backgroundColor:"black",message:"Loading your goals... Please wait!",messageColor:"white"}),l=setTimeout(()=>{e.loading.hide(),l=void 0},500)}}},computed:{...ql(Bt,["useBigButtons","goalsSortStyle"]),buttonClass(){return this.useBigButtons?"bigBtn":""},sortStyle(){return this.goalsSortStyle},buttonText(){return`Sort: ${this.sortStyle}`}},methods:{getDenseDisplayButtonText(){return this.settingsStore.useDenseMode?"Dense Mode Active":"Dense Mode Disabled"},viewUnscheduledGoals(){this.$router.push("unscheduledGoals")},unscheduleGoal(e){this.$q.notify("Goal unscheduled!"),e.changeDateDialog=!1,e.date=this.getDate(),this.goalsStore.addUnscheduledGoal(e),this.goalsStore.removeGoal(e),this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()),this.goalsStore.sortUnscheduledGoals(this.settingsStore.getGoalsSortStyle())},saveGoals(){this.$q.notify("Goals saved!"),this.goalsStore.saveGoals()},completeGoal(e){if(!e.ready){e.ready=!0,this.$q.notify("Click again to mark complete!");return}if(e.goal.length<1){this.$q.notify("Enter a title first!");return}if(e.stepsEnabled){for(var l=!0,d=0;d<e.stepsSize;d++)e.steps[d].value||(l=!1);if(!l){this.$q.notify("Complete all steps first!");return}}this.$q.dialog({title:"Confirm",message:'Confirm completion of goal: "'+e.goal+'"',cancel:!0,persistent:!0}).onOk(()=>{var g=this.goalsStore.goalReward(e);this.$q.notify("Rewarded "+g+" coins for completion!"),this.settingsStore.coins=this.settingsStore.coins+g,this.settingsStore.totalCoins=this.settingsStore.totalCoins+g;var q=Object.assign({},e);if(q.alertTime=null,q.date=this.getDateWithTime(),q.dateTieBreaker=this.getTime(),q.type="goal",this.successesStore.addEntry(q),this.$q.notify('Goal complete! "'+q.goal+'"'),this.settingsStore.saveCoins(),Array.isArray(e.repeatDays)&&e.repeatDays.length>0){var s=Object.assign({},e);if(s.date=this.goalsStore.nextDate(e),s.nextDate=this.goalsStore.nextDate(s),s.stepsEnabled)for(var i=0;i<s.stepsSize;i++)s.steps[i].value=!1;this.goalsStore.addGoal(s,this.settingsStore.getGoalsSortStyle()),this.$q.notify("Repeat goal "+s.goal+" set for "+s.date)}this.goalsStore.removeGoal(e),this.$emit("refresh-header")})},toggleSteps(e){e.steps?(e.stepsEnabled=!e.stepsEnabled,e.stepsEnabled&&e.stepsSize==0&&this.addSteps(e)):(e.stepsEnabled=!0,e.steps=[],e.stepsSize=0,this.addSteps(e)),this.saveGoals()},toggleGoalsSortStyle(){this.settingsStore.toggleGoalsSortStyle(),this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle())},findMatchingInput(){return new Promise(e=>{this.$nextTick(()=>{this.$nextTick(()=>{for(const l in this.$refs.stepDescRef){const d=this.$refs.stepDescRef[l];if(d.modelValue==this.selectedStep.label){e(d);return}}e(null)})})})},handleStepInput(e){if(e.key){if(e.key=="Enter")e.preventDefault(),e.stopPropagation(),this.addSteps(this.selectedGoal,this.selectedStepIndex+1),this.findMatchingInput().then(l=>{l&&(this.selectedStep.label="",l.focus(),this.saveGoals())}),this.saveGoals();else if(e.key=="End")e.preventDefault(),e.stopPropagation(),this.$q.dialog({title:"Confirm",message:"Confirm deletion of step.",cancel:!0,persistent:!0}).onOk(()=>{this.selectedGoal.steps.splice(this.selectedStepIndex,1),this.selectedGoal.stepsSize--,this.selectedGoal.stepsSize==0&&(this.selectedGoal.stepsEnabled=!1,this.selectedStep=null),this.saveGoals()});else if(e.key=="Backspace"&&this.selectedStep.label==""){if(e.preventDefault(),e.stopPropagation(),this.selectedGoal.stepsSize==0){this.selectedGoal.stepsEnabled=!1,this.selectedStep=null;return}this.selectedStepIndex+1<this.selectedGoal.steps.length&&(this.selectedStep=this.selectedGoal.steps[this.selectedStepIndex+1]),this.selectedGoal.steps.splice(this.selectedStepIndex,1),this.selectedGoal.stepsSize--,this.selectedStep=this.selectedGoal.steps[this.selectedStepIndex],this.selectedGoal.stepsSize==0&&(this.selectedGoal.stepsEnabled=!1,this.selectedStep=null),this.saveGoals()}}},addSteps(e,l){e.stepsSize<20&&(e.stepsSize++,l?(e.steps.splice(l,0,{label:"",value:!1}),this.selectedStep=e.steps[l],this.selectedStep.label="   "):(e.steps.push({label:"",value:!1}),this.selectedStep=e.steps[e.stepsSize-1]),this.saveGoals(),console.log(JSON.stringify(e)))},removeSteps(e){e.steps.splice(e.stepsSize-1,1),e.stepsSize--,e.stepsSize==0&&(e.stepsEnabled=!1,this.selectedStep=null),this.saveGoals()},removeGoal(e){var l='Are you sure you want to delete the goal: "'+e.goal+'"?';e.goal.length<1&&(l="Are you sure you want to delete the unnamed goal?"),this.$q.dialog({title:"Confirm",message:l,cancel:!0,persistent:!0}).onOk(()=>{this.$q.notify('Goal deleted: "'+e.goal+'"'),this.goalsStore.removeGoal(e)})},hideTutorial(){this.$q.dialog({title:"Acknowledge",message:"Have you read and understood the instructions?",cancel:!0,persistent:!0}).onOk(()=>{this.settingsStore.tutorialSettings.goalsTutorialHidden=!0,this.settingsStore.saveTutorialSettings()})},toggleDenseDisplay(){this.settingsStore.useDenseMode||(this.settingsStore.useDenseMode=!1),this.settingsStore.useDenseMode=!this.settingsStore.useDenseMode,this.settingsStore.saveDenseModeSetting()},getDate(){const e=Date().toString();return nt.formatDate(e,"MMM D, YYYY")},getDateWithTime(){const e=Date().toString();return nt.formatDate(e,"MMM D, YYYY, hh:mm A")},getTime(){return new Date().getTime()},displayAlertTime(e){const l=new Date;return l.setHours(parseInt(e.split(":")[0],10)),l.setMinutes(parseInt(e.split(":")[1],10)),l.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})},openDatePicker(e){e.changeDateDialog=!0},closeDatePicker(e){e.date=nt.formatDate(e.date,"MMM D, YYYY"),e.changeDateDialog=!1,this.$q.notify("Goals saved!"),this.settingsStore.getGoalsSortStyle()=="Date"&&this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle())},closeAlertTimeDialog(e){e.changeAlertTimeDialog=!1,this.saveGoals()}}}),Jl={class:"q-gutter-md row justify-center"},Zl={class:"q-gutter-md row justify-center",style:{"margin-top":"-2em","margin-bottom":"-1em"}},eo={key:0,class:"tutorial"},to=D("p",null,' Click "New Goal" to create a new goal as part of the schedule. You can click "Unscheduled" to create goals without a desired end date. Clicking the sort button will toggle between sorting by date (soonest to complete first), or difficulty from easy to epic or epic to easy (depending on the direction of the arrow). ',-1),lo={class:"goal-data"},oo={class:"text-h6"},ao={class:"difficulty-select"},io={key:0},no=D("br",null,null,-1),so={class:"steps_checkboxes full-width"},uo={class:"stepTable full-width"},ro={scope:"row",class:"firstColumn"},co={class:"text-black",style:{"margin-bottom":"0.5em"}},fo=D("br",null,null,-1),vo={key:1},mo={class:"text-black",style:{"margin-bottom":"0.5em"}},ho={key:0},So=D("br",null,null,-1),go={class:"row items-center justify-end"},po={key:2,class:"alert-data"},yo={key:0,"q-pa-lg":"",class:"text-black"},bo=D("br",null,null,-1),wo={class:"row items-center justify-center"},Vo={key:0},ko={key:1},Co={key:2,class:"alert-data"},Do={key:3},xo={class:"goal-data"},qo={class:"text-h6"},Ao={class:"difficulty-select"},$o={key:0},Go={class:"steps_checkboxes full-width"},To={class:"stepTable full-width"},zo={scope:"row",class:"firstColumn"},_o={key:0},Mo={key:1};function Io(e,l,d,g,q,s){return z(),Me(Il,{"items-center":"",class:"goal-page"},{default:I(()=>[D("div",Jl,[c(_t,{"no-wrap":""},{default:I(()=>[c(R,{class:W([e.buttonClass,"top-button"]),onClick:l[0]||(l[0]=i=>this.goalsStore.addGoal(null,this.settingsStore.getGoalsSortStyle())),style:{"margin-left":"0.5rem"}},{default:I(()=>[fe("New Goal")]),_:1},8,["class"]),c(R,{class:W([e.buttonClass,"top-button"]),onClick:l[1]||(l[1]=i=>this.toggleGoalsSortStyle()),style:{"margin-left":"1rem","margin-right":"0.5rem"}},{default:I(()=>[fe(ve(e.buttonText),1)]),_:1},8,["class"]),c(R,{class:W([e.buttonClass,"top-button"]),onClick:l[2]||(l[2]=i=>this.viewUnscheduledGoals()),style:{"margin-left":"0.5rem","margin-right":"0.5rem"}},{default:I(()=>[fe("Unscheduled")]),_:1},8,["class"])]),_:1})]),D("div",Zl,[c(_t,{"no-wrap":""},{default:I(()=>[c(R,{class:W([e.buttonClass,"top-button"]),onClick:l[3]||(l[3]=i=>this.toggleDenseDisplay())},{default:I(()=>[fe(ve(this.getDenseDisplayButtonText()),1)]),_:1},8,["class"])]),_:1})]),this.settingsStore.tutorialSettings.goalsTutorialHidden?Ie("",!0):(z(),U("div",eo,[to,c(R,{flat:"",dense:"",glossy:"",icon:"done",color:"check",onClick:l[4]||(l[4]=i=>this.hideTutorial())})])),this.settingsStore.useDenseMode?(z(),Me(Mt,{key:2},{default:I(()=>[(z(!0),U(je,null,Ke(this.goalsStore.goals,i=>Ye((z(),Me(dt,{key:i},{default:I(()=>[c(Gt,{class:"goal-card text-white full-width"},{default:I(()=>[D("div",xo,[D("div",qo,[c(Ee,{multiline:"",autogrow:"",wrap:"on","min-rows":1,"max-rows":10,standout:"bg-primary text-black",class:"full-width text-h6","input-class":"text-left",label:"Goal Title",modelValue:i.goal,"onUpdate:modelValue":[o=>i.goal=o,l[15]||(l[15]=o=>this.goalsStore.saveGoals())],onFocus:l[16]||(l[16]=o=>this.$q.notify("Goal will be saved once you enter a title"))},null,8,["modelValue","onUpdate:modelValue"])]),D("div",Ao,[c(ae,{"keep-color":"",modelValue:i.difficulty,"onUpdate:modelValue":[o=>i.difficulty=o,l[17]||(l[17]=o=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Easy",label:"Easy",color:"green"},null,8,["modelValue","onUpdate:modelValue"]),c(ae,{"keep-color":"",modelValue:i.difficulty,"onUpdate:modelValue":[o=>i.difficulty=o,l[18]||(l[18]=o=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Moderate",label:"Moderate",color:"orange"},null,8,["modelValue","onUpdate:modelValue"]),c(ae,{"keep-color":"",modelValue:i.difficulty,"onUpdate:modelValue":[o=>i.difficulty=o,l[19]||(l[19]=o=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Hard",label:"Hard",color:"red"},null,8,["modelValue","onUpdate:modelValue"]),c(ae,{"keep-color":"",modelValue:i.difficulty,"onUpdate:modelValue":[o=>i.difficulty=o,l[20]||(l[20]=o=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Epic",label:"Epic",color:"black"},null,8,["modelValue","onUpdate:modelValue"])]),i.stepsEnabled?(z(),U("div",$o,[D("div",Go,[D("table",To,[D("thead",null,[(z(!0),U(je,null,Ke(i.steps,(o,h)=>(z(),U("tr",{key:h},[D("th",zo,[c(Tt,{modelValue:o.value,"onUpdate:modelValue":[b=>o.value=b,l[21]||(l[21]=b=>this.saveGoals())]},null,8,["modelValue","onUpdate:modelValue"])]),D("th",null,[c(Ee,{ref_for:!0,ref:"stepDescRef",multiline:"",autogrow:"",wrap:"on","min-rows":1,"max-rows":10,standout:"bg-primary text-black",class:"full-width","input-class":"text-left",label:"Step Description",modelValue:o.label,"onUpdate:modelValue":[b=>o.label=b,l[22]||(l[22]=b=>this.goalsStore.saveGoals())],onKeydown:e.handleStepInput,onFocus:b=>{this.selectedGoal=i,this.selectedStep=o,this.selectedStepIndex=h}},null,8,["modelValue","onUpdate:modelValue","onKeydown","onFocus"])])]))),128))])])])])):Ie("",!0)]),c(zt,{style:{"margin-top":"-1em"}},{default:I(()=>[i.ready?(z(),U("div",_o,[c(R,{class:W(e.buttonClass),flat:"",glossy:"",icon:"done_all",color:"green",onClick:o=>e.completeGoal(i)},null,8,["class","onClick"])])):(z(),U("div",Mo,[c(R,{class:W(e.buttonClass),flat:"",glossy:"",icon:"check",color:"green",onClick:o=>e.completeGoal(i)},null,8,["class","onClick"])])),c(R,{class:W(e.buttonClass),flat:"",glossy:"",icon:"delete",color:"black",onClick:o=>e.removeGoal(i)},null,8,["class","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[ut]])),128))]),_:1})):(z(),Me(Mt,{key:1},{default:I(()=>[(z(!0),U(je,null,Ke(this.goalsStore.goals,i=>Ye((z(),Me(dt,{key:i},{default:I(()=>[c(Gt,{class:"goal-card text-white full-width"},{default:I(()=>[c(Al,null,{default:I(()=>[D("div",lo,[D("div",oo,[c(Ee,{multiline:"",autogrow:"",wrap:"on","min-rows":1,"max-rows":10,standout:"bg-primary text-black",class:"full-width text-h6","input-class":"text-left",label:"Goal Title",modelValue:i.goal,"onUpdate:modelValue":[o=>i.goal=o,l[5]||(l[5]=o=>this.goalsStore.saveGoals())],onFocus:l[6]||(l[6]=o=>this.$q.notify("Goal will be saved once you enter a title"))},null,8,["modelValue","onUpdate:modelValue"])]),D("div",ao,[c(ae,{"keep-color":"",modelValue:i.difficulty,"onUpdate:modelValue":[o=>i.difficulty=o,l[7]||(l[7]=o=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Easy",label:"Easy",color:"green"},null,8,["modelValue","onUpdate:modelValue"]),c(ae,{"keep-color":"",modelValue:i.difficulty,"onUpdate:modelValue":[o=>i.difficulty=o,l[8]||(l[8]=o=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Moderate",label:"Moderate",color:"orange"},null,8,["modelValue","onUpdate:modelValue"]),c(ae,{"keep-color":"",modelValue:i.difficulty,"onUpdate:modelValue":[o=>i.difficulty=o,l[9]||(l[9]=o=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Hard",label:"Hard",color:"red"},null,8,["modelValue","onUpdate:modelValue"]),c(ae,{"keep-color":"",modelValue:i.difficulty,"onUpdate:modelValue":[o=>i.difficulty=o,l[10]||(l[10]=o=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Epic",label:"Epic",color:"black"},null,8,["modelValue","onUpdate:modelValue"])]),i.stepsEnabled?(z(),U("div",io,[D("p",null,[fe(" Base Reward: "+ve(this.goalsStore.baseReward(i))+" coins.",1),no]),D("div",so,[D("table",uo,[D("thead",null,[(z(!0),U(je,null,Ke(i.steps,(o,h)=>(z(),U("tr",{key:h},[D("th",ro,[c(Tt,{modelValue:o.value,"onUpdate:modelValue":[b=>o.value=b,l[11]||(l[11]=b=>this.saveGoals())]},null,8,["modelValue","onUpdate:modelValue"])]),D("th",null,[c(Ee,{ref_for:!0,ref:"stepDescRef",multiline:"",autogrow:"",wrap:"on","min-rows":1,"max-rows":10,standout:"bg-primary text-black",class:"full-width","input-class":"text-left",label:"Step Description",modelValue:o.label,"onUpdate:modelValue":[b=>o.label=b,l[12]||(l[12]=b=>this.goalsStore.saveGoals())],onKeydown:e.handleStepInput,onFocus:b=>{this.selectedGoal=i,this.selectedStep=o,this.selectedStepIndex=h}},null,8,["modelValue","onUpdate:modelValue","onKeydown","onFocus"])])]))),128))])]),c(R,{flat:"",dense:"",glossy:"",icon:"add",color:"green",onClick:o=>e.addSteps(i)},null,8,["onClick"]),c(R,{flat:"",dense:"",glossy:"",icon:"remove",color:"red",onClick:o=>e.removeSteps(i)},null,8,["onClick"])]),D("p",co,[fe(" Total Reward: "+ve(this.goalsStore.goalReward(i))+" coins.",1),fo])])):(z(),U("div",vo,[D("p",mo," Reward for completion: "+ve(this.goalsStore.goalReward(i))+" coins. ",1)])),D("div",{class:W(["text-goal",{overdue:this.goalsStore.goalExpired(i)}])},[c(Wl,{modelValue:i.repeatDays,"onUpdate:modelValue":[o=>i.repeatDays=o,l[13]||(l[13]=o=>this.saveGoals())],multiple:"","multiple-sort":"",options:e.days,label:"Repeats on these days","display-value":this.goalsStore.displayRepeatDays(i.repeatDays)},null,8,["modelValue","onUpdate:modelValue","options","display-value"]),i.repeatDays&&i.repeatDays.length>0?(z(),U("div",ho,[So,D("p",null," Will occur again on "+ve(this.goalsStore.nextDate(i)),1)])):Ie("",!0),c(Ee,{"no-outline":"",style:{"padding-right":"1e","min-width":"35%"},"input-class":"text-left text-bold",label:"Complete By",modelValue:i.date,"onUpdate:modelValue":o=>i.date=o,onClick:o=>e.openDatePicker(i)},{default:I(()=>[c(rt,{modelValue:i.changeDateDialog,"onUpdate:modelValue":o=>i.changeDateDialog=o},{default:I(()=>[c(_l,{modelValue:i.date,"onUpdate:modelValue":[o=>i.date=o,o=>e.closeDatePicker(i)]},{default:I(()=>[D("div",go,[Ye(c(R,{onClick:o=>e.unscheduleGoal(i),label:"Unschedule",color:"primary",flat:""},null,8,["onClick"]),[[Et]]),Ye(c(R,{onClick:o=>e.closeDatePicker(i),label:"Close",color:"primary",flat:""},null,8,["onClick"]),[[Et]])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","onClick"])],2),this.settingsStore.useNotificationBeta?(z(),U("div",po,[i.alertTime?(z(),U("p",yo,[bo,fe("Alert Time: "+ve(e.displayAlertTime(i.alertTime))+" day of goal. ",1)])):Ie("",!0),c(rt,{modelValue:i.changeAlertTimeDialog,"onUpdate:modelValue":o=>i.changeAlertTimeDialog=o},{default:I(()=>[c(Ml,{modelValue:i.alertTime,"onUpdate:modelValue":[o=>i.alertTime=o,l[14]||(l[14]=o=>this.saveGoals())],onClose:o=>e.closeAlertTimeDialog(i)},{default:I(()=>[D("div",wo,[c(R,{"float-left":"",label:"Disable",onClick:o=>this.goalsStore.disableNotification(i),color:"primary",flat:""},null,8,["onClick"]),c(R,{label:"Close",color:"primary",onClick:o=>e.closeAlertTimeDialog(i),flat:""},null,8,["onClick"])])]),_:2},1032,["modelValue","onUpdate:modelValue","onClose"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])):Ie("",!0)])]),_:2},1024),c($l,{dark:""}),c(zt,null,{default:I(()=>[i.ready?(z(),U("div",Vo,[c(R,{class:W(e.buttonClass),flat:"",glossy:"",icon:"done_all",color:"green",onClick:o=>e.completeGoal(i)},null,8,["class","onClick"])])):(z(),U("div",ko,[c(R,{class:W(e.buttonClass),flat:"",glossy:"",icon:"check",color:"green",onClick:o=>e.completeGoal(i)},null,8,["class","onClick"])])),c(R,{class:W(e.buttonClass),flat:"",glossy:"",icon:"123",color:"yellow",onClick:o=>e.toggleSteps(i),style:{"margin-left":"0"}},null,8,["class","onClick"]),this.settingsStore.useNotificationBeta?(z(),U("div",Co,[c(R,{class:W(e.buttonClass),flat:"",glossy:"",icon:"notifications",color:"red",onClick:o=>i.changeAlertTimeDialog=!0},null,8,["class","onClick"])])):(z(),U("div",Do)),c(R,{class:W(e.buttonClass),flat:"",glossy:"",icon:"delete",color:"black",onClick:o=>e.removeGoal(i)},null,8,["class","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[ut]])),128))]),_:1}))]),_:1})}var Jo=Dl(Xl,[["render",Io]]);export{Jo as default};
