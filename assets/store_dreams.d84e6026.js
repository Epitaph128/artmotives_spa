import{a0 as d}from"./index.72e2c796.js";import{d as a}from"./date.a6efd5a0.js";const r="store_dreams",i="store_dreams_next_id",n=d("dreams",{state:()=>({dreams:[],nextId:0}),actions:{getNextId(){return this.nextId++,this.saveNextId(),this.nextId-1},saveNextId(){localStorage.setItem(i,JSON.stringify(this.nextId))},getDate(e=""){return a.formatDate(e||new Date().toString(),"MMM D, YYYY")},getDateWithTime(e=""){return a.formatDate(e||new Date().toString(),"MMM D, YYYY, hh:mm A")},initialize(){const e=localStorage.getItem(i);this.nextId=e?JSON.parse(e):0;const t=localStorage.getItem(r);this.dreams=t?JSON.parse(t):[],Array.isArray(this.dreams)?this.dreams.forEach(s=>{s.id||(s.id=this.getNextId())}):this.dreams=[]},addDream(){Array.isArray(this.dreams)||(this.dream=[]),this.dreams.unshift({title:"",createdDate:a.formatDate(new Date().toString(),"MMM D, YYYY"),id:this.getNextId()})},removeDream(e){const t=this.dreams.findIndex(s=>s.id===e);this.dreams.splice(t,1),this.saveDreams()},saveDreams(){for(var e=0;e<this.dreams.length;e++)this.dreams[e].ready=!1;localStorage.setItem(r,JSON.stringify(this.dreams)),localStorage.setItem("lastTimestamp",Date.now())},eraseDreams(){localStorage.setItem(r,JSON.stringify([])),localStorage.setItem(i,JSON.stringify(0))}}});export{n as u};
