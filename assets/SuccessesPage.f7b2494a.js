import{_ as h,F as d,o as p,ak as g,G as r,H as a,I as s,R as m,J as i,P as n,al as u,L as c,O as f,S as v,T as y,t as S,b6 as b,as as C}from"./index.18356047.js";import{Q as E}from"./QBtnGroup.4a47740b.js";import{Q as w}from"./QItem.37f64582.js";import{Q as $}from"./QList.b32b7405.js";import{Q as _}from"./QPage.89d9b736.js";import{u as B,Q as k}from"./QSpinnerFacebook.8be5a89d.js";import{u as Q}from"./store_successes.c39e5903.js";import{u as l}from"./store_settings.a8a61be5.js";import{D as q,G as A,H as O}from"./HabitEntry.b3d71efd.js";import"./date.bd7568f5.js";const D=d({name:"SuccessesPage",components:{DreamEntry:q,GoalEntry:A,HabitEntry:O},data(){return{}},created(){this.showLoading()},beforeMount(){this.successesStore=Q(),this.successesStore.initialize(),this.successesStore.initializeArchive(),this.settingsStore=l(),this.settingsStore.initialize(),this.$emit("refresh-header"),this.settingsStore.termsUpToDate()||this.$router.push("terms")},setup(){const e=B();let t;return p(()=>{t!==void 0&&(clearTimeout(t),e.loading.hide())}),{showLoading(){e.loading.show({spinner:k,spinnerColor:"white",spinnerSize:140,backgroundColor:"black",message:"Loading your successes... Please wait!",messageColor:"white"}),t=setTimeout(()=>{e.loading.hide(),t=void 0},500)}}},computed:{...g(l,["useBigButtons"]),buttonClass(){return this.useBigButtons?"bigBtn":""}},methods:{getComponentForEntry(e){switch(e.type){case"dream":return"DreamEntry";case"goal":return"GoalEntry";case"habit":return"HabitEntry";default:return null}},viewSuccessesArchive(){this.$router.push("successesArchive")},archiveOldEntries(){this.$q.dialog({title:"Confirm",message:"Are you sure you want to archive old entries?",cancel:!0,persistent:!0}).onOk(()=>{this.successesStore.archiveOldEntries()?this.$q.notify("You must have at least 30 successes to archive."):this.$q.notify("All entries older than the most recent 30 have been archived.")})},removeEntry(e){e.type=="goal"?this.$q.dialog({title:"Confirm",message:'Are you sure you want to delete the goal success: "'+e.goal+'"',cancel:!0,persistent:!0}).onOk(()=>{this.$q.notify('Goal record deleted: "'+e.goal+'"'),this.successesStore.removeEntry(e.id)}):e.type=="habit"?this.$q.dialog({title:"Confirm",message:'Are you sure you want to delete the habit milestone: "'+e.habit+'"',cancel:!0,persistent:!0}).onOk(()=>{this.$q.notify('Habit milestone record deleted: "'+e.habit+'"'),this.successesStore.removeEntry(e.id)}):e.type=="dream"?this.$q.dialog({title:"Confirm",message:'Are you sure you want to delete the dream achievement: "'+e.title+'"',cancel:!0,persistent:!0}).onOk(()=>{this.$q.notify('Dream achievement deleted: "'+e.title+'"'),this.successesStore.removeEntry(e.id)}):this.successesStore.removeEntry(e.id)}}}),F={class:"q-gutter-md row justify-center"},G=m("h1",{class:"text-white"},"Your Successes!",-1);function L(e,t,P,z,H,T){return r(),a(_,{"items-center":"",class:"successes-page"},{default:s(()=>[m("div",F,[i(E,{"no-wrap":""},{default:s(()=>[i(n,{class:u([e.buttonClass,"top-button"]),onClick:t[0]||(t[0]=o=>this.archiveOldEntries())},{default:s(()=>[c("Archive Old")]),_:1},8,["class"]),i(n,{class:u([e.buttonClass,"top-button"]),onClick:t[1]||(t[1]=o=>this.viewSuccessesArchive()),style:{"margin-left":"1rem"}},{default:s(()=>[c("View Archive")]),_:1},8,["class"])]),_:1})]),G,i($,null,{default:s(()=>[(r(!0),f(y,null,v(this.successesStore.successes,o=>S((r(),a(w,{key:o},{default:s(()=>[(r(),a(b(e.getComponentForEntry(o)),{entry:o,buttonClass:this.useBigButtons?"bigBtn":"",dateFormat:this.settingsStore.useDateFormat,onRemoveEntry:e.removeEntry},null,40,["entry","buttonClass","dateFormat","onRemoveEntry"]))]),_:2},1024)),[[C]])),128))]),_:1})]),_:1})}var K=h(D,[["render",L]]);export{K as default};
