import{a5 as u}from"./index.67595582.js";import{d as l}from"./date.bcdde636.js";const r="store_goals",n="store_goals_unscheduled",o=(e,t)=>{let s=new Date(e).getTime(),a=new Date(t).getTime();return s<a?t:(s>a,e)},h=u("goals",{state:()=>({goals:[],unscheduledGoals:[],weekday:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}),actions:{displayRepeatDays(e){return Array.isArray(e)&&e.length>0?(e.sort((t,s)=>t.value-s.value),e.map(t=>t.label).join(", ")):"Don't Repeat"},getWeekday(e){const t=new Date(e);return this.weekday[t.getDay()]},nextDate(e){if(Array.isArray(e.repeatDays)&&e.repeatDays.length>0){const t=o(new Date(e.date),new Date(this.getDate())),s=e.repeatDays.map(d=>d.value);let a=t,i=0;for(;i<=7&&(a.setDate(a.getDate()+1),!s.includes(a.getDay()));)i++;return this.getDate(a)}return null},getDate(e=""){return l.formatDate(e||new Date().toString(),"MMM D, YYYY")},getDateWithTime(e=""){return l.formatDate(e||new Date().toString(),"MMM D, YYYY, hh:mm A")},baseReward(e){let t=100;return e.difficulty=="Moderate"?t=250:e.difficulty=="Hard"?t=500:e.difficulty=="Epic"&&(t=1e3),t},goalReward(e){let t;return e.difficulty=="Easy"&&(t=100,e.stepsEnabled&&(t=t+(e.stepsSize-1)*25)),e.difficulty=="Moderate"?(t=250,e.stepsEnabled&&(t=t+(e.stepsSize-1)*50)):e.difficulty=="Hard"?(t=500,e.stepsEnabled&&(t=t+(e.stepsSize-1)*75)):e.difficulty=="Epic"&&(t=1e3,e.stepsEnabled&&(t=t+(e.stepsSize-1)*100)),t},goalExpired(e){const t=new Date;return t.setHours(0,0,0,0),new Date(e.date)<t},initialize(){const e=localStorage.getItem(r);this.goals=e?JSON.parse(e):[],Array.isArray(this.goals)||(this.goals=[]);const t=localStorage.getItem(n);this.unscheduledGoals=t?JSON.parse(t):[],Array.isArray(this.unscheduledGoals)||(this.unscheduledGoals=[])},addGoal(e,t){Array.isArray(this.goals)||(this.goals=[]),e?(this.goals.push(e),this.sortGoals(t)):(t=="Difficulty \u2198"?this.goals.unshift({goal:"",date:l.formatDate(new Date().toString(),"MMM D, YYYY"),difficulty:"Epic",dateTieBreaker:new Date().getTime()}):this.goals.unshift({goal:"",date:l.formatDate(new Date().toString(),"MMM D, YYYY"),difficulty:"Easy",dateTieBreaker:new Date().getTime()}),this.sortGoals(t))},addUnscheduledGoal(e,t){Array.isArray(this.unscheduledGoals)||(this.unscheduledGoals=[]),e?(this.unscheduledGoals.push(e),this.sortUnscheduledGoals(t)):(t=="Difficulty \u2198"?this.unscheduledGoals.unshift({goal:"",date:l.formatDate(new Date().toString(),"MMM D, YYYY"),difficulty:"Epic",dateTieBreaker:new Date().getTime()}):this.unscheduledGoals.unshift({goal:"",date:l.formatDate(new Date().toString(),"MMM D, YYYY"),difficulty:"Easy",dateTieBreaker:new Date().getTime()}),this.sortUnscheduledGoals(t))},removeGoal(e){const t=this.goals.indexOf(e);this.goals.splice(t,1),this.saveGoals()},removeUnscheduledGoal(e){const t=this.unscheduledGoals.indexOf(e);this.unscheduledGoals.splice(t,1),this.saveUnscheduledGoals()},disableNotification(e){e.changeAlertTimeDialog=!1,e.alertTime=null,this.saveGoals()},getDifficultyAsNum(e){return e=="Easy"?0:e=="Moderate"?1:e=="Hard"?2:e=="Epic"?3:0},sortGoals(e){e=="Date"?this.goals.sort((t,s)=>{if(t.goal===""&&s.goal===""){const a=new Date(t.date),i=new Date(s.date);return a-i}else{if(t.goal==="")return-1;if(s.goal==="")return 1;{const a=new Date(t.date),i=new Date(s.date);return a-i}}}):e=="Difficulty \u2197"?this.goals.sort((t,s)=>this.getDifficultyAsNum(t.difficulty)-this.getDifficultyAsNum(s.difficulty)):e=="Difficulty \u2198"&&this.goals.sort((t,s)=>this.getDifficultyAsNum(s.difficulty)-this.getDifficultyAsNum(t.difficulty)),this.saveGoals()},sortUnscheduledGoals(e){e=="Date"?this.unscheduledGoals.sort((t,s)=>{if(t.goal===""&&s.goal===""){const a=new Date(t.date),i=new Date(s.date);return a-i}else{if(t.goal==="")return-1;if(s.goal==="")return 1;{const a=new Date(t.date),i=new Date(s.date);return a-i}}}):e=="Difficulty \u2197"?this.unscheduledGoals.sort((t,s)=>this.getDifficultyAsNum(t.difficulty)-this.getDifficultyAsNum(s.difficulty)):e=="Difficulty \u2198"&&this.unscheduledGoals.sort((t,s)=>this.getDifficultyAsNum(s.difficulty)-this.getDifficultyAsNum(t.difficulty)),this.saveUnscheduledGoals()},saveGoals(){localStorage.setItem(r,JSON.stringify(this.goals))},saveUnscheduledGoals(){localStorage.setItem(n,JSON.stringify(this.unscheduledGoals))},eraseGoals(){localStorage.setItem(r,JSON.stringify([]))}}});export{h as u};
