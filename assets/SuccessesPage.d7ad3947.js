import{_ as m,F as g,o as p,ak as f,G as o,H as a,I as i,R as l,J as r,P as n,al as u,L as c,O as h,K as v,S as y,T as S,s as b,b6 as E,as as w}from"./index.72e2c796.js";import{Q as C}from"./QBtnGroup.b69c6302.js";import{Q as k}from"./QItem.e6aea75d.js";import{Q as $}from"./QList.726589ab.js";import{Q as _}from"./QPage.3fcf59c0.js";import{u as B,Q as T}from"./QSpinnerFacebook.2ae7f491.js";import{u as q}from"./store_successes.ff3b616b.js";import{u as d}from"./store_settings.a1abbadf.js";import{D as A,G as Q,H as O}from"./HabitEntry.b4ce74d7.js";import"./date.a6efd5a0.js";const V=g({name:"SuccessesPage",components:{DreamEntry:A,GoalEntry:Q,HabitEntry:O},data(){return{}},created(){this.showLoading()},beforeMount(){this.successesStore=q(),this.successesStore.initialize(),this.successesStore.initializeArchive(),this.settingsStore=d(),this.settingsStore.initialize(),this.successesStore.successes.forEach(e=>{e.visible==null&&(e.visible=!0)}),this.$emit("refresh-header"),this.settingsStore.termsUpToDate()||this.$router.push("terms")},setup(){const e=B();let t;return p(()=>{t!==void 0&&(clearTimeout(t),e.loading.hide())}),{showLoading(){e.loading.show({spinner:T,spinnerColor:"white",spinnerSize:140,backgroundColor:"black",message:"Loading your successes... Please wait!",messageColor:"white"}),t=setTimeout(()=>{e.loading.hide(),t=void 0},500)}}},computed:{...f(d,["useBigButtons"]),buttonClass(){return this.useBigButtons?"bigBtn":""}},methods:{getComponentForEntry(e){switch(e.type){case"dream":return"DreamEntry";case"goal":return"GoalEntry";case"habit":return"HabitEntry";default:return null}},hideTutorial(){this.$q.dialog({title:"Acknowledge",message:"Have you read and understood the instructions?",cancel:!0,persistent:!0}).onOk(()=>{this.settingsStore.tutorialSettings.successesTutorialHidden=!0,this.settingsStore.saveTutorialSettings()})},viewSuccessesArchive(){this.$router.push("successesArchive")},archiveOldEntries(){this.$q.dialog({title:"Confirm",message:"Are you sure you want to archive old entries?",cancel:!0,persistent:!0}).onOk(()=>{this.successesStore.archiveOldEntries()?this.$q.notify("You must have at least 30 successes to archive."):this.$q.notify("All entries older than the most recent 30 have been archived.")})},removeEntry(e){e.type=="goal"?this.$q.dialog({title:"Confirm",message:'Are you sure you want to delete the goal success: "'+e.goal+'"',cancel:!0,persistent:!0}).onOk(()=>{this.$q.notify('Goal record deleted: "'+e.goal+'"'),this.successesStore.removeEntry(e.id)}):e.type=="habit"?this.$q.dialog({title:"Confirm",message:'Are you sure you want to delete the habit milestone: "'+e.habit+'"',cancel:!0,persistent:!0}).onOk(()=>{this.$q.notify('Habit milestone record deleted: "'+e.habit+'"'),this.successesStore.removeEntry(e.id)}):e.type=="dream"?this.$q.dialog({title:"Confirm",message:'Are you sure you want to delete the dream achievement: "'+e.title+'"',cancel:!0,persistent:!0}).onOk(()=>{this.$q.notify('Dream achievement deleted: "'+e.title+'"'),this.successesStore.removeEntry(e.id)}):this.successesStore.removeEntry(e.id)},toggleVisibility(e){e.visible=!e.visible,this.successesStore.saveEntries()}}}),D={class:"q-gutter-md row justify-center"},F=l("h1",{class:"text-white"},"Your Successes!",-1),H={key:0,class:"tutorial"},G=l("p",null," View your successes here, from most recent to oldest. There is also an archive available. Once you have more than 30 successes, you may click the button to archive older entries. They can then be left out of the Export Report if you wish. Click the trash can icon to delete an entry, and the eye icon to toggle if it shows up on the Export Report or not. ",-1);function L(e,t,P,R,z,x){return o(),a(_,{"items-center":"",class:"successes-page"},{default:i(()=>[l("div",D,[r(C,{"no-wrap":""},{default:i(()=>[r(n,{class:u([e.buttonClass,"top-button"]),onClick:t[0]||(t[0]=s=>this.archiveOldEntries())},{default:i(()=>[c("Archive Old")]),_:1},8,["class"]),r(n,{class:u([e.buttonClass,"top-button"]),onClick:t[1]||(t[1]=s=>this.viewSuccessesArchive()),style:{"margin-left":"1rem"}},{default:i(()=>[c("View Archive")]),_:1},8,["class"])]),_:1})]),F,this.settingsStore.tutorialSettings.successesTutorialHidden?v("",!0):(o(),h("div",H,[G,r(n,{flat:"",dense:"",glossy:"",icon:"done",color:"check",onClick:t[2]||(t[2]=s=>this.hideTutorial())})])),r($,null,{default:i(()=>[(o(!0),h(S,null,y(this.successesStore.successes,s=>b((o(),a(k,{key:s},{default:i(()=>[(o(),a(E(e.getComponentForEntry(s)),{entry:s,buttonClass:this.useBigButtons?"bigBtn":"",dateFormat:this.settingsStore.useDateFormat,onRemoveEntry:e.removeEntry,onToggleVisibility:e.toggleVisibility},null,40,["entry","buttonClass","dateFormat","onRemoveEntry","onToggleVisibility"]))]),_:2},1024)),[[w]])),128))]),_:1})]),_:1})}var Z=m(V,[["render",L]]);export{Z as default};
