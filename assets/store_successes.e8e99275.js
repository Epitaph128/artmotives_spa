import{a5 as a}from"./index.5647acc7.js";const r="store_successes",c="store_successes_archive",h=a("successes",{state:()=>({successes:[],successesArchive:[]}),actions:{initialize(){const s=localStorage.getItem(r);s?this.successes=JSON.parse(s):this.successes={},Array.isArray(this.successes)||(this.successes=[])},initializeArchive(){const s=localStorage.getItem(c);s?this.successesArchive=JSON.parse(s):this.successesArchive={},Array.isArray(this.successesArchive)||(this.successesArchive=[])},addEntry(s){this.successes.push(s),this.sortEntries()},removeEntry(s){const e=this.successes.indexOf(s);this.successes.splice(e,1),this.saveEntries()},removeArchivedEntry(s){const e=this.successesArchive.indexOf(s);this.successesArchive.splice(e,1),this.saveArchivedEntries()},saveEntries(){localStorage.setItem(r,JSON.stringify(this.successes))},saveArchivedEntries(){localStorage.setItem(c,JSON.stringify(this.successesArchive))},eraseEntries(){localStorage.setItem(r,JSON.stringify([]))},eraseArchivedEntries(){localStorage.setItem(c,JSON.stringify([]))},sortEntries(){this.successes.sort((s,e)=>{const t=new Date(s.date),i=new Date(e.date);return t<i?1:t>i?-1:e.dateTieBreaker-s.dateTieBreaker}),this.saveEntries()},sortArchivedEntries(){this.successesArchive.sort((s,e)=>{const t=new Date(s.date),i=new Date(e.date);return t<i?1:t>i?-1:e.dateTieBreaker-s.dateTieBreaker}),this.saveArchivedEntries()},daysSinceFirstSuccess(){if(this.successes.length>0){const s=new Date(this.successes[this.successes.length-1].date),e=new Date,t=Math.abs(e-s);return Math.round(t/(1e3*60*60*24))+1}return 1},archiveOldEntries(){if(this.successes.length<=30)return!0;for(;this.successes.length>30;)this.successesArchive.unshift(this.successes.pop());return this.saveEntries(),this.saveArchivedEntries(),!1}}});export{h as u};
