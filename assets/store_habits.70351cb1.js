import{a5 as u}from"./index.2421c96f.js";const g="store_habits",f=u("habits",{state:()=>({habits:[]}),actions:{initialize(){const e=localStorage.getItem(g);this.habits=e?JSON.parse(e):[],Array.isArray(this.habits)||(this.habits=[]);for(var t=0;t<this.habits.length;t++)this.habits[t].lastDate!=null&&this.habits[t].streak!=0&&this.streakExpired(this.habits[t])&&(this.habits[t].streak=0);this.sortHabits()},addHabit(){this.sortHabits(),this.habits.unshift({habit:"",dateTieBreaker:this.getTime(),streak:0,longestStreak:0,total:0})},sortHabits(){this.habits.sort((e,t)=>{if(e.total===0&&t.total===0)return 0;if(e.total===0)return-1;if(t.total===0)return 1;const s=this.habitNotCompleted(e),r=this.habitNotCompleted(t);return s&&r?e.dateTieBreaker-t.dateTieBreaker:s?-1:r?1:e.dateTieBreaker-t.dateTieBreaker}),this.saveHabits()},saveHabits(){for(var e=0;e<this.habits.length;e++)this.habits[e].ready=!1;localStorage.setItem(g,JSON.stringify(this.habits))},habitReward(e){return e<=3?75:e<=5?100:e<=14?125:150},removeHabit(e){const t=this.habits.indexOf(e);this.habits.splice(t,1),this.saveHabits()},eraseHabits(){localStorage.setItem(g,JSON.stringify([]))},disableNotification(e){e.alertTime=null,e.changeAlertTimeDialog=!1,this.saveHabits()},streakExpired(e,t){var s=Date.now();t!=null&&(s=t),e.resetTime||(e.resetTime="12:00 AM");const[r,n]=e.resetTime.split(" "),[m,c]=r.split(":"),a=parseInt(m,10),l=parseInt(c,10);let i=a;n==="PM"&&a!==12?i+=12:n==="AM"&&a===12&&(i=0);const o=new Date(e.dateTieBreaker);t&&(console.log(`

resetHoursAdjusted: `,i),console.log("lastCompletionDate.getHours()",o.getHours()));var h=2;(o.getHours()<i||o.getHours()==i&&o.getMinutes()<l)&&(h=1),t&&console.log("daysLater: "+h);const T=new Date(o.getFullYear(),o.getMonth(),o.getDate()+h,i,l).getTime();return s>=T},getPreviousDay(e){const t=new Date(e);return t.setDate(t.getDate()-1),t.toString()},getTime(){return new Date().getTime()},habitNotCompleted(e,t){if(t==null&&!e.lastDate)return!0;e.resetTime||(e.resetTime="12:00 AM");const s=e.dateTieBreaker,[r,n]=e.resetTime.split(" "),[m,c]=r.split(":"),a=parseInt(m,10),l=parseInt(c,10);var i=new Date;t&&(i=t);let o=a;n==="PM"&&a!==12?o+=12:n==="AM"&&a===12&&(o=0);const h=new Date(i.getFullYear(),i.getMonth(),i.getDate(),o,l).getTime();if(i.getTime()>=h)return s<h;{const T=h-864e5;return s<T}},testStreakExpired(){const e={resetTime:"7:00 AM",dateTieBreaker:new Date(2023,6,1,8).getTime()},t={resetTime:"10:30 PM",dateTieBreaker:new Date(2023,6,2,22).getTime()},s={resetTime:"12:00 PM",dateTieBreaker:new Date(2023,6,3,11,30).getTime()},r=new Date(2023,6,3,6,59,59,999).getTime();console.log("Test Case 1:",this.streakExpired(e,r),"false");const n=new Date(2023,6,3,7).getTime();console.log("Test Case 2:",this.streakExpired(e,n),"true");const m=new Date(2023,6,3,22,29,59,999).getTime();console.log("Test Case 3:",this.streakExpired(t,m),"false");const c=new Date(2023,6,3,22,30).getTime();console.log("Test Case 4:",this.streakExpired(t,c),"true");const a=new Date(2023,6,4,11,59,59,999).getTime();console.log("Test Case 5:",this.streakExpired(s,a),"false");const l=new Date(2023,6,5,12).getTime();console.log("Test Case 6:",this.streakExpired(s,l),"true");const i=new Date(2023,6,4,12).getTime();console.log("Test Case 7:",this.streakExpired(s,i),"true")},testHabitNotCompleted(){const e={resetTime:"7:00 AM",dateTieBreaker:new Date(2023,5,1,8).getTime()},t={resetTime:"10:30 PM",dateTieBreaker:new Date(2023,5,2,22).getTime()},s={resetTime:"12:00 PM",dateTieBreaker:new Date(2023,5,3,11,30).getTime()},r=new Date(2023,5,2,6,59,59,999);console.log("Test Case 1:",this.habitNotCompleted(e,r),"false");const n=new Date(2023,5,2,7);console.log("Test Case 2:",this.habitNotCompleted(e,n),"true");const m=new Date(2023,5,2,22,5);console.log("Test Case 3:",this.habitNotCompleted(t,m),"false");const c=new Date(2023,5,2,23,30);console.log("Test Case 4:",this.habitNotCompleted(t,c),"true");const a=new Date(2023,5,3,11,59);console.log("Test case 5:",this.habitNotCompleted(s,a),"false");const l=new Date(2023,5,3,12);console.log("Test case 6:",this.habitNotCompleted(s,l),"true")}}});export{f as u};
