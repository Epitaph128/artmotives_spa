import{c as nt,aw as ut,ax as $t,ay as It,az as Gt,p as tl,aA as ll,s as ol,aB as al,a as m,z as il,g as st,h as b,Q as Ue,aC as nl,aq as Mt,a4 as de,n as ul,r as O,w as we,e as ae,aD as sl,aE as rl,aF as cl,aG as dl,d as Bt,ar as fl,aH as vl,aI as wt,aJ as $e,aK as ml,aL as Sl,D as Ze,aM as hl,ae as be,a3 as gl,aN as pl,an as it,L as yl,_ as bl,M as Cl,ai as Vl,N as L,O as kt,P,Y as E,R as C,X as H,aj as ee,T as Ce,U as Ve,W as Y,Z as Dt,$ as xt,y as et,ak as wl,al as kl,am as tt,aO as He,aP as Dl,S as lt,ao as xl,ap as Al}from"./index.2421c96f.js";import{Q as ql}from"./QBtnGroup.ff5a08a6.js";import{Q as Et,a as zl}from"./QItem.0e02af43.js";import{Q as _l}from"./QItemSection.cf90de3a.js";import{Q as Tl}from"./QItemLabel.f1120146.js";import{Q as $l}from"./QMenu.f0e277df.js";import{n as At,d as ot}from"./date.a0edf2b1.js";import{Q as Il,C as qt}from"./ClosePopup.a66dfe7a.js";import{Q as Gl}from"./QTime.c0d2484e.js";import{Q as Ml}from"./QPage.7c3dd896.js";import{u as Bl}from"./store_goals.50a91630.js";import{u as El}from"./store_successes.869eadc6.js";import{u as zt}from"./store_settings.045ac871.js";import"./selection.2a241a94.js";import"./TouchPan.22105fb7.js";var Ol=nt({name:"QField",inheritAttrs:!1,props:{...ut,tag:{type:String,default:"label"}},emits:$t,setup(){return It(Gt({requiredForAttr:!1,tagProp:!0}))}});const Rl={xs:8,sm:10,md:14,lg:20,xl:24};var Fl=nt({name:"QChip",props:{...tl,...ll,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:o,emit:c}){const{proxy:{$q:S}}=st(),D=ol(e,S),u=al(e,Rl),i=m(()=>e.selected===!0||e.icon!==void 0),a=m(()=>e.selected===!0?e.iconSelected||S.iconSet.chip.selected:e.icon),h=m(()=>e.iconRemove||S.iconSet.chip.remove),x=m(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),d=m(()=>{const v=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(v?` text-${v} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(x.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(D.value===!0?" q-chip--dark q-dark":"")}),V=m(()=>{const v=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},N={...v,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||S.lang.label.remove};return{chip:v,remove:N}});function k(v){v.keyCode===13&&A(v)}function A(v){e.disable||(c("update:selected",!e.selected),c("click",v))}function T(v){(v.keyCode===void 0||v.keyCode===13)&&(de(v),e.disable===!1&&(c("update:modelValue",!1),c("remove")))}function U(){const v=[];x.value===!0&&v.push(b("div",{class:"q-focus-helper"})),i.value===!0&&v.push(b(Ue,{class:"q-chip__icon q-chip__icon--left",name:a.value}));const N=e.label!==void 0?[b("div",{class:"ellipsis"},[e.label])]:void 0;return v.push(b("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},nl(o.default,N))),e.iconRight&&v.push(b(Ue,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&v.push(b(Ue,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:h.value,...V.value.remove,onClick:T,onKeyup:T})),v}return()=>{if(e.modelValue===!1)return;const v={class:d.value,style:u.value};return x.value===!0&&Object.assign(v,V.value.chip,{onClick:A,onKeyup:k}),il("div",v,U(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Mt,e.ripple]])}}});let Ne=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const o=document.createElement("div");Object.assign(o.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(o),e.scrollLeft=-1e3,Ne=e.scrollLeft>=0,e.remove()}const W=1e3,Pl=["start","center","end","start-force","center-force","end-force"],Ot=Array.prototype.filter,Ll=window.getComputedStyle(document.body).overflowAnchor===void 0?ul:function(e,o){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const c=e.children||[];Ot.call(c,D=>D.dataset&&D.dataset.qVsAnchor!==void 0).forEach(D=>{delete D.dataset.qVsAnchor});const S=c[o];S&&S.dataset&&(S.dataset.qVsAnchor="")}))};function ke(e,o){return e+o}function at(e,o,c,S,D,u,i,a){const h=e===window?document.scrollingElement||document.documentElement:e,x=D===!0?"offsetWidth":"offsetHeight",d={scrollStart:0,scrollViewSize:-i-a,scrollMaxSize:0,offsetStart:-i,offsetEnd:-a};if(D===!0?(e===window?(d.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,d.scrollViewSize+=document.documentElement.clientWidth):(d.scrollStart=h.scrollLeft,d.scrollViewSize+=h.clientWidth),d.scrollMaxSize=h.scrollWidth,u===!0&&(d.scrollStart=(Ne===!0?d.scrollMaxSize-d.scrollViewSize:0)-d.scrollStart)):(e===window?(d.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,d.scrollViewSize+=document.documentElement.clientHeight):(d.scrollStart=h.scrollTop,d.scrollViewSize+=h.clientHeight),d.scrollMaxSize=h.scrollHeight),c!==null)for(let V=c.previousElementSibling;V!==null;V=V.previousElementSibling)V.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetStart+=V[x]);if(S!==null)for(let V=S.nextElementSibling;V!==null;V=V.nextElementSibling)V.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetEnd+=V[x]);if(o!==e){const V=h.getBoundingClientRect(),k=o.getBoundingClientRect();D===!0?(d.offsetStart+=k.left-V.left,d.offsetEnd-=k.width):(d.offsetStart+=k.top-V.top,d.offsetEnd-=k.height),e!==window&&(d.offsetStart+=d.scrollStart),d.offsetEnd+=d.scrollMaxSize-d.offsetStart}return d}function _t(e,o,c,S){o==="end"&&(o=(e===window?document.body:e)[c===!0?"scrollWidth":"scrollHeight"]),e===window?c===!0?(S===!0&&(o=(Ne===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-o),window.scrollTo(o,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o):c===!0?(S===!0&&(o=(Ne===!0?e.scrollWidth-e.offsetWidth:0)-o),e.scrollLeft=o):e.scrollTop=o}function Ie(e,o,c,S){if(c>=S)return 0;const D=o.length,u=Math.floor(c/W),i=Math.floor((S-1)/W)+1;let a=e.slice(u,i).reduce(ke,0);return c%W!==0&&(a-=o.slice(u*W,c).reduce(ke,0)),S%W!==0&&S!==D&&(a-=o.slice(S,i*W).reduce(ke,0)),a}const Hl={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Ul={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Hl};function Nl({virtualScrollLength:e,getVirtualScrollTarget:o,getVirtualScrollEl:c,virtualScrollItemSizeComputed:S}){const D=st(),{props:u,emit:i,proxy:a}=D,{$q:h}=a;let x,d,V,k=[],A;const T=O(0),U=O(0),v=O({}),N=O(null),te=O(null),F=O(null),I=O({from:0,to:0}),Ge=m(()=>u.tableColspan!==void 0?u.tableColspan:100);S===void 0&&(S=m(()=>u.virtualScrollItemSize));const G=m(()=>S.value+";"+u.virtualScrollHorizontal),le=m(()=>G.value+";"+u.virtualScrollSliceRatioBefore+";"+u.virtualScrollSliceRatioAfter);we(le,()=>{X()}),we(G,ie);function ie(){fe(d,!0)}function De(l){fe(l===void 0?d:l)}function ne(l,r){const g=o();if(g==null||g.nodeType===8)return;const _=at(g,c(),N.value,te.value,u.virtualScrollHorizontal,h.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd);V!==_.scrollViewSize&&X(_.scrollViewSize),Q(g,_,Math.min(e.value-1,Math.max(0,parseInt(l,10)||0)),0,Pl.indexOf(r)!==-1?r:d!==-1&&l>d?"end":"start")}function Me(){const l=o();if(l==null||l.nodeType===8)return;const r=at(l,c(),N.value,te.value,u.virtualScrollHorizontal,h.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd),g=e.value-1,_=r.scrollMaxSize-r.offsetStart-r.offsetEnd-U.value;if(x===r.scrollStart)return;if(r.scrollMaxSize<=0){Q(l,r,0,0);return}V!==r.scrollViewSize&&X(r.scrollViewSize),xe(I.value.from);const M=Math.floor(r.scrollMaxSize-Math.max(r.scrollViewSize,r.offsetEnd)-Math.min(A[g],r.scrollViewSize/2));if(M>0&&Math.ceil(r.scrollStart)>=M){Q(l,r,g,r.scrollMaxSize-r.offsetEnd-k.reduce(ke,0));return}let w=0,y=r.scrollStart-r.offsetStart,B=y;if(y<=_&&y+r.scrollViewSize>=T.value)y-=T.value,w=I.value.from,B=y;else for(let p=0;y>=k[p]&&w<g;p++)y-=k[p],w+=W;for(;y>0&&w<g;)y-=A[w],y>-r.scrollViewSize?(w++,B=y):B=A[w]+y;Q(l,r,w,B)}function Q(l,r,g,_,M){const w=typeof M=="string"&&M.indexOf("-force")!==-1,y=w===!0?M.replace("-force",""):M,B=y!==void 0?y:"start";let p=Math.max(0,g-v.value[B]),j=p+v.value.total;j>e.value&&(j=e.value,p=Math.max(0,j-v.value.total)),x=r.scrollStart;const oe=p!==I.value.from||j!==I.value.to;if(oe===!1&&y===void 0){Ae(g);return}const{activeElement:Ee}=document,J=F.value;oe===!0&&J!==null&&J!==Ee&&J.contains(Ee)===!0&&(J.addEventListener("focusout",Be),setTimeout(()=>{J!==null&&J.removeEventListener("focusout",Be)})),Ll(J,g-p);const Oe=y!==void 0?A.slice(p,g).reduce(ke,0):0;if(oe===!0){const ue=j>=I.value.from&&p<=I.value.to?I.value.to:j;I.value={from:p,to:ue},T.value=Ie(k,A,0,p),U.value=Ie(k,A,j,e.value),requestAnimationFrame(()=>{I.value.to!==j&&x===r.scrollStart&&(I.value={from:I.value.from,to:j},U.value=Ie(k,A,j,e.value))})}requestAnimationFrame(()=>{if(x!==r.scrollStart)return;oe===!0&&xe(p);const ue=A.slice(p,g).reduce(ke,0),se=ue+r.offsetStart+T.value,Re=se+A[g];let ze=se+_;if(y!==void 0){const je=ue-Oe,_e=r.scrollStart+je;ze=w!==!0&&_e<se&&Re<_e+r.scrollViewSize?_e:y==="end"?Re-r.scrollViewSize:se-(y==="start"?0:Math.round((r.scrollViewSize-A[g])/2))}x=ze,_t(l,ze,u.virtualScrollHorizontal,h.lang.rtl),Ae(g)})}function xe(l){const r=F.value;if(r){const g=Ot.call(r.children,p=>p.classList&&p.classList.contains("q-virtual-scroll--skip")===!1),_=g.length,M=u.virtualScrollHorizontal===!0?p=>p.getBoundingClientRect().width:p=>p.offsetHeight;let w=l,y,B;for(let p=0;p<_;){for(y=M(g[p]),p++;p<_&&g[p].classList.contains("q-virtual-scroll--with-prev")===!0;)y+=M(g[p]),p++;B=y-A[w],B!==0&&(A[w]+=B,k[Math.floor(w/W)]+=B),w++}}}function Be(){F.value!==null&&F.value!==void 0&&F.value.focus()}function fe(l,r){const g=1*S.value;(r===!0||Array.isArray(A)===!1)&&(A=[]);const _=A.length;A.length=e.value;for(let w=e.value-1;w>=_;w--)A[w]=g;const M=Math.floor((e.value-1)/W);k=[];for(let w=0;w<=M;w++){let y=0;const B=Math.min((w+1)*W,e.value);for(let p=w*W;p<B;p++)y+=A[p];k.push(y)}d=-1,x=void 0,T.value=Ie(k,A,0,I.value.from),U.value=Ie(k,A,I.value.to,e.value),l>=0?(xe(I.value.from),ae(()=>{ne(l)})):ve()}function X(l){if(l===void 0&&typeof window!="undefined"){const y=o();y!=null&&y.nodeType!==8&&(l=at(y,c(),N.value,te.value,u.virtualScrollHorizontal,h.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd).scrollViewSize)}V=l;const r=parseFloat(u.virtualScrollSliceRatioBefore)||0,g=parseFloat(u.virtualScrollSliceRatioAfter)||0,_=1+r+g,M=l===void 0||l<=0?1:Math.ceil(l/S.value),w=Math.max(1,M,Math.ceil((u.virtualScrollSliceSize>0?u.virtualScrollSliceSize:10)/_));v.value={total:Math.ceil(w*_),start:Math.ceil(w*r),center:Math.ceil(w*(.5+r)),end:Math.ceil(w*(1+r)),view:M}}function Qe(l,r){const g=u.virtualScrollHorizontal===!0?"width":"height",_={["--q-virtual-scroll-item-"+g]:S.value+"px"};return[l==="tbody"?b(l,{class:"q-virtual-scroll__padding",key:"before",ref:N},[b("tr",[b("td",{style:{[g]:`${T.value}px`,..._},colspan:Ge.value})])]):b(l,{class:"q-virtual-scroll__padding",key:"before",ref:N,style:{[g]:`${T.value}px`,..._}}),b(l,{class:"q-virtual-scroll__content",key:"content",ref:F,tabindex:-1},r.flat()),l==="tbody"?b(l,{class:"q-virtual-scroll__padding",key:"after",ref:te},[b("tr",[b("td",{style:{[g]:`${U.value}px`,..._},colspan:Ge.value})])]):b(l,{class:"q-virtual-scroll__padding",key:"after",ref:te,style:{[g]:`${U.value}px`,..._}})]}function Ae(l){d!==l&&(u.onVirtualScroll!==void 0&&i("virtualScroll",{index:l,from:I.value.from,to:I.value.to-1,direction:l<d?"decrease":"increase",ref:a}),d=l)}X();const ve=sl(Me,h.platform.is.ios===!0?120:35);rl(()=>{X()});let qe=!1;return cl(()=>{qe=!0}),dl(()=>{if(qe!==!0)return;const l=o();x!==void 0&&l!==void 0&&l!==null&&l.nodeType!==8?_t(l,x,u.virtualScrollHorizontal,h.lang.rtl):ne(d)}),Bt(()=>{ve.cancel()}),Object.assign(a,{scrollTo:ne,reset:ie,refresh:De}),{virtualScrollSliceRange:I,virtualScrollSliceSizeComputed:v,setVirtualScrollSize:X,onVirtualScrollEvt:ve,localResetVirtualScroll:fe,padVirtualScroll:Qe,scrollTo:ne,reset:ie,refresh:De}}const Tt=e=>["add","add-unique","toggle"].includes(e),Ql=".*+?^${}()|[]\\",jl=Object.keys(ut);var Kl=nt({name:"QSelect",inheritAttrs:!1,props:{...Ul,...fl,...ut,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Tt},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...$t,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:o,emit:c}){const{proxy:S}=st(),{$q:D}=S,u=O(!1),i=O(!1),a=O(-1),h=O(""),x=O(!1),d=O(!1);let V=null,k=null,A,T,U,v=null,N,te,F,I;const Ge=O(null),G=O(null),le=O(null),ie=O(null),De=O(null),ne=vl(e),Me=hl(pt),Q=m(()=>Array.isArray(e.options)?e.options.length:0),xe=m(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:Be,virtualScrollSliceSizeComputed:fe,localResetVirtualScroll:X,padVirtualScroll:Qe,onVirtualScrollEvt:Ae,scrollTo:ve,setVirtualScrollSize:qe}=Nl({virtualScrollLength:Q,getVirtualScrollTarget:Lt,getVirtualScrollEl:ht,virtualScrollItemSizeComputed:xe}),l=Gt(),r=m(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,s=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const n=e.mapOptions===!0&&A!==void 0?A:[],f=s.map(z=>Pt(z,n));return e.modelValue===null&&t===!0?f.filter(z=>z!==null):f}return s}),g=m(()=>{const t={};return jl.forEach(s=>{const n=e[s];n!==void 0&&(t[s]=n)}),t}),_=m(()=>e.optionsDark===null?l.isDark.value:e.optionsDark),M=m(()=>wt(r.value)),w=m(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||r.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),y=m(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),B=m(()=>Q.value===0),p=m(()=>r.value.map(t=>K.value(t)).join(", ")),j=m(()=>e.displayValue!==void 0?e.displayValue:p.value),oe=m(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),Ee=m(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||r.value.some(oe.value))),J=m(()=>l.focused.value===!0?e.tabindex:-1),Oe=m(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":u.value===!0?"true":"false","aria-controls":`${l.targetUid.value}_lb`};return a.value>=0&&(t["aria-activedescendant"]=`${l.targetUid.value}_${a.value}`),t}),ue=m(()=>({id:`${l.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),se=m(()=>r.value.map((t,s)=>({index:s,opt:t,html:oe.value(t),selected:!0,removeAtIndex:Ft,toggleOption:re,tabindex:J.value}))),Re=m(()=>{if(Q.value===0)return[];const{from:t,to:s}=Be.value;return e.options.slice(t,s).map((n,f)=>{const z=me.value(n)===!0,q=We(n)===!0,R=t+f,$={clickable:!0,active:q,activeClass:_e.value,manualFocus:!0,focused:!1,disable:z,tabindex:-1,dense:e.optionsDense,dark:_.value,role:"option","aria-selected":q===!0?"true":"false",id:`${l.targetUid.value}_${R}`,onClick:()=>{re(n)}};return z!==!0&&(a.value===R&&($.focused=!0),D.platform.is.desktop===!0&&($.onMousemove=()=>{u.value===!0&&Se(R)})),{index:R,opt:n,html:oe.value(n),label:K.value(n),selected:$.active,focused:$.focused,toggleOption:re,setOptionIndex:Se,itemProps:$}})}),ze=m(()=>e.dropdownIcon!==void 0?e.dropdownIcon:D.iconSet.arrow.dropdown),je=m(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),_e=m(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),Z=m(()=>Ye(e.optionValue,"value")),K=m(()=>Ye(e.optionLabel,"label")),me=m(()=>Ye(e.optionDisable,"disable")),Fe=m(()=>r.value.map(t=>Z.value(t))),Rt=m(()=>{const t={onInput:pt,onChange:Me,onKeydown:St,onKeyup:vt,onKeypress:mt,onFocus:dt,onClick(s){T===!0&&be(s)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=Me,t});we(r,t=>{A=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&l.innerLoading.value!==!0&&(i.value!==!0&&u.value!==!0||M.value!==!0)&&(U!==!0&&ye(),(i.value===!0||u.value===!0)&&he(""))},{immediate:!0}),we(()=>e.fillInput,ye),we(u,Xe),we(Q,el);function rt(t){return e.emitValue===!0?Z.value(t):t}function Ke(t){if(t!==-1&&t<r.value.length)if(e.multiple===!0){const s=e.modelValue.slice();c("remove",{index:t,value:s.splice(t,1)[0]}),c("update:modelValue",s)}else c("update:modelValue",null)}function Ft(t){Ke(t),l.focus()}function ct(t,s){const n=rt(t);if(e.multiple!==!0){e.fillInput===!0&&Te(K.value(t),!0,!0),c("update:modelValue",n);return}if(r.value.length===0){c("add",{index:0,value:n}),c("update:modelValue",e.multiple===!0?[n]:n);return}if(s===!0&&We(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const f=e.modelValue.slice();c("add",{index:f.length,value:n}),f.push(n),c("update:modelValue",f)}function re(t,s){if(l.editable.value!==!0||t===void 0||me.value(t)===!0)return;const n=Z.value(t);if(e.multiple!==!0){s!==!0&&(Te(e.fillInput===!0?K.value(t):"",!0,!0),ce()),G.value!==null&&G.value.focus(),(r.value.length===0||$e(Z.value(r.value[0]),n)!==!0)&&c("update:modelValue",e.emitValue===!0?n:t);return}if((T!==!0||x.value===!0)&&l.focus(),dt(),r.value.length===0){const q=e.emitValue===!0?n:t;c("add",{index:0,value:q}),c("update:modelValue",e.multiple===!0?[q]:q);return}const f=e.modelValue.slice(),z=Fe.value.findIndex(q=>$e(q,n));if(z!==-1)c("remove",{index:z,value:f.splice(z,1)[0]});else{if(e.maxValues!==void 0&&f.length>=e.maxValues)return;const q=e.emitValue===!0?n:t;c("add",{index:f.length,value:q}),f.push(q)}c("update:modelValue",f)}function Se(t){if(D.platform.is.desktop!==!0)return;const s=t!==-1&&t<Q.value?t:-1;a.value!==s&&(a.value=s)}function Pe(t=1,s){if(u.value===!0){let n=a.value;do n=At(n+t,-1,Q.value-1);while(n!==-1&&n!==a.value&&me.value(e.options[n])===!0);a.value!==n&&(Se(n),ve(n),s!==!0&&e.useInput===!0&&e.fillInput===!0&&Le(n>=0?K.value(e.options[n]):N,!0))}}function Pt(t,s){const n=f=>$e(Z.value(f),t);return e.options.find(n)||s.find(n)||t}function Ye(t,s){const n=t!==void 0?t:s;return typeof n=="function"?n:f=>f!==null&&typeof f=="object"&&n in f?f[n]:f}function We(t){const s=Z.value(t);return Fe.value.find(n=>$e(n,s))!==void 0}function dt(t){e.useInput===!0&&G.value!==null&&(t===void 0||G.value===t.target&&t.target.value===p.value)&&G.value.select()}function ft(t){gl(t,27)===!0&&u.value===!0&&(be(t),ce(),ye()),c("keyup",t)}function vt(t){const{value:s}=t.target;if(t.keyCode!==void 0){ft(t);return}if(t.target.value="",V!==null&&(clearTimeout(V),V=null),k!==null&&(clearTimeout(k),k=null),ye(),typeof s=="string"&&s.length!==0){const n=s.toLocaleLowerCase(),f=q=>{const R=e.options.find($=>q.value($).toLocaleLowerCase()===n);return R===void 0?!1:(r.value.indexOf(R)===-1?re(R):ce(),!0)},z=q=>{f(Z)!==!0&&(f(K)===!0||q===!0||he(s,!0,()=>z(!0)))};z()}else l.clearValue(t)}function mt(t){c("keypress",t)}function St(t){if(c("keydown",t),pl(t)===!0)return;const s=h.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),n=t.shiftKey!==!0&&e.multiple!==!0&&(a.value!==-1||s===!0);if(t.keyCode===27){Ze(t);return}if(t.keyCode===9&&n===!1){ge();return}if(t.target===void 0||t.target.id!==l.targetUid.value||l.editable.value!==!0)return;if(t.keyCode===40&&l.innerLoading.value!==!0&&u.value===!1){de(t),pe();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&h.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Ke(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&c("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof h.value!="string"||h.value.length===0)&&(de(t),a.value=-1,Pe(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&fe.value!==void 0&&(de(t),a.value=Math.max(-1,Math.min(Q.value,a.value+(t.keyCode===33?-1:1)*fe.value.view)),Pe(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(de(t),Pe(t.keyCode===38?-1:1,e.multiple));const f=Q.value;if((F===void 0||I<Date.now())&&(F=""),f>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||F.length!==0)){u.value!==!0&&pe(t);const z=t.key.toLocaleLowerCase(),q=F.length===1&&F[0]===z;I=Date.now()+1500,q===!1&&(de(t),F+=z);const R=new RegExp("^"+F.split("").map(Je=>Ql.indexOf(Je)!==-1?"\\"+Je:Je).join(".*"),"i");let $=a.value;if(q===!0||$<0||R.test(K.value(e.options[$]))!==!0)do $=At($+1,-1,f-1);while($!==a.value&&(me.value(e.options[$])===!0||R.test(K.value(e.options[$]))!==!0));a.value!==$&&ae(()=>{Se($),ve($),$>=0&&e.useInput===!0&&e.fillInput===!0&&Le(K.value(e.options[$]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||F!=="")&&(t.keyCode!==9||n===!1))){if(t.keyCode!==9&&de(t),a.value!==-1&&a.value<f){re(e.options[a.value]);return}if(s===!0){const z=(q,R)=>{if(R){if(Tt(R)!==!0)return}else R=e.newValueMode;if(Te("",e.multiple!==!0,!0),q==null)return;(R==="toggle"?re:ct)(q,R==="add-unique"),e.multiple!==!0&&(G.value!==null&&G.value.focus(),ce())};if(e.onNewValue!==void 0?c("newValue",h.value,z):z(h.value),e.multiple!==!0)return}u.value===!0?ge():l.innerLoading.value!==!0&&pe()}}function ht(){return T===!0?De.value:le.value!==null&&le.value.contentEl!==null?le.value.contentEl:void 0}function Lt(){return ht()}function Ht(){return e.hideSelected===!0?[]:o["selected-item"]!==void 0?se.value.map(t=>o["selected-item"](t)).slice():o.selected!==void 0?[].concat(o.selected()):e.useChips===!0?se.value.map((t,s)=>b(Fl,{key:"option-"+s,removable:l.editable.value===!0&&me.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:J.value,onRemove(){t.removeAtIndex(s)}},()=>b("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:K.value(t.opt)}))):[b("span",{[Ee.value===!0?"innerHTML":"textContent"]:j.value})]}function gt(){if(B.value===!0)return o["no-option"]!==void 0?o["no-option"]({inputValue:h.value}):void 0;const t=o.option!==void 0?o.option:n=>b(Et,{key:n.index,...n.itemProps},()=>b(_l,()=>b(Tl,()=>b("span",{[n.html===!0?"innerHTML":"textContent"]:n.label}))));let s=Qe("div",Re.value.map(t));return o["before-options"]!==void 0&&(s=o["before-options"]().concat(s)),yl(o["after-options"],s)}function Ut(t,s){const n=s===!0?{...Oe.value,...l.splitAttrs.attributes.value}:void 0,f={ref:s===!0?G:void 0,key:"i_t",class:w.value,style:e.inputStyle,value:h.value!==void 0?h.value:"",type:"search",...n,id:s===!0?l.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Rt.value};return t!==!0&&T===!0&&(Array.isArray(f.class)===!0?f.class=[...f.class,"no-pointer-events"]:f.class+=" no-pointer-events"),b("input",f)}function pt(t){V!==null&&(clearTimeout(V),V=null),k!==null&&(clearTimeout(k),k=null),!(t&&t.target&&t.target.qComposing===!0)&&(Le(t.target.value||""),U=!0,N=h.value,l.focused.value!==!0&&(T!==!0||x.value===!0)&&l.focus(),e.onFilter!==void 0&&(V=setTimeout(()=>{V=null,he(h.value)},e.inputDebounce)))}function Le(t,s){h.value!==t&&(h.value=t,s===!0||e.inputDebounce===0||e.inputDebounce==="0"?c("inputValue",t):k=setTimeout(()=>{k=null,c("inputValue",t)},e.inputDebounce))}function Te(t,s,n){U=n!==!0,e.useInput===!0&&(Le(t,!0),(s===!0||n!==!0)&&(N=t),s!==!0&&he(t))}function he(t,s,n){if(e.onFilter===void 0||s!==!0&&l.focused.value!==!0)return;l.innerLoading.value===!0?c("filterAbort"):(l.innerLoading.value=!0,d.value=!0),t!==""&&e.multiple!==!0&&r.value.length!==0&&U!==!0&&t===K.value(r.value[0])&&(t="");const f=setTimeout(()=>{u.value===!0&&(u.value=!1)},10);v!==null&&clearTimeout(v),v=f,c("filter",t,(z,q)=>{(s===!0||l.focused.value===!0)&&v===f&&(clearTimeout(v),typeof z=="function"&&z(),d.value=!1,ae(()=>{l.innerLoading.value=!1,l.editable.value===!0&&(s===!0?u.value===!0&&ce():u.value===!0?Xe(!0):u.value=!0),typeof q=="function"&&ae(()=>{q(S)}),typeof n=="function"&&ae(()=>{n(S)})}))},()=>{l.focused.value===!0&&v===f&&(clearTimeout(v),l.innerLoading.value=!1,d.value=!1),u.value===!0&&(u.value=!1)})}function Nt(){return b($l,{ref:le,class:y.value,style:e.popupContentStyle,modelValue:u.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&B.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:_.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:je.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...ue.value,onScrollPassive:Ae,onBeforeShow:bt,onBeforeHide:Qt,onShow:jt},gt)}function Qt(t){Ct(t),ge()}function jt(){qe()}function Kt(t){be(t),G.value!==null&&G.value.focus(),x.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Yt(t){be(t),ae(()=>{x.value=!1})}function Wt(){const t=[b(Ol,{class:`col-auto ${l.fieldClass.value}`,...g.value,for:l.targetUid.value,dark:_.value,square:!0,loading:d.value,itemAligned:!1,filled:!0,stackLabel:h.value.length!==0,...l.splitAttrs.listeners.value,onFocus:Kt,onBlur:Yt},{...o,rawControl:()=>l.getControl(!0),before:void 0,after:void 0})];return u.value===!0&&t.push(b("div",{ref:De,class:y.value+" scroll",style:e.popupContentStyle,...ue.value,onClick:Ze,onScrollPassive:Ae},gt())),b(it,{ref:ie,modelValue:i.value,position:e.useInput===!0?"top":void 0,transitionShow:te,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:bt,onBeforeHide:Xt,onHide:Jt,onShow:Zt},()=>b("div",{class:"q-select__dialog"+(_.value===!0?" q-select__dialog--dark q-dark":"")+(x.value===!0?" q-select__dialog--focused":"")},t))}function Xt(t){Ct(t),ie.value!==null&&ie.value.__updateRefocusTarget(l.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),l.focused.value=!1}function Jt(t){ce(),l.focused.value===!1&&c("blur",t),ye()}function Zt(){const t=document.activeElement;(t===null||t.id!==l.targetUid.value)&&G.value!==null&&G.value!==t&&G.value.focus(),qe()}function ge(){i.value!==!0&&(a.value=-1,u.value===!0&&(u.value=!1),l.focused.value===!1&&(v!==null&&(clearTimeout(v),v=null),l.innerLoading.value===!0&&(c("filterAbort"),l.innerLoading.value=!1,d.value=!1)))}function pe(t){l.editable.value===!0&&(T===!0?(l.onControlFocusin(t),i.value=!0,ae(()=>{l.focus()})):l.focus(),e.onFilter!==void 0?he(h.value):(B.value!==!0||o["no-option"]!==void 0)&&(u.value=!0))}function ce(){i.value=!1,ge()}function ye(){e.useInput===!0&&Te(e.multiple!==!0&&e.fillInput===!0&&r.value.length!==0&&K.value(r.value[0])||"",!0,!0)}function Xe(t){let s=-1;if(t===!0){if(r.value.length!==0){const n=Z.value(r.value[0]);s=e.options.findIndex(f=>$e(Z.value(f),n))}X(s)}Se(s)}function el(t,s){u.value===!0&&l.innerLoading.value===!1&&(X(-1,!0),ae(()=>{u.value===!0&&l.innerLoading.value===!1&&(t>s?X():Xe(!0))}))}function yt(){i.value===!1&&le.value!==null&&le.value.updatePosition()}function bt(t){t!==void 0&&be(t),c("popupShow",t),l.hasPopupOpen=!0,l.onControlFocusin(t)}function Ct(t){t!==void 0&&be(t),c("popupHide",t),l.hasPopupOpen=!1,l.onControlFocusout(t)}function Vt(){T=D.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?o["no-option"]!==void 0||e.onFilter!==void 0||B.value===!1:!0),te=D.platform.is.ios===!0&&T===!0&&e.useInput===!0?"fade":e.transitionShow}return ml(Vt),Sl(yt),Vt(),Bt(()=>{V!==null&&clearTimeout(V),k!==null&&clearTimeout(k)}),Object.assign(S,{showPopup:pe,hidePopup:ce,removeAtIndex:Ke,add:ct,toggleOption:re,getOptionIndex:()=>a.value,setOptionIndex:Se,moveOptionSelection:Pe,filter:he,updateMenuPosition:yt,updateInputValue:Te,isOptionSelected:We,getEmittingOptionValue:rt,isOptionDisabled:(...t)=>me.value.apply(null,t)===!0,getOptionValue:(...t)=>Z.value.apply(null,t),getOptionLabel:(...t)=>K.value.apply(null,t)}),Object.assign(l,{innerValue:r,fieldClass:m(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:Ge,targetRef:G,hasValue:M,showPopup:pe,floatingLabel:m(()=>e.hideSelected!==!0&&M.value===!0||typeof h.value=="number"||h.value.length!==0||wt(e.displayValue)),getControlChild:()=>{if(l.editable.value!==!1&&(i.value===!0||B.value!==!0||o["no-option"]!==void 0))return T===!0?Wt():Nt();l.hasPopupOpen===!0&&(l.hasPopupOpen=!1)},controlEvents:{onFocusin(t){l.onControlFocusin(t)},onFocusout(t){l.onControlFocusout(t,()=>{ye(),ge()})},onClick(t){if(Ze(t),T!==!0&&u.value===!0){ge(),G.value!==null&&G.value.focus();return}pe(t)}},getControl:t=>{const s=Ht(),n=t===!0||i.value!==!0||T!==!0;if(e.useInput===!0)s.push(Ut(t,n));else if(l.editable.value===!0){const z=n===!0?Oe.value:void 0;s.push(b("input",{ref:n===!0?G:void 0,key:"d_t",class:"q-select__focus-target",id:n===!0?l.targetUid.value:void 0,value:j.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...z,onKeydown:St,onKeyup:ft,onKeypress:mt})),n===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&s.push(b("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:vt}))}if(ne.value!==void 0&&e.disable!==!0&&Fe.value.length!==0){const z=Fe.value.map(q=>b("option",{value:q,selected:!0}));s.push(b("select",{class:"hidden",name:ne.value,multiple:e.multiple},z))}const f=e.useInput===!0||n!==!0?void 0:l.splitAttrs.attributes.value;return b("div",{class:"q-field__native row items-center",...f,...l.splitAttrs.listeners.value},s)},getInnerAppend:()=>e.loading!==!0&&d.value!==!0&&e.hideDropdownIcon!==!0?[b(Ue,{class:"q-select__dropdown-icon"+(u.value===!0?" rotate-180":""),name:ze.value})]:null}),It(l)}});const Yl=Cl({name:"IndexPage",data(){return{changeAlertTimeDialog:!1,coinsStorageKey:"coins",enableNotificationsBeta:!1,days:[{label:"Sunday",value:0},{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6}]}},beforeMount(){this.goalsStore=Bl(),this.goalsStore.initialize(),this.successesStore=El(),this.successesStore.initialize(),this.settingsStore=zt(),this.settingsStore.initialize(),this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()),this.$emit("refresh-header")},computed:{...Vl(zt,["useBigButtons","goalsSortStyle"]),buttonClass(){return this.useBigButtons?"bigBtn":""},sortStyle(){return this.goalsSortStyle},buttonText(){return`Sort: ${this.sortStyle}`}},methods:{viewUnscheduledGoals(){this.$router.push("unscheduledGoals")},unscheduleGoal(e){this.$q.notify("Goal unscheduled!"),e.changeDateDialog=!1,e.date=this.getDate(),this.goalsStore.addUnscheduledGoal(e),this.goalsStore.removeGoal(e),this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()),this.goalsStore.sortUnscheduledGoals(this.settingsStore.getGoalsSortStyle())},saveGoals(){this.$q.notify("Goals saved!"),this.goalsStore.saveGoals()},completeGoal(e){if(!e.ready){e.ready=!0,this.$q.notify("Click again to mark complete!");return}if(e.goal.length<1){this.$q.notify("Enter a title first!");return}if(e.stepsEnabled){for(var o=!0,c=0;c<e.stepsSize;c++)e.steps[c].value||(o=!1);if(!o){this.$q.notify("Complete all steps first!");return}}this.$q.dialog({title:"Confirm",message:'Confirm completion of goal: "'+e.goal+'"',cancel:!0,persistent:!0}).onOk(()=>{var S=this.goalsStore.goalReward(e);this.$q.notify("Rewarded "+S+" coins for completion!"),this.settingsStore.coins=this.settingsStore.coins+S,this.settingsStore.totalCoins=this.settingsStore.totalCoins+S;var D=Object.assign({},e);if(D.alertTime=null,D.date=this.getDateWithTime(),D.dateTieBreaker=this.getTime(),D.type="goal",this.successesStore.addEntry(D),this.$q.notify('Goal complete! "'+D.goal+'"'),this.settingsStore.saveCoins(),Array.isArray(e.repeatDays)&&e.repeatDays.length>0){var u=Object.assign({},e);if(u.date=this.goalsStore.nextDate(e),u.nextDate=this.goalsStore.nextDate(u),u.stepsEnabled)for(var i=0;i<u.stepsSize;i++)u.steps[i].value=!1;this.goalsStore.addGoal(u,this.settingsStore.getGoalsSortStyle()),this.$q.notify("Repeat goal "+u.goal+" set for "+u.date)}this.goalsStore.removeGoal(e),this.$emit("refresh-header")})},toggleSteps(e){e.steps?(e.stepsEnabled=!e.stepsEnabled,e.stepsEnabled&&e.stepsSize==0&&this.addSteps(e)):(e.stepsEnabled=!0,e.steps=[],e.stepsSize=0,this.addSteps(e)),this.saveGoals()},toggleGoalsSortStyle(){this.settingsStore.toggleGoalsSortStyle(),this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle())},findMatchingInput(){return new Promise(e=>{this.$nextTick(()=>{this.$nextTick(()=>{for(const o in this.$refs.stepDescRef){const c=this.$refs.stepDescRef[o];if(c.modelValue==this.selectedStep.label){e(c);return}}e(null)})})})},handleStepInput(e){if(e.key){if(e.key=="Enter")e.preventDefault(),e.stopPropagation(),this.addSteps(this.selectedGoal,this.selectedStepIndex+1),this.findMatchingInput().then(o=>{o&&(this.selectedStep.label="",o.focus(),this.saveGoals())}),this.saveGoals();else if(e.key=="End")e.preventDefault(),e.stopPropagation(),this.$q.dialog({title:"Confirm",message:"Confirm deletion of step.",cancel:!0,persistent:!0}).onOk(()=>{this.selectedGoal.steps.splice(this.selectedStepIndex,1),this.selectedGoal.stepsSize--,this.selectedGoal.stepsSize==0&&(this.selectedGoal.stepsEnabled=!1,this.selectedStep=null),this.saveGoals()});else if(e.key=="Backspace"&&this.selectedStep.label==""){if(e.preventDefault(),e.stopPropagation(),this.selectedGoal.stepsSize==0){this.selectedGoal.stepsEnabled=!1,this.selectedStep=null;return}this.selectedStepIndex+1<this.selectedGoal.steps.length&&(this.selectedStep=this.selectedGoal.steps[this.selectedStepIndex+1]),this.selectedGoal.steps.splice(this.selectedStepIndex,1),this.selectedGoal.stepsSize--,this.selectedStep=this.selectedGoal.steps[this.selectedStepIndex],this.selectedGoal.stepsSize==0&&(this.selectedGoal.stepsEnabled=!1,this.selectedStep=null),this.saveGoals()}}},addSteps(e,o){e.stepsSize<20&&(e.stepsSize++,o?(e.steps.splice(o,0,{label:"",value:!1}),this.selectedStep=e.steps[o],this.selectedStep.label="   "):(e.steps.push({label:"",value:!1}),this.selectedStep=e.steps[e.stepsSize-1]),this.saveGoals(),console.log(JSON.stringify(e)))},removeSteps(e){e.steps.splice(e.stepsSize-1,1),e.stepsSize--,e.stepsSize==0&&(e.stepsEnabled=!1,this.selectedStep=null),this.saveGoals()},removeGoal(e){var o='Are you sure you want to delete the goal: "'+e.goal+'"?';e.goal.length<1&&(o="Are you sure you want to delete the unnamed goal?"),this.$q.dialog({title:"Confirm",message:o,cancel:!0,persistent:!0}).onOk(()=>{this.$q.notify('Goal deleted: "'+e.goal+'"'),this.goalsStore.removeGoal(e)})},getDate(){const e=Date().toString();return ot.formatDate(e,"MMM D, YYYY")},getDateWithTime(){const e=Date().toString();return ot.formatDate(e,"MMM D, YYYY, hh:mm A")},getTime(){return new Date().getTime()},displayAlertTime(e){const o=new Date;return o.setHours(parseInt(e.split(":")[0],10)),o.setMinutes(parseInt(e.split(":")[1],10)),o.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})},openDatePicker(e){e.changeDateDialog=!0},closeDatePicker(e){e.date=ot.formatDate(e.date,"MMM D, YYYY"),e.changeDateDialog=!1,this.$q.notify("Goals saved!"),this.settingsStore.getGoalsSortStyle()=="Date"&&this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle())},closeAlertTimeDialog(e){e.changeAlertTimeDialog=!1,this.saveGoals()}}}),Wl={class:"q-gutter-md row justify-center"},Xl={class:"goal-data"},Jl={class:"text-h6"},Zl={class:"difficulty-select"},eo={key:0},to=E("br",null,null,-1),lo={class:"steps_checkboxes full-width"},oo={class:"stepTable full-width"},ao={scope:"row",class:"firstColumn"},io=E("br",null,null,-1),no={key:1},uo={"q-pa-lg":"",class:"text-black"},so={key:0},ro=E("br",null,null,-1),co={class:"row items-center justify-end"},fo={key:2,class:"alert-data"},vo={key:0,"q-pa-lg":"",class:"text-black"},mo=E("br",null,null,-1),So={class:"row items-center justify-center"},ho={key:0},go={key:1},po={key:2,class:"alert-data"},yo={key:3};function bo(e,o,c,S,D,u){return L(),kt(Ml,{"items-center":"",class:"goal-page"},{default:P(()=>[E("div",Wl,[C(ql,{"no-wrap":""},{default:P(()=>[C(H,{class:ee([e.buttonClass,"top-button"]),onClick:o[0]||(o[0]=i=>this.goalsStore.addGoal(null,this.settingsStore.getGoalsSortStyle())),style:{"margin-left":"0.5rem"}},{default:P(()=>[Ce("New Goal")]),_:1},8,["class"]),C(H,{class:ee([e.buttonClass,"top-button"]),onClick:o[1]||(o[1]=i=>this.toggleGoalsSortStyle()),style:{"margin-left":"1rem","margin-right":"0.5rem"}},{default:P(()=>[Ce(Ve(e.buttonText),1)]),_:1},8,["class"]),C(H,{class:ee([e.buttonClass,"top-button"]),onClick:o[2]||(o[2]=i=>this.viewUnscheduledGoals()),style:{"margin-left":"0.5rem","margin-right":"0.5rem"}},{default:P(()=>[Ce("Unscheduled")]),_:1},8,["class"])]),_:1})]),C(zl,null,{default:P(()=>[(L(!0),Y(xt,null,Dt(this.goalsStore.goals,i=>et((L(),kt(Et,{key:i},{default:P(()=>[C(wl,{class:"goal-card text-white full-width"},{default:P(()=>[C(kl,null,{default:P(()=>[E("div",Xl,[E("div",Jl,[C(tt,{multiline:"",autogrow:"",wrap:"on","min-rows":1,"max-rows":10,standout:"bg-primary text-black",class:"full-width text-h6","input-class":"text-left",label:"Goal Title",modelValue:i.goal,"onUpdate:modelValue":[a=>i.goal=a,o[3]||(o[3]=a=>this.goalsStore.saveGoals())],onFocus:o[4]||(o[4]=a=>this.$q.notify("Goal will be saved once you enter a title"))},null,8,["modelValue","onUpdate:modelValue"])]),E("div",Zl,[C(He,{"keep-color":"",modelValue:i.difficulty,"onUpdate:modelValue":[a=>i.difficulty=a,o[5]||(o[5]=a=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Easy",label:"Easy",color:"green"},null,8,["modelValue","onUpdate:modelValue"]),C(He,{"keep-color":"",modelValue:i.difficulty,"onUpdate:modelValue":[a=>i.difficulty=a,o[6]||(o[6]=a=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Moderate",label:"Moderate",color:"orange"},null,8,["modelValue","onUpdate:modelValue"]),C(He,{"keep-color":"",modelValue:i.difficulty,"onUpdate:modelValue":[a=>i.difficulty=a,o[7]||(o[7]=a=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Hard",label:"Hard",color:"red"},null,8,["modelValue","onUpdate:modelValue"]),C(He,{"keep-color":"",modelValue:i.difficulty,"onUpdate:modelValue":[a=>i.difficulty=a,o[8]||(o[8]=a=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Epic",label:"Epic",color:"black"},null,8,["modelValue","onUpdate:modelValue"])]),i.stepsEnabled?(L(),Y("div",eo,[E("p",null,[Ce(" Base Reward: "+Ve(this.goalsStore.baseReward(i))+" coins.",1),to]),E("div",lo,[E("table",oo,[E("thead",null,[(L(!0),Y(xt,null,Dt(i.steps,(a,h)=>(L(),Y("tr",{key:h},[E("th",ao,[C(Dl,{modelValue:a.value,"onUpdate:modelValue":[x=>a.value=x,o[9]||(o[9]=x=>this.saveGoals())]},null,8,["modelValue","onUpdate:modelValue"])]),E("th",null,[C(tt,{ref_for:!0,ref:"stepDescRef",multiline:"",autogrow:"",wrap:"on","min-rows":1,"max-rows":10,standout:"bg-primary text-black",class:"full-width","input-class":"text-left",label:"Step Description",modelValue:a.label,"onUpdate:modelValue":[x=>a.label=x,o[10]||(o[10]=x=>this.goalsStore.saveGoals())],onKeydown:e.handleStepInput,onFocus:x=>{this.selectedGoal=i,this.selectedStep=a,this.selectedStepIndex=h}},null,8,["modelValue","onUpdate:modelValue","onKeydown","onFocus"])])]))),128))])]),C(H,{flat:"",dense:"",glossy:"",icon:"add",color:"green",onClick:a=>e.addSteps(i)},null,8,["onClick"]),C(H,{flat:"",dense:"",glossy:"",icon:"remove",color:"red",onClick:a=>e.removeSteps(i)},null,8,["onClick"])]),Ce(" Total Reward: "+Ve(this.goalsStore.goalReward(i))+" coins.",1),io])):(L(),Y("div",no,[E("p",uo," Reward for completion: "+Ve(this.goalsStore.goalReward(i))+" coins. ",1)])),E("div",{class:ee(["text-goal",{overdue:this.goalsStore.goalExpired(i)}])},[C(Kl,{modelValue:i.repeatDays,"onUpdate:modelValue":[a=>i.repeatDays=a,o[11]||(o[11]=a=>this.saveGoals())],multiple:"","multiple-sort":"",options:e.days,label:"Repeats on these days","display-value":this.goalsStore.displayRepeatDays(i.repeatDays)},null,8,["modelValue","onUpdate:modelValue","options","display-value"]),i.repeatDays&&i.repeatDays.length>0?(L(),Y("div",so,[ro,E("p",null," Will occur again on "+Ve(this.goalsStore.nextDate(i)),1)])):lt("",!0),C(tt,{"no-outline":"",style:{"padding-right":"1e","min-width":"35%"},"input-class":"text-left text-bold",label:"Complete By",modelValue:i.date,"onUpdate:modelValue":a=>i.date=a,onClick:a=>e.openDatePicker(i)},{default:P(()=>[C(it,{modelValue:i.changeDateDialog,"onUpdate:modelValue":a=>i.changeDateDialog=a},{default:P(()=>[C(Il,{modelValue:i.date,"onUpdate:modelValue":[a=>i.date=a,a=>e.closeDatePicker(i)]},{default:P(()=>[E("div",co,[et(C(H,{onClick:a=>e.unscheduleGoal(i),label:"Unschedule",color:"primary",flat:""},null,8,["onClick"]),[[qt]]),et(C(H,{onClick:a=>e.closeDatePicker(i),label:"Close",color:"primary",flat:""},null,8,["onClick"]),[[qt]])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","onClick"])],2),this.settingsStore.useNotificationBeta?(L(),Y("div",fo,[i.alertTime?(L(),Y("p",vo,[mo,Ce("Alert Time: "+Ve(e.displayAlertTime(i.alertTime))+" day of goal. ",1)])):lt("",!0),C(it,{modelValue:i.changeAlertTimeDialog,"onUpdate:modelValue":a=>i.changeAlertTimeDialog=a},{default:P(()=>[C(Gl,{modelValue:i.alertTime,"onUpdate:modelValue":[a=>i.alertTime=a,o[12]||(o[12]=a=>this.saveGoals())],onClose:a=>e.closeAlertTimeDialog(i)},{default:P(()=>[E("div",So,[C(H,{"float-left":"",label:"Disable",onClick:a=>this.goalsStore.disableNotification(i),color:"primary",flat:""},null,8,["onClick"]),C(H,{label:"Close",color:"primary",onClick:a=>e.closeAlertTimeDialog(i),flat:""},null,8,["onClick"])])]),_:2},1032,["modelValue","onUpdate:modelValue","onClose"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])):lt("",!0)])]),_:2},1024),C(xl,{dark:""}),C(Al,null,{default:P(()=>[i.ready?(L(),Y("div",ho,[C(H,{class:ee(e.buttonClass),flat:"",glossy:"",icon:"done_all",color:"green",onClick:a=>e.completeGoal(i)},null,8,["class","onClick"])])):(L(),Y("div",go,[C(H,{class:ee(e.buttonClass),flat:"",glossy:"",icon:"check",color:"green",onClick:a=>e.completeGoal(i)},null,8,["class","onClick"])])),C(H,{class:ee(e.buttonClass),flat:"",glossy:"",icon:"123",color:"yellow",onClick:a=>e.toggleSteps(i),style:{"margin-left":"0"}},null,8,["class","onClick"]),this.settingsStore.useNotificationBeta?(L(),Y("div",po,[C(H,{class:ee(e.buttonClass),flat:"",glossy:"",icon:"notifications",color:"red",onClick:a=>i.changeAlertTimeDialog=!0},null,8,["class","onClick"])])):(L(),Y("div",yo)),C(H,{class:ee(e.buttonClass),flat:"",glossy:"",icon:"delete",color:"black",onClick:a=>e.removeGoal(i)},null,8,["class","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[Mt]])),128))]),_:1})]),_:1})}var Bo=bl(Yl,[["render",bo]]);export{Bo as default};
