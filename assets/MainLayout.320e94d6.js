import{c as J,i as fe,e as Q,r as k,a as n,w as m,o as Te,h as Fe,b as S,g as X,l as Z,u as Ne,d as Ee,f as Ke,j as Ue,k as je,m as Ye,n as Ge,p as Je,q as ye,s as Xe,t as we,v as $e,x as Ze,y as qe,z as et,A as tt,B as re,C as j,D as at,E as ot,F as De,_ as Le,G as A,H as G,I as _,J as q,Q as nt,K as it,L as ue,M as E,N as pe,O as be,P as lt,R,S as rt,T as st,U as ut}from"./index.72e2c796.js";import{Q as ct,a as dt}from"./QToolbar.058062c4.js";import{Q as ce}from"./QResizeObserver.a57a202c.js";import{Q as ft}from"./QImg.be99a5ba.js";import{Q as vt}from"./QList.726589ab.js";import{T as se}from"./TouchPan.b1075a9c.js";import{b as Y,d as de}from"./date.a6efd5a0.js";import{Q as mt}from"./QScrollObserver.fa0e5208.js";import{u as ht}from"./store_settings.a1abbadf.js";import{u as gt}from"./store_successes.ff3b616b.js";import{Q as Se}from"./QItemSection.5c7df81b.js";import{Q as ke}from"./QItemLabel.ed57d90f.js";import{Q as yt}from"./QItem.e6aea75d.js";import"./selection.e44b2370.js";var wt=J({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:v,emit:u}){const{proxy:{$q:s}}=X(),i=fe(Z,Q);if(i===Q)return console.error("QHeader needs to be child of QLayout"),Q;const c=k(parseInt(e.heightHint,10)),w=k(!0),D=n(()=>e.reveal===!0||i.view.value.indexOf("H")!==-1||s.platform.is.ios&&i.isContainer.value===!0),p=n(()=>{if(e.modelValue!==!0)return 0;if(D.value===!0)return w.value===!0?c.value:0;const o=c.value-i.scroll.value.position;return o>0?o:0}),b=n(()=>e.modelValue!==!0||D.value===!0&&w.value!==!0),a=n(()=>e.modelValue===!0&&b.value===!0&&e.reveal===!0),O=n(()=>"q-header q-layout__section--marginal "+(D.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(b.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),z=n(()=>{const o=i.rows.value.top,C={};return o[0]==="l"&&i.left.space===!0&&(C[s.lang.rtl===!0?"right":"left"]=`${i.left.size}px`),o[2]==="r"&&i.right.space===!0&&(C[s.lang.rtl===!0?"left":"right"]=`${i.right.size}px`),C});function g(o,C){i.update("header",o,C)}function f(o,C){o.value!==C&&(o.value=C)}function x({height:o}){f(c,o),g("size",o)}function y(o){a.value===!0&&f(w,!0),u("focusin",o)}m(()=>e.modelValue,o=>{g("space",o),f(w,!0),i.animate()}),m(p,o=>{g("offset",o)}),m(()=>e.reveal,o=>{o===!1&&f(w,e.modelValue)}),m(w,o=>{i.animate(),u("reveal",o)}),m(i.scroll,o=>{e.reveal===!0&&f(w,o.direction==="up"||o.position<=e.revealOffset||o.position-o.inflectionPoint<100)});const d={};return i.instances.header=d,e.modelValue===!0&&g("size",c.value),g("space",e.modelValue),g("offset",p.value),Te(()=>{i.instances.header===d&&(i.instances.header=void 0,g("size",0),g("offset",0),g("space",!1))}),()=>{const o=Fe(v.default,[]);return e.elevated===!0&&o.push(S("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),o.push(S(ce,{debounce:0,onResize:x})),S("header",{class:O.value,style:z.value,onFocusin:y},o)}}});const Ce=150;var pt=J({name:"QDrawer",inheritAttrs:!1,props:{...Ne,...Ee,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Ke,"onLayout","miniState"],setup(e,{slots:v,emit:u,attrs:s}){const i=X(),{proxy:{$q:c}}=i,w=Ue(e,c),{preventBodyScroll:D}=Ze(),{registerTimeout:p,removeTimeout:b}=je(),a=fe(Z,Q);if(a===Q)return console.error("QDrawer needs to be child of QLayout"),Q;let O,z=null,g;const f=k(e.behavior==="mobile"||e.behavior!=="desktop"&&a.totalWidth.value<=e.breakpoint),x=n(()=>e.mini===!0&&f.value!==!0),y=n(()=>x.value===!0?e.miniWidth:e.width),d=k(e.showIfAbove===!0&&f.value===!1?!0:e.modelValue===!0),o=n(()=>e.persistent!==!0&&(f.value===!0||_e.value===!0));function C(t,l){if(V(),t!==!1&&a.animate(),L(0),f.value===!0){const T=a.instances[K.value];T!==void 0&&T.belowBreakpoint===!0&&T.hide(!1),H(1),a.isContainer.value!==!0&&D(!0)}else H(0),t!==!1&&ne(!1);p(()=>{t!==!1&&ne(!0),l!==!0&&u("show",t)},Ce)}function r(t,l){F(),t!==!1&&a.animate(),H(0),L(I.value*y.value),ie(),l!==!0?p(()=>{u("hide",t)},Ce):b()}const{show:h,hide:$}=Ye({showing:d,hideOnRouteChange:o,handleShow:C,handleHide:r}),{addToHistory:V,removeFromHistory:F}=Ge(d,$,o),P={belowBreakpoint:f,hide:$},B=n(()=>e.side==="right"),I=n(()=>(c.lang.rtl===!0?-1:1)*(B.value===!0?1:-1)),ve=k(0),W=k(!1),ee=k(!1),me=k(y.value*I.value),K=n(()=>B.value===!0?"left":"right"),te=n(()=>d.value===!0&&f.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:y.value:0),ae=n(()=>e.overlay===!0||e.miniToOverlay===!0||a.view.value.indexOf(B.value?"R":"L")!==-1||c.platform.is.ios===!0&&a.isContainer.value===!0),N=n(()=>e.overlay===!1&&d.value===!0&&f.value===!1),_e=n(()=>e.overlay===!0&&d.value===!0&&f.value===!1),ze=n(()=>"fullscreen q-drawer__backdrop"+(d.value===!1&&W.value===!1?" hidden":"")),xe=n(()=>({backgroundColor:`rgba(0,0,0,${ve.value*.4})`})),he=n(()=>B.value===!0?a.rows.value.top[2]==="r":a.rows.value.top[0]==="l"),Be=n(()=>B.value===!0?a.rows.value.bottom[2]==="r":a.rows.value.bottom[0]==="l"),Qe=n(()=>{const t={};return a.header.space===!0&&he.value===!1&&(ae.value===!0?t.top=`${a.header.offset}px`:a.header.space===!0&&(t.top=`${a.header.size}px`)),a.footer.space===!0&&Be.value===!1&&(ae.value===!0?t.bottom=`${a.footer.offset}px`:a.footer.space===!0&&(t.bottom=`${a.footer.size}px`)),t}),He=n(()=>{const t={width:`${y.value}px`,transform:`translateX(${me.value}px)`};return f.value===!0?t:Object.assign(t,Qe.value)}),Me=n(()=>"q-drawer__content fit "+(a.isContainer.value!==!0?"scroll":"overflow-auto")),Oe=n(()=>`q-drawer q-drawer--${e.side}`+(ee.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(w.value===!0?" q-drawer--dark q-dark":"")+(W.value===!0?" no-transition":d.value===!0?"":" q-layout--prevent-focus")+(f.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${x.value===!0?"mini":"standard"}`+(ae.value===!0||N.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(he.value===!0?" q-drawer--top-padding":""))),Ve=n(()=>{const t=c.lang.rtl===!0?e.side:K.value;return[[se,Re,void 0,{[t]:!0,mouse:!0}]]}),Pe=n(()=>{const t=c.lang.rtl===!0?K.value:e.side;return[[se,ge,void 0,{[t]:!0,mouse:!0}]]}),Ie=n(()=>{const t=c.lang.rtl===!0?K.value:e.side;return[[se,ge,void 0,{[t]:!0,mouse:!0,mouseAllDir:!0}]]});function oe(){Ae(f,e.behavior==="mobile"||e.behavior!=="desktop"&&a.totalWidth.value<=e.breakpoint)}m(f,t=>{t===!0?(O=d.value,d.value===!0&&$(!1)):e.overlay===!1&&e.behavior!=="mobile"&&O!==!1&&(d.value===!0?(L(0),H(0),ie()):h(!1))}),m(()=>e.side,(t,l)=>{a.instances[l]===P&&(a.instances[l]=void 0,a[l].space=!1,a[l].offset=0),a.instances[t]=P,a[t].size=y.value,a[t].space=N.value,a[t].offset=te.value}),m(a.totalWidth,()=>{(a.isContainer.value===!0||document.qScrollPrevented!==!0)&&oe()}),m(()=>e.behavior+e.breakpoint,oe),m(a.isContainer,t=>{d.value===!0&&D(t!==!0),t===!0&&oe()}),m(a.scrollbarWidth,()=>{L(d.value===!0?0:void 0)}),m(te,t=>{M("offset",t)}),m(N,t=>{u("onLayout",t),M("space",t)}),m(B,()=>{L()}),m(y,t=>{L(),le(e.miniToOverlay,t)}),m(()=>e.miniToOverlay,t=>{le(t,y.value)}),m(()=>c.lang.rtl,()=>{L()}),m(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(We(),a.animate())}),m(x,t=>{u("miniState",t)});function L(t){t===void 0?ye(()=>{t=d.value===!0?0:y.value,L(I.value*t)}):(a.isContainer.value===!0&&B.value===!0&&(f.value===!0||Math.abs(t)===y.value)&&(t+=I.value*a.scrollbarWidth.value),me.value=t)}function H(t){ve.value=t}function ne(t){const l=t===!0?"remove":a.isContainer.value!==!0?"add":"";l!==""&&document.body.classList[l]("q-body--drawer-toggle")}function We(){z!==null&&clearTimeout(z),i.proxy&&i.proxy.$el&&i.proxy.$el.classList.add("q-drawer--mini-animate"),ee.value=!0,z=setTimeout(()=>{z=null,ee.value=!1,i&&i.proxy&&i.proxy.$el&&i.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function Re(t){if(d.value!==!1)return;const l=y.value,T=Y(t.distance.x,0,l);if(t.isFinal===!0){T>=Math.min(75,l)===!0?h():(a.animate(),H(0),L(I.value*l)),W.value=!1;return}L((c.lang.rtl===!0?B.value!==!0:B.value)?Math.max(l-T,0):Math.min(0,T-l)),H(Y(T/l,0,1)),t.isFirst===!0&&(W.value=!0)}function ge(t){if(d.value!==!0)return;const l=y.value,T=t.direction===e.side,U=(c.lang.rtl===!0?T!==!0:T)?Y(t.distance.x,0,l):0;if(t.isFinal===!0){Math.abs(U)<Math.min(75,l)===!0?(a.animate(),H(1),L(0)):$(),W.value=!1;return}L(I.value*U),H(Y(1-U/l,0,1)),t.isFirst===!0&&(W.value=!0)}function ie(){D(!1),ne(!0)}function M(t,l){a.update(e.side,t,l)}function Ae(t,l){t.value!==l&&(t.value=l)}function le(t,l){M("size",t===!0?e.miniWidth:l)}return a.instances[e.side]=P,le(e.miniToOverlay,y.value),M("space",N.value),M("offset",te.value),e.showIfAbove===!0&&e.modelValue!==!0&&d.value===!0&&e["onUpdate:modelValue"]!==void 0&&u("update:modelValue",!0),Je(()=>{u("onLayout",N.value),u("miniState",x.value),O=e.showIfAbove===!0;const t=()=>{(d.value===!0?C:r)(!1,!0)};if(a.totalWidth.value!==0){ye(t);return}g=m(a.totalWidth,()=>{g(),g=void 0,d.value===!1&&e.showIfAbove===!0&&f.value===!1?h(!1):t()})}),Te(()=>{g!==void 0&&g(),z!==null&&(clearTimeout(z),z=null),d.value===!0&&ie(),a.instances[e.side]===P&&(a.instances[e.side]=void 0,M("size",0),M("offset",0),M("space",!1))}),()=>{const t=[];f.value===!0&&(e.noSwipeOpen===!1&&t.push(Xe(S("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),Ve.value)),t.push(we("div",{ref:"backdrop",class:ze.value,style:xe.value,"aria-hidden":"true",onClick:$},void 0,"backdrop",e.noSwipeBackdrop!==!0&&d.value===!0,()=>Ie.value)));const l=x.value===!0&&v.mini!==void 0,T=[S("div",{...s,key:""+l,class:[Me.value,s.class]},l===!0?v.mini():$e(v.default))];return e.elevated===!0&&d.value===!0&&T.push(S("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(we("aside",{ref:"content",class:Oe.value,style:He.value},T,"contentclose",e.noSwipeClose!==!0&&f.value===!0,()=>Pe.value)),S("div",{class:"q-drawer-container"},t)}}}),bt=J({name:"QPageContainer",setup(e,{slots:v}){const{proxy:{$q:u}}=X(),s=fe(Z,Q);if(s===Q)return console.error("QPageContainer needs to be child of QLayout"),Q;qe(et,!0);const i=n(()=>{const c={};return s.header.space===!0&&(c.paddingTop=`${s.header.size}px`),s.right.space===!0&&(c[`padding${u.lang.rtl===!0?"Left":"Right"}`]=`${s.right.size}px`),s.footer.space===!0&&(c.paddingBottom=`${s.footer.size}px`),s.left.space===!0&&(c[`padding${u.lang.rtl===!0?"Right":"Left"}`]=`${s.left.size}px`),c});return()=>S("div",{class:"q-page-container",style:i.value},$e(v.default))}}),St=J({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:v,emit:u}){const{proxy:{$q:s}}=X(),i=k(null),c=k(s.screen.height),w=k(e.container===!0?0:s.screen.width),D=k({position:0,direction:"down",inflectionPoint:0}),p=k(0),b=k(tt.value===!0?0:re()),a=n(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),O=n(()=>e.container===!1?{minHeight:s.screen.height+"px"}:null),z=n(()=>b.value!==0?{[s.lang.rtl===!0?"left":"right"]:`${b.value}px`}:null),g=n(()=>b.value!==0?{[s.lang.rtl===!0?"right":"left"]:0,[s.lang.rtl===!0?"left":"right"]:`-${b.value}px`,width:`calc(100% + ${b.value}px)`}:null);function f(r){if(e.container===!0||document.qScrollPrevented!==!0){const h={position:r.position.top,direction:r.direction,directionChanged:r.directionChanged,inflectionPoint:r.inflectionPoint.top,delta:r.delta.top};D.value=h,e.onScroll!==void 0&&u("scroll",h)}}function x(r){const{height:h,width:$}=r;let V=!1;c.value!==h&&(V=!0,c.value=h,e.onScrollHeight!==void 0&&u("scrollHeight",h),d()),w.value!==$&&(V=!0,w.value=$),V===!0&&e.onResize!==void 0&&u("resize",r)}function y({height:r}){p.value!==r&&(p.value=r,d())}function d(){if(e.container===!0){const r=c.value>p.value?re():0;b.value!==r&&(b.value=r)}}let o=null;const C={instances:{},view:n(()=>e.view),isContainer:n(()=>e.container),rootRef:i,height:c,containerHeight:p,scrollbarWidth:b,totalWidth:n(()=>w.value+b.value),rows:n(()=>{const r=e.view.toLowerCase().split(" ");return{top:r[0].split(""),middle:r[1].split(""),bottom:r[2].split("")}}),header:j({size:0,offset:0,space:!1}),right:j({size:300,offset:0,space:!1}),footer:j({size:0,offset:0,space:!1}),left:j({size:300,offset:0,space:!1}),scroll:D,animate(){o!==null?clearTimeout(o):document.body.classList.add("q-body--layout-animate"),o=setTimeout(()=>{o=null,document.body.classList.remove("q-body--layout-animate")},155)},update(r,h,$){C[r][h]=$}};if(qe(Z,C),re()>0){let $=function(){r=null,h.classList.remove("hide-scrollbar")},V=function(){if(r===null){if(h.scrollHeight>s.screen.height)return;h.classList.add("hide-scrollbar")}else clearTimeout(r);r=setTimeout($,300)},F=function(P){r!==null&&P==="remove"&&(clearTimeout(r),$()),window[`${P}EventListener`]("resize",V)},r=null;const h=document.body;m(()=>e.container!==!0?"add":"remove",F),e.container!==!0&&F("add"),at(()=>{F("remove")})}return()=>{const r=ot(v.default,[S(mt,{onScroll:f}),S(ce,{onResize:x})]),h=S("div",{class:a.value,style:O.value,ref:e.container===!0?void 0:i,tabindex:-1},r);return e.container===!0?S("div",{class:"q-layout-container overflow-hidden",ref:i},[S(ce,{onResize:y}),S("div",{class:"absolute-full",style:z.value},[S("div",{class:"scroll",style:g.value},[h])])]):h}}});const kt=De({name:"EssentialLink",props:{title:{type:String,required:!0},caption:{type:String,default:""},link:{type:String,default:"#"},icon:{type:String,default:""}},computed:{isActive(){return this.route.path===this.link}}});function Ct(e,v,u,s,i,c){return A(),G(yt,{clickable:"",tag:"a",target:"_self",href:e.link},{default:_(()=>[e.icon?(A(),G(Se,{key:0,avatar:""},{default:_(()=>[q(nt,{name:e.icon},null,8,["name"])]),_:1})):it("",!0),q(Se,null,{default:_(()=>[q(ke,null,{default:_(()=>[ue(E(e.title),1)]),_:1}),q(ke,{caption:""},{default:_(()=>[ue(E(e.caption),1)]),_:1})]),_:1})]),_:1},8,["href"])}var Tt=Le(kt,[["render",Ct]]),$t="/assets/road_icon.c16190f5.jpg";const qt=[{title:"Dreams",caption:"View your dreams",icon:"star",link:"#/dreams"},{title:"Goals",caption:"View your goals",icon:"sports_score",link:"#/goals"},{title:"Habits",caption:"View your habits",icon:"home",link:"#/habits"},{title:"Successes",caption:"View your triumphs",icon:"check",link:"#/successes"},{title:"Notes",caption:"View your notes",icon:"description",link:"#/notes"},{title:"Spend Coins",caption:"View art unlocks",icon:"arrow_circle_up",link:"#/unlocks"},{title:"Settings",caption:"Adjust settings",icon:"settings",link:"#/settings"},{title:"Help",caption:"How to use Art Motives",icon:"help",link:"#/help"},{title:"About",caption:"About this application",icon:"info",link:"#/about"}];setInterval(function(){let e=new Date().getHours(),v=new Date().getMinutes(),u=new Date().getSeconds();e==0&&v==0&&u==0&&location.reload()},1e3);function Dt(){const e=Date.now(),v=de.formatDate(e,"MMM D, YYYY"),u=this.formattedDate(v);return de.formatDate(e,"dddd")+", "+u}const Lt=De({name:"MainLayout",components:{EssentialLink:Tt},data(){return{componentKey:0,resizeTimeout:null}},beforeMount(){this.settingsStore=ht(),this.settingsStore.initialize(),this.successesStore=gt(),this.successesStore.initialize()},setup(){const e=k(!1);return{essentialLinks:qt,leftDrawerOpen:e,toggleLeftDrawer(){e.value=!e.value},today:Dt}},mounted(){localStorage.setItem("lastTimestamp",Date.now());const e=6e4,v=18e5;setInterval(()=>{const u=localStorage.getItem("lastTimestamp");u&&Date.now()-u>=v&&(localStorage.setItem("lastTimestamp",Date.now()),this.refreshHeader(),window.location.reload())},e)},methods:{formattedDate(e){const v=new Date(Date.parse(e));return de.formatDate(v,this.settingsStore.useDateFormat)},refresh(e){setTimeout(()=>{e(),this.refreshHeader(),localStorage.setItem("lastTimestamp",Date.now()),window.location.reload()},500)},refreshHeader(){this.componentKey+=1},linkClicked(){localStorage.setItem("lastTimestamp",Date.now()),window.screen.width<1280&&this.toggleLeftDrawer()}}}),_t=R("div",null,"v0.11",-1),zt={class:"q-px-lg q-pt-sm q-mb-md"},xt={class:"text-subtitle1",header:""},Bt={class:"no-margin"};function Qt(e,v,u,s,i,c){const w=pe("EssentialLink"),D=pe("router-view");return A(),G(St,{view:"lHh Lpr lFf"},{default:_(()=>[(A(),be("MyComponent",{key:e.componentKey})),q(wt,{elevated:""},{default:_(()=>[q(ct,null,{default:_(()=>[q(lt,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),q(dt,null,{default:_(()=>[ue(E(e.today()),1)]),_:1}),_t]),_:1}),R("div",zt,[R("div",xt,[R("h6",Bt,[R("span",null,"Coins: "+E(this.settingsStore.getCoins()),1),R("span",null,"Coins/Day: "+E(Math.round(this.settingsStore.getTotalCoins()/this.successesStore.daysSinceFirstSuccess())),1)])])])]),_:1}),q(pt,{modelValue:e.leftDrawerOpen,"onUpdate:modelValue":v[1]||(v[1]=p=>e.leftDrawerOpen=p),"show-if-above":"",bordered:""},{default:_(()=>[q(vt,null,{default:_(()=>[q(ft,{class:"logo",src:$t}),(A(!0),be(st,null,rt(e.essentialLinks,p=>(A(),G(w,ut({key:p.title},p,{onClick:v[0]||(v[0]=b=>this.linkClicked())}),null,16))),128))]),_:1})]),_:1},8,["modelValue"]),q(bt,null,{default:_(()=>[q(D,{onRefreshHeader:e.refreshHeader},null,8,["onRefreshHeader"])]),_:1})]),_:1})}var Yt=Le(Lt,[["render",Qt]]);export{Yt as default};
