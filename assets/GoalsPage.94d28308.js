import{c as nt,az as ut,aA as Gt,aB as It,aC as Mt,p as tl,aD as ll,s as ol,aE as al,a as m,z as il,g as st,h as w,Q as Qe,aF as nl,aq as Bt,a4 as de,n as ul,r as O,w as ke,e as ae,aG as sl,aH as rl,aI as cl,aJ as dl,d as rt,ar as fl,aK as vl,aL as Vt,aM as $e,aN as ml,aO as hl,D as et,aP as Sl,ae as be,a3 as gl,aQ as pl,an as it,L as yl,_ as bl,M as wl,ai as Cl,N as L,O as Dt,P,Y as M,R as b,X as H,aj as ee,T as we,U as Ce,W as Y,S as He,Z as xt,$ as qt,y as tt,ak as kl,al as Vl,am as lt,aR as Ue,aS as Dl,ao as xl,ap as ql}from"./index.0063c7d2.js";import{Q as Al}from"./QBtnGroup.8e783e17.js";import{Q as Et,a as zl}from"./QItem.b9af6ae6.js";import{Q as Tl}from"./QItemSection.b1a76235.js";import{Q as _l}from"./QItemLabel.1420d13a.js";import{Q as $l}from"./QMenu.9e42aca5.js";import{n as At,d as ot}from"./date.8adeaf97.js";import{Q as Gl,C as zt}from"./ClosePopup.fe30f493.js";import{Q as Il}from"./QTime.89d4ddcb.js";import{Q as Ml}from"./QPage.e128a380.js";import{u as Bl,Q as El}from"./QSpinnerFacebook.a4466318.js";import{u as Ol}from"./store_goals.72bbbec2.js";import{u as Rl}from"./store_successes.d7807ae3.js";import{u as Tt}from"./store_settings.854f0a41.js";import"./selection.dec81627.js";import"./TouchPan.de3812d2.js";var Fl=nt({name:"QField",inheritAttrs:!1,props:{...ut,tag:{type:String,default:"label"}},emits:Gt,setup(){return It(Mt({requiredForAttr:!1,tagProp:!0}))}});const Ll={xs:8,sm:10,md:14,lg:20,xl:24};var Pl=nt({name:"QChip",props:{...tl,...ll,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:o,emit:c}){const{proxy:{$q:h}}=st(),D=ol(e,h),u=al(e,Ll),i=m(()=>e.selected===!0||e.icon!==void 0),a=m(()=>e.selected===!0?e.iconSelected||h.iconSet.chip.selected:e.icon),S=m(()=>e.iconRemove||h.iconSet.chip.remove),x=m(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),d=m(()=>{const v=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(v?` text-${v} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(x.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(D.value===!0?" q-chip--dark q-dark":"")}),C=m(()=>{const v=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},Q={...v,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||h.lang.label.remove};return{chip:v,remove:Q}});function V(v){v.keyCode===13&&q(v)}function q(v){e.disable||(c("update:selected",!e.selected),c("click",v))}function _(v){(v.keyCode===void 0||v.keyCode===13)&&(de(v),e.disable===!1&&(c("update:modelValue",!1),c("remove")))}function U(){const v=[];x.value===!0&&v.push(w("div",{class:"q-focus-helper"})),i.value===!0&&v.push(w(Qe,{class:"q-chip__icon q-chip__icon--left",name:a.value}));const Q=e.label!==void 0?[w("div",{class:"ellipsis"},[e.label])]:void 0;return v.push(w("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},nl(o.default,Q))),e.iconRight&&v.push(w(Qe,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&v.push(w(Qe,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:S.value,...C.value.remove,onClick:_,onKeyup:_})),v}return()=>{if(e.modelValue===!1)return;const v={class:d.value,style:u.value};return x.value===!0&&Object.assign(v,C.value.chip,{onClick:q,onKeyup:V}),il("div",v,U(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Bt,e.ripple]])}}});let Ne=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const o=document.createElement("div");Object.assign(o.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(o),e.scrollLeft=-1e3,Ne=e.scrollLeft>=0,e.remove()}const W=1e3,Hl=["start","center","end","start-force","center-force","end-force"],Ot=Array.prototype.filter,Ul=window.getComputedStyle(document.body).overflowAnchor===void 0?ul:function(e,o){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const c=e.children||[];Ot.call(c,D=>D.dataset&&D.dataset.qVsAnchor!==void 0).forEach(D=>{delete D.dataset.qVsAnchor});const h=c[o];h&&h.dataset&&(h.dataset.qVsAnchor="")}))};function Ve(e,o){return e+o}function at(e,o,c,h,D,u,i,a){const S=e===window?document.scrollingElement||document.documentElement:e,x=D===!0?"offsetWidth":"offsetHeight",d={scrollStart:0,scrollViewSize:-i-a,scrollMaxSize:0,offsetStart:-i,offsetEnd:-a};if(D===!0?(e===window?(d.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,d.scrollViewSize+=document.documentElement.clientWidth):(d.scrollStart=S.scrollLeft,d.scrollViewSize+=S.clientWidth),d.scrollMaxSize=S.scrollWidth,u===!0&&(d.scrollStart=(Ne===!0?d.scrollMaxSize-d.scrollViewSize:0)-d.scrollStart)):(e===window?(d.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,d.scrollViewSize+=document.documentElement.clientHeight):(d.scrollStart=S.scrollTop,d.scrollViewSize+=S.clientHeight),d.scrollMaxSize=S.scrollHeight),c!==null)for(let C=c.previousElementSibling;C!==null;C=C.previousElementSibling)C.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetStart+=C[x]);if(h!==null)for(let C=h.nextElementSibling;C!==null;C=C.nextElementSibling)C.classList.contains("q-virtual-scroll--skip")===!1&&(d.offsetEnd+=C[x]);if(o!==e){const C=S.getBoundingClientRect(),V=o.getBoundingClientRect();D===!0?(d.offsetStart+=V.left-C.left,d.offsetEnd-=V.width):(d.offsetStart+=V.top-C.top,d.offsetEnd-=V.height),e!==window&&(d.offsetStart+=d.scrollStart),d.offsetEnd+=d.scrollMaxSize-d.offsetStart}return d}function _t(e,o,c,h){o==="end"&&(o=(e===window?document.body:e)[c===!0?"scrollWidth":"scrollHeight"]),e===window?c===!0?(h===!0&&(o=(Ne===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-o),window.scrollTo(o,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o):c===!0?(h===!0&&(o=(Ne===!0?e.scrollWidth-e.offsetWidth:0)-o),e.scrollLeft=o):e.scrollTop=o}function Ge(e,o,c,h){if(c>=h)return 0;const D=o.length,u=Math.floor(c/W),i=Math.floor((h-1)/W)+1;let a=e.slice(u,i).reduce(Ve,0);return c%W!==0&&(a-=o.slice(u*W,c).reduce(Ve,0)),h%W!==0&&h!==D&&(a-=o.slice(h,i*W).reduce(Ve,0)),a}const Ql={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Nl={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Ql};function jl({virtualScrollLength:e,getVirtualScrollTarget:o,getVirtualScrollEl:c,virtualScrollItemSizeComputed:h}){const D=st(),{props:u,emit:i,proxy:a}=D,{$q:S}=a;let x,d,C,V=[],q;const _=O(0),U=O(0),v=O({}),Q=O(null),te=O(null),F=O(null),G=O({from:0,to:0}),Ie=m(()=>u.tableColspan!==void 0?u.tableColspan:100);h===void 0&&(h=m(()=>u.virtualScrollItemSize));const I=m(()=>h.value+";"+u.virtualScrollHorizontal),le=m(()=>I.value+";"+u.virtualScrollSliceRatioBefore+";"+u.virtualScrollSliceRatioAfter);ke(le,()=>{X()}),ke(I,ie);function ie(){fe(d,!0)}function De(l){fe(l===void 0?d:l)}function ne(l,r){const g=o();if(g==null||g.nodeType===8)return;const T=at(g,c(),Q.value,te.value,u.virtualScrollHorizontal,S.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd);C!==T.scrollViewSize&&X(T.scrollViewSize),N(g,T,Math.min(e.value-1,Math.max(0,parseInt(l,10)||0)),0,Hl.indexOf(r)!==-1?r:d!==-1&&l>d?"end":"start")}function Me(){const l=o();if(l==null||l.nodeType===8)return;const r=at(l,c(),Q.value,te.value,u.virtualScrollHorizontal,S.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd),g=e.value-1,T=r.scrollMaxSize-r.offsetStart-r.offsetEnd-U.value;if(x===r.scrollStart)return;if(r.scrollMaxSize<=0){N(l,r,0,0);return}C!==r.scrollViewSize&&X(r.scrollViewSize),xe(G.value.from);const B=Math.floor(r.scrollMaxSize-Math.max(r.scrollViewSize,r.offsetEnd)-Math.min(q[g],r.scrollViewSize/2));if(B>0&&Math.ceil(r.scrollStart)>=B){N(l,r,g,r.scrollMaxSize-r.offsetEnd-V.reduce(Ve,0));return}let k=0,y=r.scrollStart-r.offsetStart,E=y;if(y<=T&&y+r.scrollViewSize>=_.value)y-=_.value,k=G.value.from,E=y;else for(let p=0;y>=V[p]&&k<g;p++)y-=V[p],k+=W;for(;y>0&&k<g;)y-=q[k],y>-r.scrollViewSize?(k++,E=y):E=q[k]+y;N(l,r,k,E)}function N(l,r,g,T,B){const k=typeof B=="string"&&B.indexOf("-force")!==-1,y=k===!0?B.replace("-force",""):B,E=y!==void 0?y:"start";let p=Math.max(0,g-v.value[E]),j=p+v.value.total;j>e.value&&(j=e.value,p=Math.max(0,j-v.value.total)),x=r.scrollStart;const oe=p!==G.value.from||j!==G.value.to;if(oe===!1&&y===void 0){qe(g);return}const{activeElement:Ee}=document,J=F.value;oe===!0&&J!==null&&J!==Ee&&J.contains(Ee)===!0&&(J.addEventListener("focusout",Be),setTimeout(()=>{J!==null&&J.removeEventListener("focusout",Be)})),Ul(J,g-p);const Oe=y!==void 0?q.slice(p,g).reduce(Ve,0):0;if(oe===!0){const ue=j>=G.value.from&&p<=G.value.to?G.value.to:j;G.value={from:p,to:ue},_.value=Ge(V,q,0,p),U.value=Ge(V,q,j,e.value),requestAnimationFrame(()=>{G.value.to!==j&&x===r.scrollStart&&(G.value={from:G.value.from,to:j},U.value=Ge(V,q,j,e.value))})}requestAnimationFrame(()=>{if(x!==r.scrollStart)return;oe===!0&&xe(p);const ue=q.slice(p,g).reduce(Ve,0),se=ue+r.offsetStart+_.value,Re=se+q[g];let ze=se+T;if(y!==void 0){const Ke=ue-Oe,Te=r.scrollStart+Ke;ze=k!==!0&&Te<se&&Re<Te+r.scrollViewSize?Te:y==="end"?Re-r.scrollViewSize:se-(y==="start"?0:Math.round((r.scrollViewSize-q[g])/2))}x=ze,_t(l,ze,u.virtualScrollHorizontal,S.lang.rtl),qe(g)})}function xe(l){const r=F.value;if(r){const g=Ot.call(r.children,p=>p.classList&&p.classList.contains("q-virtual-scroll--skip")===!1),T=g.length,B=u.virtualScrollHorizontal===!0?p=>p.getBoundingClientRect().width:p=>p.offsetHeight;let k=l,y,E;for(let p=0;p<T;){for(y=B(g[p]),p++;p<T&&g[p].classList.contains("q-virtual-scroll--with-prev")===!0;)y+=B(g[p]),p++;E=y-q[k],E!==0&&(q[k]+=E,V[Math.floor(k/W)]+=E),k++}}}function Be(){F.value!==null&&F.value!==void 0&&F.value.focus()}function fe(l,r){const g=1*h.value;(r===!0||Array.isArray(q)===!1)&&(q=[]);const T=q.length;q.length=e.value;for(let k=e.value-1;k>=T;k--)q[k]=g;const B=Math.floor((e.value-1)/W);V=[];for(let k=0;k<=B;k++){let y=0;const E=Math.min((k+1)*W,e.value);for(let p=k*W;p<E;p++)y+=q[p];V.push(y)}d=-1,x=void 0,_.value=Ge(V,q,0,G.value.from),U.value=Ge(V,q,G.value.to,e.value),l>=0?(xe(G.value.from),ae(()=>{ne(l)})):ve()}function X(l){if(l===void 0&&typeof window!="undefined"){const y=o();y!=null&&y.nodeType!==8&&(l=at(y,c(),Q.value,te.value,u.virtualScrollHorizontal,S.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd).scrollViewSize)}C=l;const r=parseFloat(u.virtualScrollSliceRatioBefore)||0,g=parseFloat(u.virtualScrollSliceRatioAfter)||0,T=1+r+g,B=l===void 0||l<=0?1:Math.ceil(l/h.value),k=Math.max(1,B,Math.ceil((u.virtualScrollSliceSize>0?u.virtualScrollSliceSize:10)/T));v.value={total:Math.ceil(k*T),start:Math.ceil(k*r),center:Math.ceil(k*(.5+r)),end:Math.ceil(k*(1+r)),view:B}}function je(l,r){const g=u.virtualScrollHorizontal===!0?"width":"height",T={["--q-virtual-scroll-item-"+g]:h.value+"px"};return[l==="tbody"?w(l,{class:"q-virtual-scroll__padding",key:"before",ref:Q},[w("tr",[w("td",{style:{[g]:`${_.value}px`,...T},colspan:Ie.value})])]):w(l,{class:"q-virtual-scroll__padding",key:"before",ref:Q,style:{[g]:`${_.value}px`,...T}}),w(l,{class:"q-virtual-scroll__content",key:"content",ref:F,tabindex:-1},r.flat()),l==="tbody"?w(l,{class:"q-virtual-scroll__padding",key:"after",ref:te},[w("tr",[w("td",{style:{[g]:`${U.value}px`,...T},colspan:Ie.value})])]):w(l,{class:"q-virtual-scroll__padding",key:"after",ref:te,style:{[g]:`${U.value}px`,...T}})]}function qe(l){d!==l&&(u.onVirtualScroll!==void 0&&i("virtualScroll",{index:l,from:G.value.from,to:G.value.to-1,direction:l<d?"decrease":"increase",ref:a}),d=l)}X();const ve=sl(Me,S.platform.is.ios===!0?120:35);rl(()=>{X()});let Ae=!1;return cl(()=>{Ae=!0}),dl(()=>{if(Ae!==!0)return;const l=o();x!==void 0&&l!==void 0&&l!==null&&l.nodeType!==8?_t(l,x,u.virtualScrollHorizontal,S.lang.rtl):ne(d)}),rt(()=>{ve.cancel()}),Object.assign(a,{scrollTo:ne,reset:ie,refresh:De}),{virtualScrollSliceRange:G,virtualScrollSliceSizeComputed:v,setVirtualScrollSize:X,onVirtualScrollEvt:ve,localResetVirtualScroll:fe,padVirtualScroll:je,scrollTo:ne,reset:ie,refresh:De}}const $t=e=>["add","add-unique","toggle"].includes(e),Kl=".*+?^${}()|[]\\",Yl=Object.keys(ut);var Wl=nt({name:"QSelect",inheritAttrs:!1,props:{...Nl,...fl,...ut,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:$t},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...Gt,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:o,emit:c}){const{proxy:h}=st(),{$q:D}=h,u=O(!1),i=O(!1),a=O(-1),S=O(""),x=O(!1),d=O(!1);let C=null,V=null,q,_,U,v=null,Q,te,F,G;const Ie=O(null),I=O(null),le=O(null),ie=O(null),De=O(null),ne=vl(e),Me=Sl(yt),N=m(()=>Array.isArray(e.options)?e.options.length:0),xe=m(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:Be,virtualScrollSliceSizeComputed:fe,localResetVirtualScroll:X,padVirtualScroll:je,onVirtualScrollEvt:qe,scrollTo:ve,setVirtualScrollSize:Ae}=jl({virtualScrollLength:N,getVirtualScrollTarget:Pt,getVirtualScrollEl:gt,virtualScrollItemSizeComputed:xe}),l=Mt(),r=m(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,s=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const n=e.mapOptions===!0&&q!==void 0?q:[],f=s.map(z=>Lt(z,n));return e.modelValue===null&&t===!0?f.filter(z=>z!==null):f}return s}),g=m(()=>{const t={};return Yl.forEach(s=>{const n=e[s];n!==void 0&&(t[s]=n)}),t}),T=m(()=>e.optionsDark===null?l.isDark.value:e.optionsDark),B=m(()=>Vt(r.value)),k=m(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||r.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),y=m(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),E=m(()=>N.value===0),p=m(()=>r.value.map(t=>K.value(t)).join(", ")),j=m(()=>e.displayValue!==void 0?e.displayValue:p.value),oe=m(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),Ee=m(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||r.value.some(oe.value))),J=m(()=>l.focused.value===!0?e.tabindex:-1),Oe=m(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":u.value===!0?"true":"false","aria-controls":`${l.targetUid.value}_lb`};return a.value>=0&&(t["aria-activedescendant"]=`${l.targetUid.value}_${a.value}`),t}),ue=m(()=>({id:`${l.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),se=m(()=>r.value.map((t,s)=>({index:s,opt:t,html:oe.value(t),selected:!0,removeAtIndex:Ft,toggleOption:re,tabindex:J.value}))),Re=m(()=>{if(N.value===0)return[];const{from:t,to:s}=Be.value;return e.options.slice(t,s).map((n,f)=>{const z=me.value(n)===!0,A=Xe(n)===!0,R=t+f,$={clickable:!0,active:A,activeClass:Te.value,manualFocus:!0,focused:!1,disable:z,tabindex:-1,dense:e.optionsDense,dark:T.value,role:"option","aria-selected":A===!0?"true":"false",id:`${l.targetUid.value}_${R}`,onClick:()=>{re(n)}};return z!==!0&&(a.value===R&&($.focused=!0),D.platform.is.desktop===!0&&($.onMousemove=()=>{u.value===!0&&he(R)})),{index:R,opt:n,html:oe.value(n),label:K.value(n),selected:$.active,focused:$.focused,toggleOption:re,setOptionIndex:he,itemProps:$}})}),ze=m(()=>e.dropdownIcon!==void 0?e.dropdownIcon:D.iconSet.arrow.dropdown),Ke=m(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Te=m(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),Z=m(()=>We(e.optionValue,"value")),K=m(()=>We(e.optionLabel,"label")),me=m(()=>We(e.optionDisable,"disable")),Fe=m(()=>r.value.map(t=>Z.value(t))),Rt=m(()=>{const t={onInput:yt,onChange:Me,onKeydown:St,onKeyup:mt,onKeypress:ht,onFocus:ft,onClick(s){_===!0&&be(s)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=Me,t});ke(r,t=>{q=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&l.innerLoading.value!==!0&&(i.value!==!0&&u.value!==!0||B.value!==!0)&&(U!==!0&&ye(),(i.value===!0||u.value===!0)&&Se(""))},{immediate:!0}),ke(()=>e.fillInput,ye),ke(u,Je),ke(N,el);function ct(t){return e.emitValue===!0?Z.value(t):t}function Ye(t){if(t!==-1&&t<r.value.length)if(e.multiple===!0){const s=e.modelValue.slice();c("remove",{index:t,value:s.splice(t,1)[0]}),c("update:modelValue",s)}else c("update:modelValue",null)}function Ft(t){Ye(t),l.focus()}function dt(t,s){const n=ct(t);if(e.multiple!==!0){e.fillInput===!0&&_e(K.value(t),!0,!0),c("update:modelValue",n);return}if(r.value.length===0){c("add",{index:0,value:n}),c("update:modelValue",e.multiple===!0?[n]:n);return}if(s===!0&&Xe(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const f=e.modelValue.slice();c("add",{index:f.length,value:n}),f.push(n),c("update:modelValue",f)}function re(t,s){if(l.editable.value!==!0||t===void 0||me.value(t)===!0)return;const n=Z.value(t);if(e.multiple!==!0){s!==!0&&(_e(e.fillInput===!0?K.value(t):"",!0,!0),ce()),I.value!==null&&I.value.focus(),(r.value.length===0||$e(Z.value(r.value[0]),n)!==!0)&&c("update:modelValue",e.emitValue===!0?n:t);return}if((_!==!0||x.value===!0)&&l.focus(),ft(),r.value.length===0){const A=e.emitValue===!0?n:t;c("add",{index:0,value:A}),c("update:modelValue",e.multiple===!0?[A]:A);return}const f=e.modelValue.slice(),z=Fe.value.findIndex(A=>$e(A,n));if(z!==-1)c("remove",{index:z,value:f.splice(z,1)[0]});else{if(e.maxValues!==void 0&&f.length>=e.maxValues)return;const A=e.emitValue===!0?n:t;c("add",{index:f.length,value:A}),f.push(A)}c("update:modelValue",f)}function he(t){if(D.platform.is.desktop!==!0)return;const s=t!==-1&&t<N.value?t:-1;a.value!==s&&(a.value=s)}function Le(t=1,s){if(u.value===!0){let n=a.value;do n=At(n+t,-1,N.value-1);while(n!==-1&&n!==a.value&&me.value(e.options[n])===!0);a.value!==n&&(he(n),ve(n),s!==!0&&e.useInput===!0&&e.fillInput===!0&&Pe(n>=0?K.value(e.options[n]):Q,!0))}}function Lt(t,s){const n=f=>$e(Z.value(f),t);return e.options.find(n)||s.find(n)||t}function We(t,s){const n=t!==void 0?t:s;return typeof n=="function"?n:f=>f!==null&&typeof f=="object"&&n in f?f[n]:f}function Xe(t){const s=Z.value(t);return Fe.value.find(n=>$e(n,s))!==void 0}function ft(t){e.useInput===!0&&I.value!==null&&(t===void 0||I.value===t.target&&t.target.value===p.value)&&I.value.select()}function vt(t){gl(t,27)===!0&&u.value===!0&&(be(t),ce(),ye()),c("keyup",t)}function mt(t){const{value:s}=t.target;if(t.keyCode!==void 0){vt(t);return}if(t.target.value="",C!==null&&(clearTimeout(C),C=null),V!==null&&(clearTimeout(V),V=null),ye(),typeof s=="string"&&s.length!==0){const n=s.toLocaleLowerCase(),f=A=>{const R=e.options.find($=>A.value($).toLocaleLowerCase()===n);return R===void 0?!1:(r.value.indexOf(R)===-1?re(R):ce(),!0)},z=A=>{f(Z)!==!0&&(f(K)===!0||A===!0||Se(s,!0,()=>z(!0)))};z()}else l.clearValue(t)}function ht(t){c("keypress",t)}function St(t){if(c("keydown",t),pl(t)===!0)return;const s=S.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),n=t.shiftKey!==!0&&e.multiple!==!0&&(a.value!==-1||s===!0);if(t.keyCode===27){et(t);return}if(t.keyCode===9&&n===!1){ge();return}if(t.target===void 0||t.target.id!==l.targetUid.value||l.editable.value!==!0)return;if(t.keyCode===40&&l.innerLoading.value!==!0&&u.value===!1){de(t),pe();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&S.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Ye(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&c("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof S.value!="string"||S.value.length===0)&&(de(t),a.value=-1,Le(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&fe.value!==void 0&&(de(t),a.value=Math.max(-1,Math.min(N.value,a.value+(t.keyCode===33?-1:1)*fe.value.view)),Le(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(de(t),Le(t.keyCode===38?-1:1,e.multiple));const f=N.value;if((F===void 0||G<Date.now())&&(F=""),f>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||F.length!==0)){u.value!==!0&&pe(t);const z=t.key.toLocaleLowerCase(),A=F.length===1&&F[0]===z;G=Date.now()+1500,A===!1&&(de(t),F+=z);const R=new RegExp("^"+F.split("").map(Ze=>Kl.indexOf(Ze)!==-1?"\\"+Ze:Ze).join(".*"),"i");let $=a.value;if(A===!0||$<0||R.test(K.value(e.options[$]))!==!0)do $=At($+1,-1,f-1);while($!==a.value&&(me.value(e.options[$])===!0||R.test(K.value(e.options[$]))!==!0));a.value!==$&&ae(()=>{he($),ve($),$>=0&&e.useInput===!0&&e.fillInput===!0&&Pe(K.value(e.options[$]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||F!=="")&&(t.keyCode!==9||n===!1))){if(t.keyCode!==9&&de(t),a.value!==-1&&a.value<f){re(e.options[a.value]);return}if(s===!0){const z=(A,R)=>{if(R){if($t(R)!==!0)return}else R=e.newValueMode;if(_e("",e.multiple!==!0,!0),A==null)return;(R==="toggle"?re:dt)(A,R==="add-unique"),e.multiple!==!0&&(I.value!==null&&I.value.focus(),ce())};if(e.onNewValue!==void 0?c("newValue",S.value,z):z(S.value),e.multiple!==!0)return}u.value===!0?ge():l.innerLoading.value!==!0&&pe()}}function gt(){return _===!0?De.value:le.value!==null&&le.value.contentEl!==null?le.value.contentEl:void 0}function Pt(){return gt()}function Ht(){return e.hideSelected===!0?[]:o["selected-item"]!==void 0?se.value.map(t=>o["selected-item"](t)).slice():o.selected!==void 0?[].concat(o.selected()):e.useChips===!0?se.value.map((t,s)=>w(Pl,{key:"option-"+s,removable:l.editable.value===!0&&me.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:J.value,onRemove(){t.removeAtIndex(s)}},()=>w("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:K.value(t.opt)}))):[w("span",{[Ee.value===!0?"innerHTML":"textContent"]:j.value})]}function pt(){if(E.value===!0)return o["no-option"]!==void 0?o["no-option"]({inputValue:S.value}):void 0;const t=o.option!==void 0?o.option:n=>w(Et,{key:n.index,...n.itemProps},()=>w(Tl,()=>w(_l,()=>w("span",{[n.html===!0?"innerHTML":"textContent"]:n.label}))));let s=je("div",Re.value.map(t));return o["before-options"]!==void 0&&(s=o["before-options"]().concat(s)),yl(o["after-options"],s)}function Ut(t,s){const n=s===!0?{...Oe.value,...l.splitAttrs.attributes.value}:void 0,f={ref:s===!0?I:void 0,key:"i_t",class:k.value,style:e.inputStyle,value:S.value!==void 0?S.value:"",type:"search",...n,id:s===!0?l.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Rt.value};return t!==!0&&_===!0&&(Array.isArray(f.class)===!0?f.class=[...f.class,"no-pointer-events"]:f.class+=" no-pointer-events"),w("input",f)}function yt(t){C!==null&&(clearTimeout(C),C=null),V!==null&&(clearTimeout(V),V=null),!(t&&t.target&&t.target.qComposing===!0)&&(Pe(t.target.value||""),U=!0,Q=S.value,l.focused.value!==!0&&(_!==!0||x.value===!0)&&l.focus(),e.onFilter!==void 0&&(C=setTimeout(()=>{C=null,Se(S.value)},e.inputDebounce)))}function Pe(t,s){S.value!==t&&(S.value=t,s===!0||e.inputDebounce===0||e.inputDebounce==="0"?c("inputValue",t):V=setTimeout(()=>{V=null,c("inputValue",t)},e.inputDebounce))}function _e(t,s,n){U=n!==!0,e.useInput===!0&&(Pe(t,!0),(s===!0||n!==!0)&&(Q=t),s!==!0&&Se(t))}function Se(t,s,n){if(e.onFilter===void 0||s!==!0&&l.focused.value!==!0)return;l.innerLoading.value===!0?c("filterAbort"):(l.innerLoading.value=!0,d.value=!0),t!==""&&e.multiple!==!0&&r.value.length!==0&&U!==!0&&t===K.value(r.value[0])&&(t="");const f=setTimeout(()=>{u.value===!0&&(u.value=!1)},10);v!==null&&clearTimeout(v),v=f,c("filter",t,(z,A)=>{(s===!0||l.focused.value===!0)&&v===f&&(clearTimeout(v),typeof z=="function"&&z(),d.value=!1,ae(()=>{l.innerLoading.value=!1,l.editable.value===!0&&(s===!0?u.value===!0&&ce():u.value===!0?Je(!0):u.value=!0),typeof A=="function"&&ae(()=>{A(h)}),typeof n=="function"&&ae(()=>{n(h)})}))},()=>{l.focused.value===!0&&v===f&&(clearTimeout(v),l.innerLoading.value=!1,d.value=!1),u.value===!0&&(u.value=!1)})}function Qt(){return w($l,{ref:le,class:y.value,style:e.popupContentStyle,modelValue:u.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&E.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:T.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:Ke.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...ue.value,onScrollPassive:qe,onBeforeShow:wt,onBeforeHide:Nt,onShow:jt},pt)}function Nt(t){Ct(t),ge()}function jt(){Ae()}function Kt(t){be(t),I.value!==null&&I.value.focus(),x.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Yt(t){be(t),ae(()=>{x.value=!1})}function Wt(){const t=[w(Fl,{class:`col-auto ${l.fieldClass.value}`,...g.value,for:l.targetUid.value,dark:T.value,square:!0,loading:d.value,itemAligned:!1,filled:!0,stackLabel:S.value.length!==0,...l.splitAttrs.listeners.value,onFocus:Kt,onBlur:Yt},{...o,rawControl:()=>l.getControl(!0),before:void 0,after:void 0})];return u.value===!0&&t.push(w("div",{ref:De,class:y.value+" scroll",style:e.popupContentStyle,...ue.value,onClick:et,onScrollPassive:qe},pt())),w(it,{ref:ie,modelValue:i.value,position:e.useInput===!0?"top":void 0,transitionShow:te,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:wt,onBeforeHide:Xt,onHide:Jt,onShow:Zt},()=>w("div",{class:"q-select__dialog"+(T.value===!0?" q-select__dialog--dark q-dark":"")+(x.value===!0?" q-select__dialog--focused":"")},t))}function Xt(t){Ct(t),ie.value!==null&&ie.value.__updateRefocusTarget(l.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),l.focused.value=!1}function Jt(t){ce(),l.focused.value===!1&&c("blur",t),ye()}function Zt(){const t=document.activeElement;(t===null||t.id!==l.targetUid.value)&&I.value!==null&&I.value!==t&&I.value.focus(),Ae()}function ge(){i.value!==!0&&(a.value=-1,u.value===!0&&(u.value=!1),l.focused.value===!1&&(v!==null&&(clearTimeout(v),v=null),l.innerLoading.value===!0&&(c("filterAbort"),l.innerLoading.value=!1,d.value=!1)))}function pe(t){l.editable.value===!0&&(_===!0?(l.onControlFocusin(t),i.value=!0,ae(()=>{l.focus()})):l.focus(),e.onFilter!==void 0?Se(S.value):(E.value!==!0||o["no-option"]!==void 0)&&(u.value=!0))}function ce(){i.value=!1,ge()}function ye(){e.useInput===!0&&_e(e.multiple!==!0&&e.fillInput===!0&&r.value.length!==0&&K.value(r.value[0])||"",!0,!0)}function Je(t){let s=-1;if(t===!0){if(r.value.length!==0){const n=Z.value(r.value[0]);s=e.options.findIndex(f=>$e(Z.value(f),n))}X(s)}he(s)}function el(t,s){u.value===!0&&l.innerLoading.value===!1&&(X(-1,!0),ae(()=>{u.value===!0&&l.innerLoading.value===!1&&(t>s?X():Je(!0))}))}function bt(){i.value===!1&&le.value!==null&&le.value.updatePosition()}function wt(t){t!==void 0&&be(t),c("popupShow",t),l.hasPopupOpen=!0,l.onControlFocusin(t)}function Ct(t){t!==void 0&&be(t),c("popupHide",t),l.hasPopupOpen=!1,l.onControlFocusout(t)}function kt(){_=D.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?o["no-option"]!==void 0||e.onFilter!==void 0||E.value===!1:!0),te=D.platform.is.ios===!0&&_===!0&&e.useInput===!0?"fade":e.transitionShow}return ml(kt),hl(bt),kt(),rt(()=>{C!==null&&clearTimeout(C),V!==null&&clearTimeout(V)}),Object.assign(h,{showPopup:pe,hidePopup:ce,removeAtIndex:Ye,add:dt,toggleOption:re,getOptionIndex:()=>a.value,setOptionIndex:he,moveOptionSelection:Le,filter:Se,updateMenuPosition:bt,updateInputValue:_e,isOptionSelected:Xe,getEmittingOptionValue:ct,isOptionDisabled:(...t)=>me.value.apply(null,t)===!0,getOptionValue:(...t)=>Z.value.apply(null,t),getOptionLabel:(...t)=>K.value.apply(null,t)}),Object.assign(l,{innerValue:r,fieldClass:m(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:Ie,targetRef:I,hasValue:B,showPopup:pe,floatingLabel:m(()=>e.hideSelected!==!0&&B.value===!0||typeof S.value=="number"||S.value.length!==0||Vt(e.displayValue)),getControlChild:()=>{if(l.editable.value!==!1&&(i.value===!0||E.value!==!0||o["no-option"]!==void 0))return _===!0?Wt():Qt();l.hasPopupOpen===!0&&(l.hasPopupOpen=!1)},controlEvents:{onFocusin(t){l.onControlFocusin(t)},onFocusout(t){l.onControlFocusout(t,()=>{ye(),ge()})},onClick(t){if(et(t),_!==!0&&u.value===!0){ge(),I.value!==null&&I.value.focus();return}pe(t)}},getControl:t=>{const s=Ht(),n=t===!0||i.value!==!0||_!==!0;if(e.useInput===!0)s.push(Ut(t,n));else if(l.editable.value===!0){const z=n===!0?Oe.value:void 0;s.push(w("input",{ref:n===!0?I:void 0,key:"d_t",class:"q-select__focus-target",id:n===!0?l.targetUid.value:void 0,value:j.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...z,onKeydown:St,onKeyup:vt,onKeypress:ht})),n===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&s.push(w("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:mt}))}if(ne.value!==void 0&&e.disable!==!0&&Fe.value.length!==0){const z=Fe.value.map(A=>w("option",{value:A,selected:!0}));s.push(w("select",{class:"hidden",name:ne.value,multiple:e.multiple},z))}const f=e.useInput===!0||n!==!0?void 0:l.splitAttrs.attributes.value;return w("div",{class:"q-field__native row items-center",...f,...l.splitAttrs.listeners.value},s)},getInnerAppend:()=>e.loading!==!0&&d.value!==!0&&e.hideDropdownIcon!==!0?[w(Qe,{class:"q-select__dropdown-icon"+(u.value===!0?" rotate-180":""),name:ze.value})]:null}),It(l)}});const Xl=wl({name:"IndexPage",data(){return{changeAlertTimeDialog:!1,coinsStorageKey:"coins",enableNotificationsBeta:!1,days:[{label:"Sunday",value:0},{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6}]}},beforeMount(){this.goalsStore=Ol(),this.goalsStore.initialize(),this.successesStore=Rl(),this.successesStore.initialize(),this.settingsStore=Tt(),this.settingsStore.initialize(),this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()),this.$emit("refresh-header")},created(){this.showLoading()},setup(){const e=Bl();let o;return rt(()=>{o!==void 0&&(clearTimeout(o),e.loading.hide())}),{showLoading(){e.loading.show({spinner:El,spinnerColor:"white",spinnerSize:140,backgroundColor:"black",message:"Loading your goals... Please wait!",messageColor:"white"}),o=setTimeout(()=>{e.loading.hide(),o=void 0},500)}}},computed:{...Cl(Tt,["useBigButtons","goalsSortStyle"]),buttonClass(){return this.useBigButtons?"bigBtn":""},sortStyle(){return this.goalsSortStyle},buttonText(){return`Sort: ${this.sortStyle}`}},methods:{viewUnscheduledGoals(){this.$router.push("unscheduledGoals")},unscheduleGoal(e){this.$q.notify("Goal unscheduled!"),e.changeDateDialog=!1,e.date=this.getDate(),this.goalsStore.addUnscheduledGoal(e),this.goalsStore.removeGoal(e),this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()),this.goalsStore.sortUnscheduledGoals(this.settingsStore.getGoalsSortStyle())},saveGoals(){this.$q.notify("Goals saved!"),this.goalsStore.saveGoals()},completeGoal(e){if(!e.ready){e.ready=!0,this.$q.notify("Click again to mark complete!");return}if(e.goal.length<1){this.$q.notify("Enter a title first!");return}if(e.stepsEnabled){for(var o=!0,c=0;c<e.stepsSize;c++)e.steps[c].value||(o=!1);if(!o){this.$q.notify("Complete all steps first!");return}}this.$q.dialog({title:"Confirm",message:'Confirm completion of goal: "'+e.goal+'"',cancel:!0,persistent:!0}).onOk(()=>{var h=this.goalsStore.goalReward(e);this.$q.notify("Rewarded "+h+" coins for completion!"),this.settingsStore.coins=this.settingsStore.coins+h,this.settingsStore.totalCoins=this.settingsStore.totalCoins+h;var D=Object.assign({},e);if(D.alertTime=null,D.date=this.getDateWithTime(),D.dateTieBreaker=this.getTime(),D.type="goal",this.successesStore.addEntry(D),this.$q.notify('Goal complete! "'+D.goal+'"'),this.settingsStore.saveCoins(),Array.isArray(e.repeatDays)&&e.repeatDays.length>0){var u=Object.assign({},e);if(u.date=this.goalsStore.nextDate(e),u.nextDate=this.goalsStore.nextDate(u),u.stepsEnabled)for(var i=0;i<u.stepsSize;i++)u.steps[i].value=!1;this.goalsStore.addGoal(u,this.settingsStore.getGoalsSortStyle()),this.$q.notify("Repeat goal "+u.goal+" set for "+u.date)}this.goalsStore.removeGoal(e),this.$emit("refresh-header")})},toggleSteps(e){e.steps?(e.stepsEnabled=!e.stepsEnabled,e.stepsEnabled&&e.stepsSize==0&&this.addSteps(e)):(e.stepsEnabled=!0,e.steps=[],e.stepsSize=0,this.addSteps(e)),this.saveGoals()},toggleGoalsSortStyle(){this.settingsStore.toggleGoalsSortStyle(),this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle())},findMatchingInput(){return new Promise(e=>{this.$nextTick(()=>{this.$nextTick(()=>{for(const o in this.$refs.stepDescRef){const c=this.$refs.stepDescRef[o];if(c.modelValue==this.selectedStep.label){e(c);return}}e(null)})})})},handleStepInput(e){if(e.key){if(e.key=="Enter")e.preventDefault(),e.stopPropagation(),this.addSteps(this.selectedGoal,this.selectedStepIndex+1),this.findMatchingInput().then(o=>{o&&(this.selectedStep.label="",o.focus(),this.saveGoals())}),this.saveGoals();else if(e.key=="End")e.preventDefault(),e.stopPropagation(),this.$q.dialog({title:"Confirm",message:"Confirm deletion of step.",cancel:!0,persistent:!0}).onOk(()=>{this.selectedGoal.steps.splice(this.selectedStepIndex,1),this.selectedGoal.stepsSize--,this.selectedGoal.stepsSize==0&&(this.selectedGoal.stepsEnabled=!1,this.selectedStep=null),this.saveGoals()});else if(e.key=="Backspace"&&this.selectedStep.label==""){if(e.preventDefault(),e.stopPropagation(),this.selectedGoal.stepsSize==0){this.selectedGoal.stepsEnabled=!1,this.selectedStep=null;return}this.selectedStepIndex+1<this.selectedGoal.steps.length&&(this.selectedStep=this.selectedGoal.steps[this.selectedStepIndex+1]),this.selectedGoal.steps.splice(this.selectedStepIndex,1),this.selectedGoal.stepsSize--,this.selectedStep=this.selectedGoal.steps[this.selectedStepIndex],this.selectedGoal.stepsSize==0&&(this.selectedGoal.stepsEnabled=!1,this.selectedStep=null),this.saveGoals()}}},addSteps(e,o){e.stepsSize<20&&(e.stepsSize++,o?(e.steps.splice(o,0,{label:"",value:!1}),this.selectedStep=e.steps[o],this.selectedStep.label="   "):(e.steps.push({label:"",value:!1}),this.selectedStep=e.steps[e.stepsSize-1]),this.saveGoals(),console.log(JSON.stringify(e)))},removeSteps(e){e.steps.splice(e.stepsSize-1,1),e.stepsSize--,e.stepsSize==0&&(e.stepsEnabled=!1,this.selectedStep=null),this.saveGoals()},removeGoal(e){var o='Are you sure you want to delete the goal: "'+e.goal+'"?';e.goal.length<1&&(o="Are you sure you want to delete the unnamed goal?"),this.$q.dialog({title:"Confirm",message:o,cancel:!0,persistent:!0}).onOk(()=>{this.$q.notify('Goal deleted: "'+e.goal+'"'),this.goalsStore.removeGoal(e)})},hideTutorial(){this.$q.dialog({title:"Acknowledge",message:"Have you read and understood the instructions?",cancel:!0,persistent:!0}).onOk(()=>{this.settingsStore.tutorialSettings.goalsTutorialHidden=!0,this.settingsStore.saveTutorialSettings()})},getDate(){const e=Date().toString();return ot.formatDate(e,"MMM D, YYYY")},getDateWithTime(){const e=Date().toString();return ot.formatDate(e,"MMM D, YYYY, hh:mm A")},getTime(){return new Date().getTime()},displayAlertTime(e){const o=new Date;return o.setHours(parseInt(e.split(":")[0],10)),o.setMinutes(parseInt(e.split(":")[1],10)),o.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})},openDatePicker(e){e.changeDateDialog=!0},closeDatePicker(e){e.date=ot.formatDate(e.date,"MMM D, YYYY"),e.changeDateDialog=!1,this.$q.notify("Goals saved!"),this.settingsStore.getGoalsSortStyle()=="Date"&&this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle())},closeAlertTimeDialog(e){e.changeAlertTimeDialog=!1,this.saveGoals()}}}),Jl={class:"q-gutter-md row justify-center"},Zl={key:0,class:"tutorial"},eo=M("p",null,' Click "New Goal" to create a new goal as part of the schedule. You can click "Unscheduled" to create goals without a desired end date. Clicking the sort button will toggle between sorting by date (soonest to complete first), or difficulty from easy to epic or epic to easy (depending on the direction of the arrow). ',-1),to={class:"goal-data"},lo={class:"text-h6"},oo={class:"difficulty-select"},ao={key:0},io=M("br",null,null,-1),no={class:"steps_checkboxes full-width"},uo={class:"stepTable full-width"},so={scope:"row",class:"firstColumn"},ro=M("br",null,null,-1),co={key:1},fo={"q-pa-lg":"",class:"text-black"},vo={key:0},mo=M("br",null,null,-1),ho={class:"row items-center justify-end"},So={key:2,class:"alert-data"},go={key:0,"q-pa-lg":"",class:"text-black"},po=M("br",null,null,-1),yo={class:"row items-center justify-center"},bo={key:0},wo={key:1},Co={key:2,class:"alert-data"},ko={key:3};function Vo(e,o,c,h,D,u){return L(),Dt(Ml,{"items-center":"",class:"goal-page"},{default:P(()=>[M("div",Jl,[b(Al,{"no-wrap":""},{default:P(()=>[b(H,{class:ee([e.buttonClass,"top-button"]),onClick:o[0]||(o[0]=i=>this.goalsStore.addGoal(null,this.settingsStore.getGoalsSortStyle())),style:{"margin-left":"0.5rem"}},{default:P(()=>[we("New Goal")]),_:1},8,["class"]),b(H,{class:ee([e.buttonClass,"top-button"]),onClick:o[1]||(o[1]=i=>this.toggleGoalsSortStyle()),style:{"margin-left":"1rem","margin-right":"0.5rem"}},{default:P(()=>[we(Ce(e.buttonText),1)]),_:1},8,["class"]),b(H,{class:ee([e.buttonClass,"top-button"]),onClick:o[2]||(o[2]=i=>this.viewUnscheduledGoals()),style:{"margin-left":"0.5rem","margin-right":"0.5rem"}},{default:P(()=>[we("Unscheduled")]),_:1},8,["class"])]),_:1})]),this.settingsStore.tutorialSettings.goalsTutorialHidden?He("",!0):(L(),Y("div",Zl,[eo,b(H,{flat:"",dense:"",glossy:"",icon:"done",color:"check",onClick:o[3]||(o[3]=i=>this.hideTutorial())})])),b(zl,null,{default:P(()=>[(L(!0),Y(qt,null,xt(this.goalsStore.goals,i=>tt((L(),Dt(Et,{key:i},{default:P(()=>[b(kl,{class:"goal-card text-white full-width"},{default:P(()=>[b(Vl,null,{default:P(()=>[M("div",to,[M("div",lo,[b(lt,{multiline:"",autogrow:"",wrap:"on","min-rows":1,"max-rows":10,standout:"bg-primary text-black",class:"full-width text-h6","input-class":"text-left",label:"Goal Title",modelValue:i.goal,"onUpdate:modelValue":[a=>i.goal=a,o[4]||(o[4]=a=>this.goalsStore.saveGoals())],onFocus:o[5]||(o[5]=a=>this.$q.notify("Goal will be saved once you enter a title"))},null,8,["modelValue","onUpdate:modelValue"])]),M("div",oo,[b(Ue,{"keep-color":"",modelValue:i.difficulty,"onUpdate:modelValue":[a=>i.difficulty=a,o[6]||(o[6]=a=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Easy",label:"Easy",color:"green"},null,8,["modelValue","onUpdate:modelValue"]),b(Ue,{"keep-color":"",modelValue:i.difficulty,"onUpdate:modelValue":[a=>i.difficulty=a,o[7]||(o[7]=a=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Moderate",label:"Moderate",color:"orange"},null,8,["modelValue","onUpdate:modelValue"]),b(Ue,{"keep-color":"",modelValue:i.difficulty,"onUpdate:modelValue":[a=>i.difficulty=a,o[8]||(o[8]=a=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Hard",label:"Hard",color:"red"},null,8,["modelValue","onUpdate:modelValue"]),b(Ue,{"keep-color":"",modelValue:i.difficulty,"onUpdate:modelValue":[a=>i.difficulty=a,o[9]||(o[9]=a=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Epic",label:"Epic",color:"black"},null,8,["modelValue","onUpdate:modelValue"])]),i.stepsEnabled?(L(),Y("div",ao,[M("p",null,[we(" Base Reward: "+Ce(this.goalsStore.baseReward(i))+" coins.",1),io]),M("div",no,[M("table",uo,[M("thead",null,[(L(!0),Y(qt,null,xt(i.steps,(a,S)=>(L(),Y("tr",{key:S},[M("th",so,[b(Dl,{modelValue:a.value,"onUpdate:modelValue":[x=>a.value=x,o[10]||(o[10]=x=>this.saveGoals())]},null,8,["modelValue","onUpdate:modelValue"])]),M("th",null,[b(lt,{ref_for:!0,ref:"stepDescRef",multiline:"",autogrow:"",wrap:"on","min-rows":1,"max-rows":10,standout:"bg-primary text-black",class:"full-width","input-class":"text-left",label:"Step Description",modelValue:a.label,"onUpdate:modelValue":[x=>a.label=x,o[11]||(o[11]=x=>this.goalsStore.saveGoals())],onKeydown:e.handleStepInput,onFocus:x=>{this.selectedGoal=i,this.selectedStep=a,this.selectedStepIndex=S}},null,8,["modelValue","onUpdate:modelValue","onKeydown","onFocus"])])]))),128))])]),b(H,{flat:"",dense:"",glossy:"",icon:"add",color:"green",onClick:a=>e.addSteps(i)},null,8,["onClick"]),b(H,{flat:"",dense:"",glossy:"",icon:"remove",color:"red",onClick:a=>e.removeSteps(i)},null,8,["onClick"])]),we(" Total Reward: "+Ce(this.goalsStore.goalReward(i))+" coins.",1),ro])):(L(),Y("div",co,[M("p",fo," Reward for completion: "+Ce(this.goalsStore.goalReward(i))+" coins. ",1)])),M("div",{class:ee(["text-goal",{overdue:this.goalsStore.goalExpired(i)}])},[b(Wl,{modelValue:i.repeatDays,"onUpdate:modelValue":[a=>i.repeatDays=a,o[12]||(o[12]=a=>this.saveGoals())],multiple:"","multiple-sort":"",options:e.days,label:"Repeats on these days","display-value":this.goalsStore.displayRepeatDays(i.repeatDays)},null,8,["modelValue","onUpdate:modelValue","options","display-value"]),i.repeatDays&&i.repeatDays.length>0?(L(),Y("div",vo,[mo,M("p",null," Will occur again on "+Ce(this.goalsStore.nextDate(i)),1)])):He("",!0),b(lt,{"no-outline":"",style:{"padding-right":"1e","min-width":"35%"},"input-class":"text-left text-bold",label:"Complete By",modelValue:i.date,"onUpdate:modelValue":a=>i.date=a,onClick:a=>e.openDatePicker(i)},{default:P(()=>[b(it,{modelValue:i.changeDateDialog,"onUpdate:modelValue":a=>i.changeDateDialog=a},{default:P(()=>[b(Gl,{modelValue:i.date,"onUpdate:modelValue":[a=>i.date=a,a=>e.closeDatePicker(i)]},{default:P(()=>[M("div",ho,[tt(b(H,{onClick:a=>e.unscheduleGoal(i),label:"Unschedule",color:"primary",flat:""},null,8,["onClick"]),[[zt]]),tt(b(H,{onClick:a=>e.closeDatePicker(i),label:"Close",color:"primary",flat:""},null,8,["onClick"]),[[zt]])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","onClick"])],2),this.settingsStore.useNotificationBeta?(L(),Y("div",So,[i.alertTime?(L(),Y("p",go,[po,we("Alert Time: "+Ce(e.displayAlertTime(i.alertTime))+" day of goal. ",1)])):He("",!0),b(it,{modelValue:i.changeAlertTimeDialog,"onUpdate:modelValue":a=>i.changeAlertTimeDialog=a},{default:P(()=>[b(Il,{modelValue:i.alertTime,"onUpdate:modelValue":[a=>i.alertTime=a,o[13]||(o[13]=a=>this.saveGoals())],onClose:a=>e.closeAlertTimeDialog(i)},{default:P(()=>[M("div",yo,[b(H,{"float-left":"",label:"Disable",onClick:a=>this.goalsStore.disableNotification(i),color:"primary",flat:""},null,8,["onClick"]),b(H,{label:"Close",color:"primary",onClick:a=>e.closeAlertTimeDialog(i),flat:""},null,8,["onClick"])])]),_:2},1032,["modelValue","onUpdate:modelValue","onClose"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])):He("",!0)])]),_:2},1024),b(xl,{dark:""}),b(ql,null,{default:P(()=>[i.ready?(L(),Y("div",bo,[b(H,{class:ee(e.buttonClass),flat:"",glossy:"",icon:"done_all",color:"green",onClick:a=>e.completeGoal(i)},null,8,["class","onClick"])])):(L(),Y("div",wo,[b(H,{class:ee(e.buttonClass),flat:"",glossy:"",icon:"check",color:"green",onClick:a=>e.completeGoal(i)},null,8,["class","onClick"])])),b(H,{class:ee(e.buttonClass),flat:"",glossy:"",icon:"123",color:"yellow",onClick:a=>e.toggleSteps(i),style:{"margin-left":"0"}},null,8,["class","onClick"]),this.settingsStore.useNotificationBeta?(L(),Y("div",Co,[b(H,{class:ee(e.buttonClass),flat:"",glossy:"",icon:"notifications",color:"red",onClick:a=>i.changeAlertTimeDialog=!0},null,8,["class","onClick"])])):(L(),Y("div",ko)),b(H,{class:ee(e.buttonClass),flat:"",glossy:"",icon:"delete",color:"black",onClick:a=>e.removeGoal(i)},null,8,["class","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[Bt]])),128))]),_:1})]),_:1})}var Lo=bl(Xl,[["render",Vo]]);export{Lo as default};
