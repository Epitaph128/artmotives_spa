import{_ as P,F as Y,o as F,ak as L,G as a,H as g,I as d,R as n,J as o,P as r,al as u,L as m,M as y,O as i,K as h,S as C,T as w,s as V,am as _,an as N,ao as b,aC as v,aD as T,ap as U,aq as O,ar as M,as as B}from"./index.72e2c796.js";import{Q as $}from"./QBtnGroup.b69c6302.js";import{Q as q}from"./QCircularProgress.79c38f8f.js";import{Q}from"./QSelect.745bbe12.js";import{Q as H}from"./QDate.3c6f7457.js";import{Q as j}from"./QTime.aa351711.js";import{Q as R}from"./QItem.e6aea75d.js";import{Q as E}from"./QList.726589ab.js";import{Q as K}from"./QPage.3fcf59c0.js";import{u as W,C as z}from"./store_goals.88e10141.js";import{u as J,Q as X}from"./QSpinnerFacebook.2ae7f491.js";import{d as D}from"./date.a6efd5a0.js";import{u as Z}from"./store_successes.ff3b616b.js";import{u as A}from"./store_settings.a1abbadf.js";import"./QItemSection.5c7df81b.js";import"./QItemLabel.ed57d90f.js";import"./QMenu.be1e89da.js";import"./selection.e44b2370.js";import"./TouchPan.b1075a9c.js";const I=Y({name:"GoalsPage",data(){return{changeAlertTimeDialog:!1,coinsStorageKey:"coins",enableNotificationsBeta:!1,days:[{label:"Sunday",value:0},{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6}]}},beforeMount(){this.settingsStore=A(),this.settingsStore.initialize(),this.goalsStore=W(),this.goalsStore.initialize(),this.successesStore=Z(),this.successesStore.initialize(),this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()),this.$emit("refresh-header"),this.processing=!1,this.settingsStore.termsUpToDate()||this.$router.push("terms")},created(){this.showLoading()},setup(){const e=J();let s;return F(()=>{s!==void 0&&(clearTimeout(s),e.loading.hide())}),{showLoading(){e.loading.show({spinner:X,spinnerColor:"white",spinnerSize:140,backgroundColor:"black",message:"Loading your goals... Please wait!",messageColor:"white"}),s=setTimeout(()=>{e.loading.hide(),s=void 0},500)}}},computed:{...L(A,["useBigButtons","goalsSortStyle"]),buttonClass(){return this.useBigButtons?"bigBtn":""},sortStyle(){return this.goalsSortStyle},buttonText(){return`Sort: ${this.sortStyle}`},formattedDate(){return function(e){const s=new Date(Date.parse(e));return D.formatDate(s,this.settingsStore.useDateFormat)}}},methods:{addGoal(){let e=!1;this.goalsStore.goals.forEach(s=>{this.isGoalOverdue(s)&&(this.$q.notify("Resolve overdue goals first before adding new ones!"),e=!0)}),e||this.goalsStore.addGoal(null,this.settingsStore.getGoalsSortStyle())},getDenseDisplayButtonText(){return this.settingsStore.useDenseModeGoals?"Dense Mode Active":"Dense Mode Disabled"},getStepsCompleteTextDisplay(e){return this.goalsStore.stepsComplete(e)+"/"+e.steps.length+" Steps Complete"},getMaskDate(e){if(this.settingsStore.useDateFormat==="MMM D, YYYY")return"";const s=new Date(Date.parse(e));return D.formatDate(s,this.settingsStore.useDateFormat)},viewUnscheduledGoals(){this.$router.push("unscheduledGoals")},unscheduleGoal(e){this.$q.notify("Goal unscheduled!"),e.changeDateDialog=!1,e.date=this.getDate(),this.goalsStore.addUnscheduledGoal(e),this.goalsStore.removeGoal(e.id),this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()),this.goalsStore.sortUnscheduledGoals(this.settingsStore.getGoalsSortStyle())},saveGoals(){this.$q.notify("Goals saved!"),this.goalsStore.saveGoals()},completeGoal(e){if(!e.ready){e.ready=!0,this.$q.notify("Click again to mark complete!");return}if(e.goal.length<1){this.$q.notify("Enter a title first!");return}if(e.stepsEnabled){for(var s=!0,p=0;p<e.stepsSize;p++)e.steps[p].value||(s=!1);if(!s){this.$q.notify("Complete all steps first!");return}}this.$q.dialog({title:"Confirm",message:'Confirm completion of goal: "'+e.goal+'"',cancel:!0,persistent:!0}).onOk(()=>{var G=this.goalsStore.goalReward(e);this.$q.notify("Rewarded "+G+" coins for completion!"),this.settingsStore.coins=this.settingsStore.coins+G,this.settingsStore.totalCoins=this.settingsStore.totalCoins+G;var k=Object.assign({},e);if(k.alertTime=null,k.date=this.getDateWithTime(),k.timeTieBreaker=this.getTime(),k.type="goal",this.successesStore.addEntry(k),this.$q.notify('Goal complete! "'+k.goal+'"'),this.settingsStore.saveCoins(),Array.isArray(e.repeatDays)&&e.repeatDays.length>0){var S=Object.assign({},e);if(S.date=this.goalsStore.nextDate(e),S.nextDate=this.goalsStore.nextDate(S),S.stepsEnabled)for(var t=0;t<S.stepsSize;t++)S.steps[t].value=!1;this.goalsStore.addGoal(S,this.settingsStore.getGoalsSortStyle()),this.$q.notify("Repeat goal "+S.goal+" set for "+S.date)}this.goalsStore.removeGoal(e.id),this.$emit("refresh-header")})},toggleSteps(e){e.steps?(e.stepsEnabled=!e.stepsEnabled,e.stepsEnabled&&e.stepsSize==0&&this.addSteps(e)):(e.stepsEnabled=!0,e.steps=[],e.stepsSize=0,this.addSteps(e)),this.saveGoals()},toggleGoalsSortStyle(){this.settingsStore.toggleGoalsSortStyle(),this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle())},findMatchingInput(){return new Promise(e=>{this.$nextTick(()=>{this.$nextTick(()=>{for(const s in this.$refs.stepDescRef){const p=this.$refs.stepDescRef[s];if(p.modelValue==this.selectedStep.label){e(p);return}}e(null)})})})},handleStepInput(e){if(e.key){if(e.key=="Enter"){if(this.processing)return;this.processing=!0,this.addSteps(this.selectedGoal,this.selectedStepIndex+1),this.findMatchingInput().then(s=>{s&&(e.preventDefault(),e.stopPropagation(),this.selectedStep.label="",s.focus(),this.saveGoals()),this.processing=!1})}else if(e.key=="Backspace"&&this.selectedStep.label==""){if(this.processing)return;if(e.preventDefault(),e.stopPropagation(),this.selectedGoal.stepsSize==0){this.selectedGoal.stepsEnabled=!1,this.selectedStep=null,this.saveGoals();return}this.selectedStepIndex==this.selectedGoal.stepsSize-1?this.selectedStepIndex>=1?(this.selectedStep=this.selectedGoal.steps[this.selectedStepIndex-1],this.selectedStep.label+="12345",this.selectedGoal.steps.splice(this.selectedStepIndex,1),this.selectedGoal.stepsSize--,this.selectedStepIndex--,this.processing=!0,this.findMatchingInput().then(s=>{s&&(s.focus(),this.selectedStep.label=this.selectedStep.label.slice(0,-5),this.processing=!1,this.saveGoals())})):(this.selectedGoal.stepsEnabled=!1,this.selectedGoal.steps.splice(this.selectedStepIndex,1),this.selectedGoal.stepsSize--,this.saveGoals()):(this.selectedGoal.steps.splice(this.selectedStepIndex,1),this.selectedGoal.stepsSize--,this.selectedStep=this.selectedGoal.steps[this.selectedStepIndex],this.selectedGoal.stepsSize==0&&(this.selectedGoal.stepsEnabled=!1,this.selectedStep=null),this.saveGoals())}}},addSteps(e,s){e.stepsSize++,s?(e.steps.splice(s,0,{label:"",value:!1}),this.selectedStep=e.steps[s],this.selectedStep.label="new step"):(e.steps.push({label:"",value:!1}),this.selectedStep=e.steps[e.stepsSize-1]),this.saveGoals()},removeSteps(e){e.stepsSize<=0||(e.steps.splice(e.stepsSize-1,1),e.stepsSize--,e.stepsSize==0&&(e.stepsEnabled=!1,this.selectedStep=null),this.saveGoals())},moveStep(e,s,p){s<0||s>=e.steps.length||p!==-1&&p!==1||(p===-1&&s>0?[e.steps[s],e.steps[s-1]]=[e.steps[s-1],e.steps[s]]:p===1&&s<e.steps.length-1&&([e.steps[s],e.steps[s+1]]=[e.steps[s+1],e.steps[s]]),this.saveGoals())},removeStep(e,s){if(!(s<0||s>=e.steps.length)){var p='Are you sure you want to delete the step: "'+e.steps[s].label+'"?';e.steps[s].length<1&&(p="Are you sure you want to delete the unnamed step?"),this.$q.dialog({title:"Confirm",message:p,cancel:!0,persistent:!0}).onOk(()=>{e.steps[s].length<1?this.$q.notify("Step deleted"):this.$q.notify('Step deleted: "'+e.steps[s].label+'"'),e.steps.splice(s,1),e.stepsSize--,this.saveGoals()})}},removeGoal(e){var s='Are you sure you want to delete the goal: "'+e.goal+'"?';e.goal.length<1&&(s="Are you sure you want to delete the unnamed goal?"),this.$q.dialog({title:"Confirm",message:s,cancel:!0,persistent:!0}).onOk(()=>{e.goal.length<1?this.$q.notify("Goal deleted"):this.$q.notify('Goal deleted: "'+e.goal+'"'),this.goalsStore.removeGoal(e.id)})},hideTutorial(){this.$q.dialog({title:"Acknowledge",message:"Have you read and understood the instructions?",cancel:!0,persistent:!0}).onOk(()=>{this.settingsStore.tutorialSettings.goalsTutorialHidden=!0,this.settingsStore.saveTutorialSettings()})},toggleDenseDisplay(){this.settingsStore.useDenseModeGoals||(this.settingsStore.useDenseModeGoals=!1),this.settingsStore.useDenseModeGoals=!this.settingsStore.useDenseModeGoals,this.settingsStore.saveDenseModeGoalsSetting()},getDate(){const e=Date().toString();return D.formatDate(e,"MMM D, YYYY")},getDateWithTime(){const e=Date().toString();return D.formatDate(e,"MMM D, YYYY, hh:mm A")},getTime(){return new Date().getTime()},displayAlertTime(e){const s=new Date;return s.setHours(parseInt(e.split(":")[0],10)),s.setMinutes(parseInt(e.split(":")[1],10)),s.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})},openDatePicker(e){e.changeDateDialog=!0},closeDatePicker(e){e.date=D.formatDate(e.date,"MMM D, YYYY"),e.changeDateDialog=!1,this.$q.notify("Goals saved!"),this.settingsStore.getGoalsSortStyle()=="Date"&&this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle())},closeAlertTimeDialog(e){e.changeAlertTimeDialog=!1,this.saveGoals()},isGoalDueLater(e){return new Date(e.date)>new Date(this.getDate())},isGoalDueToday(e){return new Date(e.date).toString()==new Date(this.getDate()).toString()},isGoalOverdue(e){return new Date(e.date)<new Date(this.getDate())},isRepeatingGoalDueLater(e){return e.repeatDays&&e.repeatDays.length>0&&new Date(e.date)>new Date(this.getDate())}}}),x={class:"q-gutter-md row justify-center top-button-group"},ee={class:"q-gutter-md row justify-center top-button-group",style:{"margin-top":"-2em","margin-bottom":"-1em"}},te=n("p",{class:"motivational"}," Whatever peaks you climb on your journey, always keep your dreams in mind! ",-1),se={key:0,class:"tutorial"},le=n("p",null,' Click "New Goal" to create a new goal as part of the schedule. You can click "Unscheduled" to create goals without a desired end date. Clicking the sort button will toggle between sorting by date (soonest to complete first), or difficulty from easy to epic or epic to easy (depending on the direction of the arrow). ',-1),oe={class:"goal-data"},ae={class:"text-h6"},ie={class:"difficulty-select"},ne={key:0},re=n("br",null,null,-1),de={class:"steps_container"},ue=n("br",null,null,-1),ce={class:"steps-complete"},pe={class:"text-black",style:{margin:"0"}},he=n("br",null,null,-1),me={key:1},fe={class:"text-black",style:{margin:"0"}},ye=n("br",null,null,-1),Se={key:0},ge=n("br",null,null,-1),ve={key:0},ke=n("p",null," Not due today. You may complete it and it will move to the next date based on the days you set. ",-1),be=[ke],De={class:"row items-center justify-end"},Ge={key:2,class:"alert-data"},Ce={key:0,"q-pa-lg":"",class:"text-black"},we=n("br",null,null,-1),Ve={class:"row items-center justify-center"},$e={key:0},_e={key:1},Te={key:2,class:"alert-data"},Ue={key:3},Me={class:"goal-data"},Be={class:"text-h6"},qe={class:"difficulty-select q-pa-sm"},Qe={key:0},Re=n("br",null,null,-1),Ee={class:"steps_container"},ze={key:1,class:"q-pa-sm"},Ae={key:2,class:"q-pa-sm"},Pe={key:0},Ye={key:1},Fe={key:0},Le={key:1},Ne={key:3,class:"q-pa-sm"},Oe={key:0},He={key:1},je={key:2},Ke={key:0},We={key:1},Je={key:2,class:"alert-data"},Xe={key:3};function Ze(e,s,p,G,k,S){return a(),g(K,{"items-center":"",class:"goal-page"},{default:d(()=>[n("div",x,[o($,{"no-wrap":""},{default:d(()=>[o(r,{class:u([e.buttonClass,"top-button"]),onClick:s[0]||(s[0]=t=>this.addGoal()),style:{"margin-left":"0.5rem"}},{default:d(()=>[m("New Goal")]),_:1},8,["class"]),o(r,{class:u([e.buttonClass,"top-button"]),onClick:s[1]||(s[1]=t=>this.toggleGoalsSortStyle()),style:{"margin-left":"1rem","margin-right":"0.5rem"}},{default:d(()=>[m(y(e.buttonText),1)]),_:1},8,["class"]),o(r,{class:u([e.buttonClass,"top-button"]),onClick:s[2]||(s[2]=t=>this.viewUnscheduledGoals()),style:{"margin-left":"0.5rem","margin-right":"0.5rem"}},{default:d(()=>[m("Unscheduled")]),_:1},8,["class"])]),_:1})]),n("div",ee,[o($,{"no-wrap":""},{default:d(()=>[o(r,{class:u([e.buttonClass,"top-button"]),onClick:s[3]||(s[3]=t=>this.toggleDenseDisplay())},{default:d(()=>[m(y(this.getDenseDisplayButtonText()),1)]),_:1},8,["class"])]),_:1})]),te,this.settingsStore.tutorialSettings.goalsTutorialHidden?h("",!0):(a(),i("div",se,[le,o(r,{flat:"",dense:"",glossy:"",icon:"done",color:"check",onClick:s[4]||(s[4]=t=>this.hideTutorial())})])),this.settingsStore.useDenseModeGoals?(a(),g(E,{key:2},{default:d(()=>[(a(!0),i(w,null,C(this.goalsStore.goals,t=>V((a(),g(R,{key:t},{default:d(()=>[o(_,{class:"goal-card text-white full-width"},{default:d(()=>[n("div",Me,[n("div",Be,[o(b,{multiline:"",autogrow:"",wrap:"on","min-rows":1,"max-rows":10,standout:"bg-primary text-black",class:"full-width text-h6","input-class":"text-left",label:"Goal Title",modelValue:t.goal,"onUpdate:modelValue":l=>t.goal=l,onFocus:s[13]||(s[13]=l=>this.$q.notify("Goal will be saved once you enter a title")),onBlur:l=>{t.goal=t.goal.trim(),this.goalsStore.saveGoals()}},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),n("div",qe,[o(v,{"keep-color":"",modelValue:t.difficulty,"onUpdate:modelValue":[l=>t.difficulty=l,s[14]||(s[14]=l=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Easy",label:"Easy",color:"green"},null,8,["modelValue","onUpdate:modelValue"]),o(v,{"keep-color":"",modelValue:t.difficulty,"onUpdate:modelValue":[l=>t.difficulty=l,s[15]||(s[15]=l=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Moderate",label:"Moderate",color:"orange"},null,8,["modelValue","onUpdate:modelValue"]),o(v,{"keep-color":"",modelValue:t.difficulty,"onUpdate:modelValue":[l=>t.difficulty=l,s[16]||(s[16]=l=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Hard",label:"Hard",color:"red"},null,8,["modelValue","onUpdate:modelValue"]),o(v,{"keep-color":"",modelValue:t.difficulty,"onUpdate:modelValue":[l=>t.difficulty=l,s[17]||(s[17]=l=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Epic",label:"Epic",color:"black"},null,8,["modelValue","onUpdate:modelValue"])]),t.stepsEnabled?(a(),i("div",Qe,[n("p",null,[m(" Base Reward: "+y(this.goalsStore.baseReward(t))+" coins.",1),Re]),n("div",Ee,[(a(!0),i(w,null,C(t.steps,(l,f)=>(a(),i("div",{key:f,class:"steps_checkboxes"},[n("div",{class:u(e.buttonClass)},[o(T,{modelValue:l.value,"onUpdate:modelValue":[c=>l.value=c,s[18]||(s[18]=c=>this.saveGoals())]},null,8,["modelValue","onUpdate:modelValue"])],2),o(b,{ref_for:!0,ref:"stepDescRef",multiline:"",autogrow:"",wrap:"on","min-rows":1,"max-rows":10,standout:"bg-primary text-black",class:"steps-label","input-class":"text-left",modelValue:l.label,"onUpdate:modelValue":c=>l.label=c,onKeydown:e.handleStepInput,onFocus:c=>{this.selectedGoal=t,this.selectedStep=l,this.selectedStepIndex=f},onBlur:c=>{l.label=l.label.trim(),this.goalsStore.saveGoals()}},null,8,["modelValue","onUpdate:modelValue","onKeydown","onFocus","onBlur"]),this.settingsStore.useStepMgmtButtons?(a(),g($,{key:0,class:"step_management"},{default:d(()=>[o(r,{class:u(e.buttonClass),flat:"",glossy:"",icon:"arrow_upward",color:"yellow",onClick:c=>e.moveStep(t,f,-1)},null,8,["class","onClick"]),o(r,{class:u(e.buttonClass),flat:"",glossy:"",icon:"arrow_downward",color:"yellow",onClick:c=>e.moveStep(t,f,1)},null,8,["class","onClick"]),o(r,{class:u(e.buttonClass),flat:"",glossy:"",icon:"delete",color:"red",onClick:c=>e.removeStep(t,f)},null,8,["class","onClick"])]),_:2},1024)):h("",!0)]))),128))])])):h("",!0),t.repeatDays&&t.repeatDays.length>0?(a(),i("div",ze,[o(Q,{modelValue:t.repeatDays,"onUpdate:modelValue":[l=>t.repeatDays=l,s[19]||(s[19]=l=>this.saveGoals())],multiple:"","multiple-sort":"",options:e.days,label:"Repeats on these days","display-value":this.goalsStore.displayRepeatDays(t.repeatDays)},null,8,["modelValue","onUpdate:modelValue","options","display-value"])])):h("",!0),t.repeatDays&&t.repeatDays.length>0?(a(),i("div",Ae,[e.isRepeatingGoalDueLater(t)?(a(),i("div",Pe," Goal not due today! ")):(a(),i("div",Ye,[e.isGoalDueToday(t)?(a(),i("div",Fe,"Goal due today!")):h("",!0),e.isGoalOverdue(t)?(a(),i("div",Le,"Goal overdue!")):h("",!0)])),m(" Will occur again on "+y(this.formattedDate(this.goalsStore.nextDate(t)))+" if completed. ",1)])):h("",!0),t.repeatDays&&t.repeatDays.length>0?h("",!0):(a(),i("div",Ne,[e.isGoalDueToday(t)?(a(),i("div",Oe,"Goal due today!")):h("",!0),e.isGoalOverdue(t)?(a(),i("div",He,"Goal overdue!")):h("",!0),e.isGoalDueLater(t)?(a(),i("div",je," Complete by "+y(this.formattedDate(t.date)),1)):h("",!0)]))]),o(M,null,{default:d(()=>[t.ready?(a(),i("div",Ke,[o(r,{class:u(e.buttonClass),flat:"",glossy:"",icon:"done_all",color:"green",onClick:l=>e.completeGoal(t)},null,8,["class","onClick"])])):(a(),i("div",We,[o(r,{class:u(e.buttonClass),flat:"",glossy:"",icon:"check",color:"green",onClick:l=>e.completeGoal(t)},null,8,["class","onClick"])])),o(r,{class:u(e.buttonClass),flat:"",glossy:"",icon:"123",color:"yellow",onClick:l=>e.toggleSteps(t),style:{"margin-left":"0"}},null,8,["class","onClick"]),this.settingsStore.useNotificationBeta?(a(),i("div",Je,[o(r,{class:u(e.buttonClass),flat:"",glossy:"",icon:"notifications",color:"red",onClick:l=>t.changeAlertTimeDialog=!0},null,8,["class","onClick"])])):(a(),i("div",Xe)),o(r,{class:u(e.buttonClass),style:{padding:"0","min-width":"40px"},flat:"",glossy:"",icon:"delete",color:"black",onClick:l=>e.removeGoal(t)},null,8,["class","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[B]])),128))]),_:1})):(a(),g(E,{key:1},{default:d(()=>[(a(!0),i(w,null,C(this.goalsStore.goals,t=>V((a(),g(R,{key:t},{default:d(()=>[o(_,{class:"goal-card text-white full-width"},{default:d(()=>[o(N,null,{default:d(()=>[n("div",oe,[n("div",ae,[o(b,{multiline:"",autogrow:"",wrap:"on","min-rows":1,"max-rows":10,standout:"bg-primary text-black",class:"full-width text-h6","input-class":"text-left",label:"Goal Title",modelValue:t.goal,"onUpdate:modelValue":l=>t.goal=l,onFocus:s[5]||(s[5]=l=>this.$q.notify("Goal will be saved once you enter a title")),onBlur:l=>{t.goal=t.goal.trim(),this.goalsStore.saveGoals()}},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),n("div",ie,[o(v,{"keep-color":"",modelValue:t.difficulty,"onUpdate:modelValue":[l=>t.difficulty=l,s[6]||(s[6]=l=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Easy",label:"Easy",color:"green"},null,8,["modelValue","onUpdate:modelValue"]),o(v,{"keep-color":"",modelValue:t.difficulty,"onUpdate:modelValue":[l=>t.difficulty=l,s[7]||(s[7]=l=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Moderate",label:"Moderate",color:"orange"},null,8,["modelValue","onUpdate:modelValue"]),o(v,{"keep-color":"",modelValue:t.difficulty,"onUpdate:modelValue":[l=>t.difficulty=l,s[8]||(s[8]=l=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Hard",label:"Hard",color:"red"},null,8,["modelValue","onUpdate:modelValue"]),o(v,{"keep-color":"",modelValue:t.difficulty,"onUpdate:modelValue":[l=>t.difficulty=l,s[9]||(s[9]=l=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Epic",label:"Epic",color:"black"},null,8,["modelValue","onUpdate:modelValue"])]),t.stepsEnabled?(a(),i("div",ne,[n("p",null,[m(" Base Reward: "+y(this.goalsStore.baseReward(t))+" coins.",1),re]),n("div",de,[(a(!0),i(w,null,C(t.steps,(l,f)=>(a(),i("div",{key:f,class:"steps_checkboxes"},[n("div",{class:u(e.buttonClass)},[o(T,{modelValue:l.value,"onUpdate:modelValue":[c=>l.value=c,s[10]||(s[10]=c=>this.saveGoals())]},null,8,["modelValue","onUpdate:modelValue"])],2),o(b,{ref_for:!0,ref:"stepDescRef",multiline:"",autogrow:"",wrap:"on","min-rows":1,"max-rows":10,standout:"bg-primary text-black",class:"steps-label","input-class":"text-left",modelValue:l.label,"onUpdate:modelValue":c=>l.label=c,onKeydown:e.handleStepInput,onFocus:c=>{this.selectedGoal=t,this.selectedStep=l,this.selectedStepIndex=f},onBlur:c=>{l.label=l.label.trim(),this.goalsStore.saveGoals()}},null,8,["modelValue","onUpdate:modelValue","onKeydown","onFocus","onBlur"]),this.settingsStore.useStepMgmtButtons?(a(),g($,{key:0,class:"step_management"},{default:d(()=>[o(r,{class:u(e.buttonClass),flat:"",glossy:"",icon:"arrow_upward",color:"yellow",onClick:c=>e.moveStep(t,f,-1)},null,8,["class","onClick"]),o(r,{class:u(e.buttonClass),flat:"",glossy:"",icon:"arrow_downward",color:"yellow",onClick:c=>e.moveStep(t,f,1)},null,8,["class","onClick"]),o(r,{class:u(e.buttonClass),flat:"",glossy:"",icon:"delete",color:"red",onClick:c=>e.removeStep(t,f)},null,8,["class","onClick"])]),_:2},1024)):h("",!0)]))),128))]),ue,o(r,{flat:"",dense:"",glossy:"",icon:"add",color:"green",onClick:l=>e.addSteps(t)},null,8,["onClick"]),o(r,{flat:"",dense:"",glossy:"",icon:"remove",color:"red",onClick:l=>e.removeSteps(t)},null,8,["onClick"]),n("span",ce,y(this.getStepsCompleteTextDisplay(t)),1),n("p",pe,[m(" Reward for completion: "),o(q,{"show-value":"",class:"text-light-blue q-ma-md shrinkP",value:this.goalsStore.goalReward(t)/1e3*100,size:"64px",color:"light-blue"},{default:d(()=>[m(y(this.goalsStore.goalReward(t)),1),he,m(" coins ")]),_:2},1032,["value"])])])):(a(),i("div",me,[n("p",fe,[m(" Reward for completion: "),o(q,{"show-value":"",class:"text-light-blue q-ma-md shrinkP",value:this.goalsStore.goalReward(t)/1e3*100,size:"64px",color:"light-blue"},{default:d(()=>[m(y(this.goalsStore.goalReward(t)),1),ye,m(" coins ")]),_:2},1032,["value"])])])),n("div",{class:u(["text-goal",{overdue:this.goalsStore.goalExpired(t)}])},[o(Q,{modelValue:t.repeatDays,"onUpdate:modelValue":[l=>t.repeatDays=l,s[11]||(s[11]=l=>this.saveGoals())],multiple:"","multiple-sort":"",options:e.days,label:"Repeats on these days","display-value":this.goalsStore.displayRepeatDays(t.repeatDays)},null,8,["modelValue","onUpdate:modelValue","options","display-value"]),t.repeatDays&&t.repeatDays.length>0?(a(),i("div",Se,[ge,e.isRepeatingGoalDueLater(t)?(a(),i("div",ve,be)):h("",!0),n("p",null," Will occur again on "+y(this.formattedDate(this.goalsStore.nextDate(t)))+" if completed. ",1)])):h("",!0),(a(),g(b,{readonly:"",key:t.date,"no-outline":"",style:{"padding-right":"1e","min-width":"35%"},"input-class":"text-left text-bold",label:"Complete By",modelValue:t.date,"onUpdate:modelValue":l=>t.date=l,value:e.formattedDate(t.date),mask:this.getMaskDate(t.date),onClick:l=>e.openDatePicker(t)},{default:d(()=>[o(U,{modelValue:t.changeDateDialog,"onUpdate:modelValue":l=>t.changeDateDialog=l},{default:d(()=>[o(H,{modelValue:t.date,"onUpdate:modelValue":[l=>t.date=l,l=>e.closeDatePicker(t)]},{default:d(()=>[n("div",De,[V(o(r,{onClick:l=>e.unscheduleGoal(t),label:"Unschedule",color:"primary",flat:""},null,8,["onClick"]),[[z]]),V(o(r,{onClick:l=>e.closeDatePicker(t),label:"Close",color:"primary",flat:""},null,8,["onClick"]),[[z]])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","value","mask","onClick"]))],2),this.settingsStore.useNotificationBeta?(a(),i("div",Ge,[t.alertTime?(a(),i("p",Ce,[we,m("Alert Time: "+y(e.displayAlertTime(t.alertTime))+" day of goal. ",1)])):h("",!0),o(U,{modelValue:t.changeAlertTimeDialog,"onUpdate:modelValue":l=>t.changeAlertTimeDialog=l},{default:d(()=>[o(j,{modelValue:t.alertTime,"onUpdate:modelValue":[l=>t.alertTime=l,s[12]||(s[12]=l=>this.saveGoals())],onClose:l=>e.closeAlertTimeDialog(t)},{default:d(()=>[n("div",Ve,[o(r,{"float-left":"",label:"Disable",onClick:l=>this.goalsStore.disableNotification(t),color:"primary",flat:""},null,8,["onClick"]),o(r,{label:"Close",color:"primary",onClick:l=>e.closeAlertTimeDialog(t),flat:""},null,8,["onClick"])])]),_:2},1032,["modelValue","onUpdate:modelValue","onClose"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])):h("",!0)])]),_:2},1024),o(O,{dark:""}),o(M,null,{default:d(()=>[t.ready?(a(),i("div",$e,[o(r,{class:u(e.buttonClass),flat:"",glossy:"",icon:"done_all",color:"green",onClick:l=>e.completeGoal(t)},null,8,["class","onClick"])])):(a(),i("div",_e,[o(r,{class:u(e.buttonClass),flat:"",glossy:"",icon:"check",color:"green",onClick:l=>e.completeGoal(t)},null,8,["class","onClick"])])),o(r,{class:u(e.buttonClass),flat:"",glossy:"",icon:"123",color:"yellow",onClick:l=>e.toggleSteps(t),style:{"margin-left":"0"}},null,8,["class","onClick"]),this.settingsStore.useNotificationBeta?(a(),i("div",Te,[o(r,{class:u(e.buttonClass),flat:"",glossy:"",icon:"notifications",color:"red",onClick:l=>t.changeAlertTimeDialog=!0},null,8,["class","onClick"])])):(a(),i("div",Ue)),o(r,{class:u(e.buttonClass),flat:"",glossy:"",icon:"delete",color:"black",style:{"min-width":"40px"},onClick:l=>e.removeGoal(t)},null,8,["class","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[B]])),128))]),_:1}))]),_:1})}var St=P(I,[["render",Ze]]);export{St as default};
