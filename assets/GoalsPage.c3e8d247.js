import{c as xt,aw as Rt,ax as al,ay as nl,az as ol,p as il,aA as hl,s as ul,aB as gl,a as m,z as yl,g as Dt,h as c,Q as kt,aC as Sl,aq as rl,a4 as Ke,n as bl,r as R,w as ke,e as Ae,aD as pl,aE as wl,aF as Cl,aG as Vl,d as sl,ar as cl,aH as kl,aI as Nt,aJ as ft,aK as _l,aL as xl,D as zt,aM as Dl,ae as tt,a3 as dl,aN as ql,an as Ft,L as Ml,as as Al,aO as Tl,av as mt,b as zl,at as Il,X,a9 as Ol,aP as $l,aQ as El,_ as Hl,M as Bl,ai as Fl,N as Se,O as jt,P as ce,Y as Z,R as E,T as ht,U as lt,W as Me,Z as Ut,$ as Qt,y as Kt,aj as Rl,al as Gl,am as It,aR as Vt,aS as Ll,ak as gt,S as Ot,ao as Pl,ap as Yl}from"./index.70bccae1.js";import{Q as Nl}from"./QBtnGroup.3996a22e.js";import{Q as vl,a as jl}from"./QItem.2de1d45b.js";import{Q as Ul}from"./QItemSection.a119e280.js";import{Q as Ql}from"./QItemLabel.c80df565.js";import{Q as Kl}from"./QMenu.1ffcc7f0.js";import{n as Wt,a as Xt,f as Wl,g as Xl,j as $t,p as St,_ as Jl,d as Et}from"./date.4a8949eb.js";import{u as Zl,a as ea,b as ta,g as Re,Q as la}from"./QTime.3d1a4699.js";import{Q as aa}from"./QPage.9c92f9d5.js";import{u as na}from"./store_goals.b233fd9b.js";import{u as oa}from"./store_successes.1da8d078.js";import{u as Jt}from"./store_settings.3715221e.js";import"./selection.e345cde5.js";import"./TouchPan.78e62e3c.js";var ia=xt({name:"QField",inheritAttrs:!1,props:{...Rt,tag:{type:String,default:"label"}},emits:al,setup(){return nl(ol({requiredForAttr:!1,tagProp:!0}))}});const ua={xs:8,sm:10,md:14,lg:20,xl:24};var ra=xt({name:"QChip",props:{...il,...hl,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:o,emit:s}){const{proxy:{$q:C}}=Dt(),x=ul(e,C),h=gl(e,ua),r=m(()=>e.selected===!0||e.icon!==void 0),u=m(()=>e.selected===!0?e.iconSelected||C.iconSet.chip.selected:e.icon),D=m(()=>e.iconRemove||C.iconSet.chip.remove),O=m(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),w=m(()=>{const b=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(b?` text-${b} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(O.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(x.value===!0?" q-chip--dark q-dark":"")}),A=m(()=>{const b=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},ae={...b,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||C.lang.label.remove};return{chip:b,remove:ae}});function $(b){b.keyCode===13&&H(b)}function H(b){e.disable||(s("update:selected",!e.selected),s("click",b))}function G(b){(b.keyCode===void 0||b.keyCode===13)&&(Ke(b),e.disable===!1&&(s("update:modelValue",!1),s("remove")))}function U(){const b=[];O.value===!0&&b.push(c("div",{class:"q-focus-helper"})),r.value===!0&&b.push(c(kt,{class:"q-chip__icon q-chip__icon--left",name:u.value}));const ae=e.label!==void 0?[c("div",{class:"ellipsis"},[e.label])]:void 0;return b.push(c("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Sl(o.default,ae))),e.iconRight&&b.push(c(kt,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&b.push(c(kt,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:D.value,...A.value.remove,onClick:G,onKeyup:G})),b}return()=>{if(e.modelValue===!1)return;const b={class:w.value,style:h.value};return O.value===!0&&Object.assign(b,A.value.chip,{onClick:H,onKeyup:$}),yl("div",b,U(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[rl,e.ripple]])}}});let _t=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const o=document.createElement("div");Object.assign(o.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(o),e.scrollLeft=-1e3,_t=e.scrollLeft>=0,e.remove()}const Ve=1e3,sa=["start","center","end","start-force","center-force","end-force"],fl=Array.prototype.filter,ca=window.getComputedStyle(document.body).overflowAnchor===void 0?bl:function(e,o){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const s=e.children||[];fl.call(s,x=>x.dataset&&x.dataset.qVsAnchor!==void 0).forEach(x=>{delete x.dataset.qVsAnchor});const C=s[o];C&&C.dataset&&(C.dataset.qVsAnchor="")}))};function nt(e,o){return e+o}function Ht(e,o,s,C,x,h,r,u){const D=e===window?document.scrollingElement||document.documentElement:e,O=x===!0?"offsetWidth":"offsetHeight",w={scrollStart:0,scrollViewSize:-r-u,scrollMaxSize:0,offsetStart:-r,offsetEnd:-u};if(x===!0?(e===window?(w.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,w.scrollViewSize+=document.documentElement.clientWidth):(w.scrollStart=D.scrollLeft,w.scrollViewSize+=D.clientWidth),w.scrollMaxSize=D.scrollWidth,h===!0&&(w.scrollStart=(_t===!0?w.scrollMaxSize-w.scrollViewSize:0)-w.scrollStart)):(e===window?(w.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,w.scrollViewSize+=document.documentElement.clientHeight):(w.scrollStart=D.scrollTop,w.scrollViewSize+=D.clientHeight),w.scrollMaxSize=D.scrollHeight),s!==null)for(let A=s.previousElementSibling;A!==null;A=A.previousElementSibling)A.classList.contains("q-virtual-scroll--skip")===!1&&(w.offsetStart+=A[O]);if(C!==null)for(let A=C.nextElementSibling;A!==null;A=A.nextElementSibling)A.classList.contains("q-virtual-scroll--skip")===!1&&(w.offsetEnd+=A[O]);if(o!==e){const A=D.getBoundingClientRect(),$=o.getBoundingClientRect();x===!0?(w.offsetStart+=$.left-A.left,w.offsetEnd-=$.width):(w.offsetStart+=$.top-A.top,w.offsetEnd-=$.height),e!==window&&(w.offsetStart+=w.scrollStart),w.offsetEnd+=w.scrollMaxSize-w.offsetStart}return w}function Zt(e,o,s,C){o==="end"&&(o=(e===window?document.body:e)[s===!0?"scrollWidth":"scrollHeight"]),e===window?s===!0?(C===!0&&(o=(_t===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-o),window.scrollTo(o,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o):s===!0?(C===!0&&(o=(_t===!0?e.scrollWidth-e.offsetWidth:0)-o),e.scrollLeft=o):e.scrollTop=o}function yt(e,o,s,C){if(s>=C)return 0;const x=o.length,h=Math.floor(s/Ve),r=Math.floor((C-1)/Ve)+1;let u=e.slice(h,r).reduce(nt,0);return s%Ve!==0&&(u-=o.slice(h*Ve,s).reduce(nt,0)),C%Ve!==0&&C!==x&&(u-=o.slice(C,r*Ve).reduce(nt,0)),u}const da={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},va={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...da};function fa({virtualScrollLength:e,getVirtualScrollTarget:o,getVirtualScrollEl:s,virtualScrollItemSizeComputed:C}){const x=Dt(),{props:h,emit:r,proxy:u}=x,{$q:D}=u;let O,w,A,$=[],H;const G=R(0),U=R(0),b=R({}),ae=R(null),_e=R(null),P=R(null),S=R({from:0,to:0}),ee=m(()=>h.tableColspan!==void 0?h.tableColspan:100);C===void 0&&(C=m(()=>h.virtualScrollItemSize));const N=m(()=>C.value+";"+h.virtualScrollHorizontal),de=m(()=>N.value+";"+h.virtualScrollSliceRatioBefore+";"+h.virtualScrollSliceRatioAfter);ke(de,()=>{re()}),ke(N,be);function be(){we(w,!0)}function Te(i){we(i===void 0?w:i)}function he(i,g){const q=o();if(q==null||q.nodeType===8)return;const B=Ht(q,s(),ae.value,_e.value,h.virtualScrollHorizontal,D.lang.rtl,h.virtualScrollStickySizeStart,h.virtualScrollStickySizeEnd);A!==B.scrollViewSize&&re(B.scrollViewSize),ne(q,B,Math.min(e.value-1,Math.max(0,parseInt(i,10)||0)),0,sa.indexOf(g)!==-1?g:w!==-1&&i>w?"end":"start")}function J(){const i=o();if(i==null||i.nodeType===8)return;const g=Ht(i,s(),ae.value,_e.value,h.virtualScrollHorizontal,D.lang.rtl,h.virtualScrollStickySizeStart,h.virtualScrollStickySizeEnd),q=e.value-1,B=g.scrollMaxSize-g.offsetStart-g.offsetEnd-U.value;if(O===g.scrollStart)return;if(g.scrollMaxSize<=0){ne(i,g,0,0);return}A!==g.scrollViewSize&&re(g.scrollViewSize),ve(S.value.from);const j=Math.floor(g.scrollMaxSize-Math.max(g.scrollViewSize,g.offsetEnd)-Math.min(H[q],g.scrollViewSize/2));if(j>0&&Math.ceil(g.scrollStart)>=j){ne(i,g,q,g.scrollMaxSize-g.offsetEnd-$.reduce(nt,0));return}let T=0,M=g.scrollStart-g.offsetStart,Q=M;if(M<=B&&M+g.scrollViewSize>=G.value)M-=G.value,T=S.value.from,Q=M;else for(let V=0;M>=$[V]&&T<q;V++)M-=$[V],T+=Ve;for(;M>0&&T<q;)M-=H[T],M>-g.scrollViewSize?(T++,Q=M):Q=H[T]+M;ne(i,g,T,Q)}function ne(i,g,q,B,j){const T=typeof j=="string"&&j.indexOf("-force")!==-1,M=T===!0?j.replace("-force",""):j,Q=M!==void 0?M:"start";let V=Math.max(0,q-b.value[Q]),ie=V+b.value.total;ie>e.value&&(ie=e.value,V=Math.max(0,ie-b.value.total)),O=g.scrollStart;const Y=V!==S.value.from||ie!==S.value.to;if(Y===!1&&M===void 0){ge(q);return}const{activeElement:W}=document,se=P.value;Y===!0&&se!==null&&se!==W&&se.contains(W)===!0&&(se.addEventListener("focusout",pe),setTimeout(()=>{se!==null&&se.removeEventListener("focusout",pe)})),ca(se,q-V);const Ie=M!==void 0?H.slice(V,q).reduce(nt,0):0;if(Y===!0){const xe=ie>=S.value.from&&V<=S.value.to?S.value.to:ie;S.value={from:V,to:xe},G.value=yt($,H,0,V),U.value=yt($,H,ie,e.value),requestAnimationFrame(()=>{S.value.to!==ie&&O===g.scrollStart&&(S.value={from:S.value.from,to:ie},U.value=yt($,H,ie,e.value))})}requestAnimationFrame(()=>{if(O!==g.scrollStart)return;Y===!0&&ve(V);const xe=H.slice(V,q).reduce(nt,0),fe=xe+g.offsetStart+G.value,te=fe+H[q];let Le=fe+B;if(M!==void 0){const ot=xe-Ie,Pe=g.scrollStart+ot;Le=T!==!0&&Pe<fe&&te<Pe+g.scrollViewSize?Pe:M==="end"?te-g.scrollViewSize:fe-(M==="start"?0:Math.round((g.scrollViewSize-H[q])/2))}O=Le,Zt(i,Le,h.virtualScrollHorizontal,D.lang.rtl),ge(q)})}function ve(i){const g=P.value;if(g){const q=fl.call(g.children,V=>V.classList&&V.classList.contains("q-virtual-scroll--skip")===!1),B=q.length,j=h.virtualScrollHorizontal===!0?V=>V.getBoundingClientRect().width:V=>V.offsetHeight;let T=i,M,Q;for(let V=0;V<B;){for(M=j(q[V]),V++;V<B&&q[V].classList.contains("q-virtual-scroll--with-prev")===!0;)M+=j(q[V]),V++;Q=M-H[T],Q!==0&&(H[T]+=Q,$[Math.floor(T/Ve)]+=Q),T++}}}function pe(){P.value!==null&&P.value!==void 0&&P.value.focus()}function we(i,g){const q=1*C.value;(g===!0||Array.isArray(H)===!1)&&(H=[]);const B=H.length;H.length=e.value;for(let T=e.value-1;T>=B;T--)H[T]=q;const j=Math.floor((e.value-1)/Ve);$=[];for(let T=0;T<=j;T++){let M=0;const Q=Math.min((T+1)*Ve,e.value);for(let V=T*Ve;V<Q;V++)M+=H[V];$.push(M)}w=-1,O=void 0,G.value=yt($,H,0,S.value.from),U.value=yt($,H,S.value.to,e.value),i>=0?(ve(S.value.from),Ae(()=>{he(i)})):Ce()}function re(i){if(i===void 0&&typeof window!="undefined"){const M=o();M!=null&&M.nodeType!==8&&(i=Ht(M,s(),ae.value,_e.value,h.virtualScrollHorizontal,D.lang.rtl,h.virtualScrollStickySizeStart,h.virtualScrollStickySizeEnd).scrollViewSize)}A=i;const g=parseFloat(h.virtualScrollSliceRatioBefore)||0,q=parseFloat(h.virtualScrollSliceRatioAfter)||0,B=1+g+q,j=i===void 0||i<=0?1:Math.ceil(i/C.value),T=Math.max(1,j,Math.ceil((h.virtualScrollSliceSize>0?h.virtualScrollSliceSize:10)/B));b.value={total:Math.ceil(T*B),start:Math.ceil(T*g),center:Math.ceil(T*(.5+g)),end:Math.ceil(T*(1+g)),view:j}}function oe(i,g){const q=h.virtualScrollHorizontal===!0?"width":"height",B={["--q-virtual-scroll-item-"+q]:C.value+"px"};return[i==="tbody"?c(i,{class:"q-virtual-scroll__padding",key:"before",ref:ae},[c("tr",[c("td",{style:{[q]:`${G.value}px`,...B},colspan:ee.value})])]):c(i,{class:"q-virtual-scroll__padding",key:"before",ref:ae,style:{[q]:`${G.value}px`,...B}}),c(i,{class:"q-virtual-scroll__content",key:"content",ref:P,tabindex:-1},g.flat()),i==="tbody"?c(i,{class:"q-virtual-scroll__padding",key:"after",ref:_e},[c("tr",[c("td",{style:{[q]:`${U.value}px`,...B},colspan:ee.value})])]):c(i,{class:"q-virtual-scroll__padding",key:"after",ref:_e,style:{[q]:`${U.value}px`,...B}})]}function ge(i){w!==i&&(h.onVirtualScroll!==void 0&&r("virtualScroll",{index:i,from:S.value.from,to:S.value.to-1,direction:i<w?"decrease":"increase",ref:u}),w=i)}re();const Ce=pl(J,D.platform.is.ios===!0?120:35);wl(()=>{re()});let ze=!1;return Cl(()=>{ze=!0}),Vl(()=>{if(ze!==!0)return;const i=o();O!==void 0&&i!==void 0&&i!==null&&i.nodeType!==8?Zt(i,O,h.virtualScrollHorizontal,D.lang.rtl):he(w)}),sl(()=>{Ce.cancel()}),Object.assign(u,{scrollTo:he,reset:be,refresh:Te}),{virtualScrollSliceRange:S,virtualScrollSliceSizeComputed:b,setVirtualScrollSize:re,onVirtualScrollEvt:Ce,localResetVirtualScroll:we,padVirtualScroll:oe,scrollTo:he,reset:be,refresh:Te}}const el=e=>["add","add-unique","toggle"].includes(e),ma=".*+?^${}()|[]\\",ha=Object.keys(Rt);var ga=xt({name:"QSelect",inheritAttrs:!1,props:{...va,...cl,...Rt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:el},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...al,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:o,emit:s}){const{proxy:C}=Dt(),{$q:x}=C,h=R(!1),r=R(!1),u=R(-1),D=R(""),O=R(!1),w=R(!1);let A=null,$=null,H,G,U,b=null,ae,_e,P,S;const ee=R(null),N=R(null),de=R(null),be=R(null),Te=R(null),he=kl(e),J=Dl(Ct),ne=m(()=>Array.isArray(e.options)?e.options.length:0),ve=m(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:pe,virtualScrollSliceSizeComputed:we,localResetVirtualScroll:re,padVirtualScroll:oe,onVirtualScrollEvt:ge,scrollTo:Ce,setVirtualScrollSize:ze}=fa({virtualScrollLength:ne,getVirtualScrollTarget:He,getVirtualScrollEl:dt,virtualScrollItemSizeComputed:ve}),i=ol(),g=m(()=>{const l=e.mapOptions===!0&&e.multiple!==!0,y=e.modelValue!==void 0&&(e.modelValue!==null||l===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const f=e.mapOptions===!0&&H!==void 0?H:[],k=y.map(L=>ut(L,f));return e.modelValue===null&&l===!0?k.filter(L=>L!==null):k}return y}),q=m(()=>{const l={};return ha.forEach(y=>{const f=e[y];f!==void 0&&(l[y]=f)}),l}),B=m(()=>e.optionsDark===null?i.isDark.value:e.optionsDark),j=m(()=>Nt(g.value)),T=m(()=>{let l="q-field__input q-placeholder col";return e.hideSelected===!0||g.value.length===0?[l,e.inputClass]:(l+=" q-field__input--padding",e.inputClass===void 0?l:[l,e.inputClass])}),M=m(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),Q=m(()=>ne.value===0),V=m(()=>g.value.map(l=>ue.value(l)).join(", ")),ie=m(()=>e.displayValue!==void 0?e.displayValue:V.value),Y=m(()=>e.optionsHtml===!0?()=>!0:l=>l!=null&&l.html===!0),W=m(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||g.value.some(Y.value))),se=m(()=>i.focused.value===!0?e.tabindex:-1),Ie=m(()=>{const l={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":h.value===!0?"true":"false","aria-controls":`${i.targetUid.value}_lb`};return u.value>=0&&(l["aria-activedescendant"]=`${i.targetUid.value}_${u.value}`),l}),xe=m(()=>({id:`${i.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),fe=m(()=>g.value.map((l,y)=>({index:y,opt:l,html:Y.value(l),selected:!0,removeAtIndex:bt,toggleOption:De,tabindex:se.value}))),te=m(()=>{if(ne.value===0)return[];const{from:l,to:y}=pe.value;return e.options.slice(l,y).map((f,k)=>{const L=Oe.value(f)===!0,F=st(f)===!0,le=l+k,K={clickable:!0,active:F,activeClass:Pe.value,manualFocus:!0,focused:!1,disable:L,tabindex:-1,dense:e.optionsDense,dark:B.value,role:"option","aria-selected":F===!0?"true":"false",id:`${i.targetUid.value}_${le}`,onClick:()=>{De(f)}};return L!==!0&&(u.value===le&&(K.focused=!0),x.platform.is.desktop===!0&&(K.onMousemove=()=>{h.value===!0&&$e(le)})),{index:le,opt:f,html:Y.value(f),label:ue.value(f),selected:K.active,focused:K.focused,toggleOption:De,setOptionIndex:$e,itemProps:K}})}),Le=m(()=>e.dropdownIcon!==void 0?e.dropdownIcon:x.iconSet.arrow.dropdown),ot=m(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Pe=m(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),me=m(()=>rt(e.optionValue,"value")),ue=m(()=>rt(e.optionLabel,"label")),Oe=m(()=>rt(e.optionDisable,"disable")),We=m(()=>g.value.map(l=>me.value(l))),qt=m(()=>{const l={onInput:Ct,onChange:J,onKeydown:Ne,onKeyup:Ee,onKeypress:ct,onFocus:pt,onClick(y){G===!0&&tt(y)}};return l.onCompositionstart=l.onCompositionupdate=l.onCompositionend=J,l});ke(g,l=>{H=l,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&i.innerLoading.value!==!0&&(r.value!==!0&&h.value!==!0||j.value!==!0)&&(U!==!0&&et(),(r.value===!0||h.value===!0)&&Fe(""))},{immediate:!0}),ke(()=>e.fillInput,et),ke(h,At),ke(ne,ml);function Xe(l){return e.emitValue===!0?me.value(l):l}function it(l){if(l!==-1&&l<g.value.length)if(e.multiple===!0){const y=e.modelValue.slice();s("remove",{index:l,value:y.splice(l,1)[0]}),s("update:modelValue",y)}else s("update:modelValue",null)}function bt(l){it(l),i.focus()}function Je(l,y){const f=Xe(l);if(e.multiple!==!0){e.fillInput===!0&&je(ue.value(l),!0,!0),s("update:modelValue",f);return}if(g.value.length===0){s("add",{index:0,value:f}),s("update:modelValue",e.multiple===!0?[f]:f);return}if(y===!0&&st(l)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const k=e.modelValue.slice();s("add",{index:k.length,value:f}),k.push(f),s("update:modelValue",k)}function De(l,y){if(i.editable.value!==!0||l===void 0||Oe.value(l)===!0)return;const f=me.value(l);if(e.multiple!==!0){y!==!0&&(je(e.fillInput===!0?ue.value(l):"",!0,!0),Ue()),N.value!==null&&N.value.focus(),(g.value.length===0||ft(me.value(g.value[0]),f)!==!0)&&s("update:modelValue",e.emitValue===!0?f:l);return}if((G!==!0||O.value===!0)&&i.focus(),pt(),g.value.length===0){const F=e.emitValue===!0?f:l;s("add",{index:0,value:F}),s("update:modelValue",e.multiple===!0?[F]:F);return}const k=e.modelValue.slice(),L=We.value.findIndex(F=>ft(F,f));if(L!==-1)s("remove",{index:L,value:k.splice(L,1)[0]});else{if(e.maxValues!==void 0&&k.length>=e.maxValues)return;const F=e.emitValue===!0?f:l;s("add",{index:k.length,value:F}),k.push(F)}s("update:modelValue",k)}function $e(l){if(x.platform.is.desktop!==!0)return;const y=l!==-1&&l<ne.value?l:-1;u.value!==y&&(u.value=y)}function Ye(l=1,y){if(h.value===!0){let f=u.value;do f=Wt(f+l,-1,ne.value-1);while(f!==-1&&f!==u.value&&Oe.value(e.options[f])===!0);u.value!==f&&($e(f),Ce(f),y!==!0&&e.useInput===!0&&e.fillInput===!0&&Be(f>=0?ue.value(e.options[f]):ae,!0))}}function ut(l,y){const f=k=>ft(me.value(k),l);return e.options.find(f)||y.find(f)||l}function rt(l,y){const f=l!==void 0?l:y;return typeof f=="function"?f:k=>k!==null&&typeof k=="object"&&f in k?k[f]:k}function st(l){const y=me.value(l);return We.value.find(f=>ft(f,y))!==void 0}function pt(l){e.useInput===!0&&N.value!==null&&(l===void 0||N.value===l.target&&l.target.value===V.value)&&N.value.select()}function qe(l){dl(l,27)===!0&&h.value===!0&&(tt(l),Ue(),et()),s("keyup",l)}function Ee(l){const{value:y}=l.target;if(l.keyCode!==void 0){qe(l);return}if(l.target.value="",A!==null&&(clearTimeout(A),A=null),$!==null&&(clearTimeout($),$=null),et(),typeof y=="string"&&y.length!==0){const f=y.toLocaleLowerCase(),k=F=>{const le=e.options.find(K=>F.value(K).toLocaleLowerCase()===f);return le===void 0?!1:(g.value.indexOf(le)===-1?De(le):Ue(),!0)},L=F=>{k(me)!==!0&&(k(ue)===!0||F===!0||Fe(y,!0,()=>L(!0)))};L()}else i.clearValue(l)}function ct(l){s("keypress",l)}function Ne(l){if(s("keydown",l),ql(l)===!0)return;const y=D.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),f=l.shiftKey!==!0&&e.multiple!==!0&&(u.value!==-1||y===!0);if(l.keyCode===27){zt(l);return}if(l.keyCode===9&&f===!1){I();return}if(l.target===void 0||l.target.id!==i.targetUid.value||i.editable.value!==!0)return;if(l.keyCode===40&&i.innerLoading.value!==!0&&h.value===!1){Ke(l),ye();return}if(l.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&D.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?it(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&s("update:modelValue",null);return}(l.keyCode===35||l.keyCode===36)&&(typeof D.value!="string"||D.value.length===0)&&(Ke(l),u.value=-1,Ye(l.keyCode===36?1:-1,e.multiple)),(l.keyCode===33||l.keyCode===34)&&we.value!==void 0&&(Ke(l),u.value=Math.max(-1,Math.min(ne.value,u.value+(l.keyCode===33?-1:1)*we.value.view)),Ye(l.keyCode===33?1:-1,e.multiple)),(l.keyCode===38||l.keyCode===40)&&(Ke(l),Ye(l.keyCode===38?-1:1,e.multiple));const k=ne.value;if((P===void 0||S<Date.now())&&(P=""),k>0&&e.useInput!==!0&&l.key!==void 0&&l.key.length===1&&l.altKey===!1&&l.ctrlKey===!1&&l.metaKey===!1&&(l.keyCode!==32||P.length!==0)){h.value!==!0&&ye(l);const L=l.key.toLocaleLowerCase(),F=P.length===1&&P[0]===L;S=Date.now()+1500,F===!1&&(Ke(l),P+=L);const le=new RegExp("^"+P.split("").map(Tt=>ma.indexOf(Tt)!==-1?"\\"+Tt:Tt).join(".*"),"i");let K=u.value;if(F===!0||K<0||le.test(ue.value(e.options[K]))!==!0)do K=Wt(K+1,-1,k-1);while(K!==u.value&&(Oe.value(e.options[K])===!0||le.test(ue.value(e.options[K]))!==!0));u.value!==K&&Ae(()=>{$e(K),Ce(K),K>=0&&e.useInput===!0&&e.fillInput===!0&&Be(ue.value(e.options[K]),!0)});return}if(!(l.keyCode!==13&&(l.keyCode!==32||e.useInput===!0||P!=="")&&(l.keyCode!==9||f===!1))){if(l.keyCode!==9&&Ke(l),u.value!==-1&&u.value<k){De(e.options[u.value]);return}if(y===!0){const L=(F,le)=>{if(le){if(el(le)!==!0)return}else le=e.newValueMode;if(je("",e.multiple!==!0,!0),F==null)return;(le==="toggle"?De:Je)(F,le==="add-unique"),e.multiple!==!0&&(N.value!==null&&N.value.focus(),Ue())};if(e.onNewValue!==void 0?s("newValue",D.value,L):L(D.value),e.multiple!==!0)return}h.value===!0?I():i.innerLoading.value!==!0&&ye()}}function dt(){return G===!0?Te.value:de.value!==null&&de.value.contentEl!==null?de.value.contentEl:void 0}function He(){return dt()}function vt(){return e.hideSelected===!0?[]:o["selected-item"]!==void 0?fe.value.map(l=>o["selected-item"](l)).slice():o.selected!==void 0?[].concat(o.selected()):e.useChips===!0?fe.value.map((l,y)=>c(ra,{key:"option-"+y,removable:i.editable.value===!0&&Oe.value(l.opt)!==!0,dense:!0,textColor:e.color,tabindex:se.value,onRemove(){l.removeAtIndex(y)}},()=>c("span",{class:"ellipsis",[l.html===!0?"innerHTML":"textContent"]:ue.value(l.opt)}))):[c("span",{[W.value===!0?"innerHTML":"textContent"]:ie.value})]}function Ze(){if(Q.value===!0)return o["no-option"]!==void 0?o["no-option"]({inputValue:D.value}):void 0;const l=o.option!==void 0?o.option:f=>c(vl,{key:f.index,...f.itemProps},()=>c(Ul,()=>c(Ql,()=>c("span",{[f.html===!0?"innerHTML":"textContent"]:f.label}))));let y=oe("div",te.value.map(l));return o["before-options"]!==void 0&&(y=o["before-options"]().concat(y)),Ml(o["after-options"],y)}function wt(l,y){const f=y===!0?{...Ie.value,...i.splitAttrs.attributes.value}:void 0,k={ref:y===!0?N:void 0,key:"i_t",class:T.value,style:e.inputStyle,value:D.value!==void 0?D.value:"",type:"search",...f,id:y===!0?i.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":l===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...qt.value};return l!==!0&&G===!0&&(Array.isArray(k.class)===!0?k.class=[...k.class,"no-pointer-events"]:k.class+=" no-pointer-events"),c("input",k)}function Ct(l){A!==null&&(clearTimeout(A),A=null),$!==null&&(clearTimeout($),$=null),!(l&&l.target&&l.target.qComposing===!0)&&(Be(l.target.value||""),U=!0,ae=D.value,i.focused.value!==!0&&(G!==!0||O.value===!0)&&i.focus(),e.onFilter!==void 0&&(A=setTimeout(()=>{A=null,Fe(D.value)},e.inputDebounce)))}function Be(l,y){D.value!==l&&(D.value=l,y===!0||e.inputDebounce===0||e.inputDebounce==="0"?s("inputValue",l):$=setTimeout(()=>{$=null,s("inputValue",l)},e.inputDebounce))}function je(l,y,f){U=f!==!0,e.useInput===!0&&(Be(l,!0),(y===!0||f!==!0)&&(ae=l),y!==!0&&Fe(l))}function Fe(l,y,f){if(e.onFilter===void 0||y!==!0&&i.focused.value!==!0)return;i.innerLoading.value===!0?s("filterAbort"):(i.innerLoading.value=!0,w.value=!0),l!==""&&e.multiple!==!0&&g.value.length!==0&&U!==!0&&l===ue.value(g.value[0])&&(l="");const k=setTimeout(()=>{h.value===!0&&(h.value=!1)},10);b!==null&&clearTimeout(b),b=k,s("filter",l,(L,F)=>{(y===!0||i.focused.value===!0)&&b===k&&(clearTimeout(b),typeof L=="function"&&L(),w.value=!1,Ae(()=>{i.innerLoading.value=!1,i.editable.value===!0&&(y===!0?h.value===!0&&Ue():h.value===!0?At(!0):h.value=!0),typeof F=="function"&&Ae(()=>{F(C)}),typeof f=="function"&&Ae(()=>{f(C)})}))},()=>{i.focused.value===!0&&b===k&&(clearTimeout(b),i.innerLoading.value=!1,w.value=!1),h.value===!0&&(h.value=!1)})}function Mt(){return c(Kl,{ref:de,class:M.value,style:e.popupContentStyle,modelValue:h.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&Q.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:B.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:ot.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...xe.value,onScrollPassive:ge,onBeforeShow:Lt,onBeforeHide:t,onShow:a},Ze)}function t(l){Pt(l),I()}function a(){ze()}function n(l){tt(l),N.value!==null&&N.value.focus(),O.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function d(l){tt(l),Ae(()=>{O.value=!1})}function v(){const l=[c(ia,{class:`col-auto ${i.fieldClass.value}`,...q.value,for:i.targetUid.value,dark:B.value,square:!0,loading:w.value,itemAligned:!1,filled:!0,stackLabel:D.value.length!==0,...i.splitAttrs.listeners.value,onFocus:n,onBlur:d},{...o,rawControl:()=>i.getControl(!0),before:void 0,after:void 0})];return h.value===!0&&l.push(c("div",{ref:Te,class:M.value+" scroll",style:e.popupContentStyle,...xe.value,onClick:zt,onScrollPassive:ge},Ze())),c(Ft,{ref:be,modelValue:r.value,position:e.useInput===!0?"top":void 0,transitionShow:_e,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:Lt,onBeforeHide:z,onHide:p,onShow:_},()=>c("div",{class:"q-select__dialog"+(B.value===!0?" q-select__dialog--dark q-dark":"")+(O.value===!0?" q-select__dialog--focused":"")},l))}function z(l){Pt(l),be.value!==null&&be.value.__updateRefocusTarget(i.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),i.focused.value=!1}function p(l){Ue(),i.focused.value===!1&&s("blur",l),et()}function _(){const l=document.activeElement;(l===null||l.id!==i.targetUid.value)&&N.value!==null&&N.value!==l&&N.value.focus(),ze()}function I(){r.value!==!0&&(u.value=-1,h.value===!0&&(h.value=!1),i.focused.value===!1&&(b!==null&&(clearTimeout(b),b=null),i.innerLoading.value===!0&&(s("filterAbort"),i.innerLoading.value=!1,w.value=!1)))}function ye(l){i.editable.value===!0&&(G===!0?(i.onControlFocusin(l),r.value=!0,Ae(()=>{i.focus()})):i.focus(),e.onFilter!==void 0?Fe(D.value):(Q.value!==!0||o["no-option"]!==void 0)&&(h.value=!0))}function Ue(){r.value=!1,I()}function et(){e.useInput===!0&&je(e.multiple!==!0&&e.fillInput===!0&&g.value.length!==0&&ue.value(g.value[0])||"",!0,!0)}function At(l){let y=-1;if(l===!0){if(g.value.length!==0){const f=me.value(g.value[0]);y=e.options.findIndex(k=>ft(me.value(k),f))}re(y)}$e(y)}function ml(l,y){h.value===!0&&i.innerLoading.value===!1&&(re(-1,!0),Ae(()=>{h.value===!0&&i.innerLoading.value===!1&&(l>y?re():At(!0))}))}function Gt(){r.value===!1&&de.value!==null&&de.value.updatePosition()}function Lt(l){l!==void 0&&tt(l),s("popupShow",l),i.hasPopupOpen=!0,i.onControlFocusin(l)}function Pt(l){l!==void 0&&tt(l),s("popupHide",l),i.hasPopupOpen=!1,i.onControlFocusout(l)}function Yt(){G=x.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?o["no-option"]!==void 0||e.onFilter!==void 0||Q.value===!1:!0),_e=x.platform.is.ios===!0&&G===!0&&e.useInput===!0?"fade":e.transitionShow}return _l(Yt),xl(Gt),Yt(),sl(()=>{A!==null&&clearTimeout(A),$!==null&&clearTimeout($)}),Object.assign(C,{showPopup:ye,hidePopup:Ue,removeAtIndex:it,add:Je,toggleOption:De,getOptionIndex:()=>u.value,setOptionIndex:$e,moveOptionSelection:Ye,filter:Fe,updateMenuPosition:Gt,updateInputValue:je,isOptionSelected:st,getEmittingOptionValue:Xe,isOptionDisabled:(...l)=>Oe.value.apply(null,l)===!0,getOptionValue:(...l)=>me.value.apply(null,l),getOptionLabel:(...l)=>ue.value.apply(null,l)}),Object.assign(i,{innerValue:g,fieldClass:m(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:ee,targetRef:N,hasValue:j,showPopup:ye,floatingLabel:m(()=>e.hideSelected!==!0&&j.value===!0||typeof D.value=="number"||D.value.length!==0||Nt(e.displayValue)),getControlChild:()=>{if(i.editable.value!==!1&&(r.value===!0||Q.value!==!0||o["no-option"]!==void 0))return G===!0?v():Mt();i.hasPopupOpen===!0&&(i.hasPopupOpen=!1)},controlEvents:{onFocusin(l){i.onControlFocusin(l)},onFocusout(l){i.onControlFocusout(l,()=>{et(),I()})},onClick(l){if(zt(l),G!==!0&&h.value===!0){I(),N.value!==null&&N.value.focus();return}ye(l)}},getControl:l=>{const y=vt(),f=l===!0||r.value!==!0||G!==!0;if(e.useInput===!0)y.push(wt(l,f));else if(i.editable.value===!0){const L=f===!0?Ie.value:void 0;y.push(c("input",{ref:f===!0?N:void 0,key:"d_t",class:"q-select__focus-target",id:f===!0?i.targetUid.value:void 0,value:ie.value,readonly:!0,"data-autofocus":l===!0||e.autofocus===!0||void 0,...L,onKeydown:Ne,onKeyup:qe,onKeypress:ct})),f===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&y.push(c("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Ee}))}if(he.value!==void 0&&e.disable!==!0&&We.value.length!==0){const L=We.value.map(F=>c("option",{value:F,selected:!0}));y.push(c("select",{class:"hidden",name:he.value,multiple:e.multiple},L))}const k=e.useInput===!0||f!==!0?void 0:i.splitAttrs.attributes.value;return c("div",{class:"q-field__native row items-center",...k,...i.splitAttrs.listeners.value},y)},getInnerAppend:()=>e.loading!==!0&&w.value!==!0&&e.hideDropdownIcon!==!0?[c(kt,{class:"q-select__dropdown-icon"+(h.value===!0?" rotate-180":""),name:Le.value})]:null}),nl(i)}});function ya(){let e=Object.create(null);return{getCache:(o,s)=>e[o]===void 0?e[o]=typeof s=="function"?s():s:e[o],setCache(o,s){e[o]=s},hasCache(o){return e.hasOwnProperty(o)},clearCache(o){o!==void 0?delete e[o]:e={}}}}const Qe=20,Sa=["Calendar","Years","Months"],tl=e=>Sa.includes(e),Bt=e=>/^-?[\d]+\/[0-1]\d$/.test(e),at=" \u2014 ";function Ge(e){return e.year+"/"+St(e.month)}var ba=xt({name:"QDate",props:{...Zl,...cl,...il,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Bt},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Bt},navigationMaxYearMonth:{type:String,validator:Bt},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:tl}},emits:[...ea,"rangeStart","rangeEnd","navigation"],setup(e,{slots:o,emit:s}){const{proxy:C}=Dt(),{$q:x}=C,h=ul(e,x),{getCache:r}=ya(),{tabindex:u,headerClass:D,getLocale:O,getCurrentDate:w}=ta(e,x);let A;const $=Al(e),H=Il($),G=R(null),U=R(bt()),b=R(O()),ae=m(()=>bt()),_e=m(()=>O()),P=m(()=>w()),S=R(De(U.value,b.value)),ee=R(e.defaultView),N=x.lang.rtl===!0?"right":"left",de=R(N.value),be=R(N.value),Te=S.value.year,he=R(Te-Te%Qe-(Te<0?Qe:0)),J=R(null),ne=m(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(h.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),ve=m(()=>e.color||"primary"),pe=m(()=>e.textColor||"white"),we=m(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),re=m(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),oe=m(()=>re.value.filter(t=>typeof t=="string").map(t=>Je(t,U.value,b.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),ge=m(()=>{const t=a=>Je(a,U.value,b.value);return re.value.filter(a=>Tl(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:t(a.from),to:t(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),Ce=m(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const a=Xt(t.year,t.month,t.day);return new Date(a.gy,a.gm-1,a.gd)}),ze=m(()=>e.calendar==="persian"?Re:(t,a,n)=>Wl(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),a===void 0?U.value:a,n===void 0?b.value:n,t.year,t.timezoneOffset)),i=m(()=>oe.value.length+ge.value.reduce((t,a)=>t+1+Xl(Ce.value(a.to),Ce.value(a.from)),0)),g=m(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(J.value!==null){const n=J.value.init,d=Ce.value(n);return b.value.daysShort[d.getDay()]+", "+b.value.monthsShort[n.month-1]+" "+n.day+at+"?"}if(i.value===0)return at;if(i.value>1)return`${i.value} ${b.value.pluralDay}`;const t=oe.value[0],a=Ce.value(t);return isNaN(a.valueOf())===!0?at:b.value.headerTitle!==void 0?b.value.headerTitle(a,t):b.value.daysShort[a.getDay()]+", "+b.value.monthsShort[t.month-1]+" "+t.day}),q=m(()=>oe.value.concat(ge.value.map(a=>a.from)).sort((a,n)=>a.year-n.year||a.month-n.month)[0]),B=m(()=>oe.value.concat(ge.value.map(a=>a.to)).sort((a,n)=>n.year-a.year||n.month-a.month)[0]),j=m(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(i.value===0)return at;if(i.value>1){const t=q.value,a=B.value,n=b.value.monthsShort;return n[t.month-1]+(t.year!==a.year?" "+t.year+at+n[a.month-1]+" ":t.month!==a.month?at+n[a.month-1]:"")+" "+a.year}return oe.value[0].year}),T=m(()=>{const t=[x.iconSet.datetime.arrowLeft,x.iconSet.datetime.arrowRight];return x.lang.rtl===!0?t.reverse():t}),M=m(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):b.value.firstDayOfWeek),Q=m(()=>{const t=b.value.daysShort,a=M.value;return a>0?t.slice(a,7).concat(t.slice(0,a)):t}),V=m(()=>{const t=S.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():$t(t.year,t.month)}),ie=m(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),Y=m(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),W=m(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),se=m(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return Y.value!==null&&Y.value.year>=S.value.year&&(t.year.prev=!1,Y.value.year===S.value.year&&Y.value.month>=S.value.month&&(t.month.prev=!1)),W.value!==null&&W.value.year<=S.value.year&&(t.year.next=!1,W.value.year===S.value.year&&W.value.month<=S.value.month&&(t.month.next=!1)),t}),Ie=m(()=>{const t={};return oe.value.forEach(a=>{const n=Ge(a);t[n]===void 0&&(t[n]=[]),t[n].push(a.day)}),t}),xe=m(()=>{const t={};return ge.value.forEach(a=>{const n=Ge(a.from),d=Ge(a.to);if(t[n]===void 0&&(t[n]=[]),t[n].push({from:a.from.day,to:n===d?a.to.day:void 0,range:a}),n<d){let v;const{year:z,month:p}=a.from,_=p<12?{year:z,month:p+1}:{year:z+1,month:1};for(;(v=Ge(_))<=d;)t[v]===void 0&&(t[v]=[]),t[v].push({from:void 0,to:v===d?a.to.day:void 0,range:a}),_.month++,_.month>12&&(_.year++,_.month=1)}}),t}),fe=m(()=>{if(J.value===null)return;const{init:t,initHash:a,final:n,finalHash:d}=J.value,[v,z]=a<=d?[t,n]:[n,t],p=Ge(v),_=Ge(z);if(p!==te.value&&_!==te.value)return;const I={};return p===te.value?(I.from=v.day,I.includeFrom=!0):I.from=1,_===te.value?(I.to=z.day,I.includeTo=!0):I.to=V.value,I}),te=m(()=>Ge(S.value)),Le=m(()=>{const t={};if(e.options===void 0){for(let n=1;n<=V.value;n++)t[n]=!0;return t}const a=typeof e.options=="function"?e.options:n=>e.options.includes(n);for(let n=1;n<=V.value;n++){const d=te.value+"/"+St(n);t[n]=a(d)}return t}),ot=m(()=>{const t={};if(e.events===void 0)for(let a=1;a<=V.value;a++)t[a]=!1;else{const a=typeof e.events=="function"?e.events:n=>e.events.includes(n);for(let n=1;n<=V.value;n++){const d=te.value+"/"+St(n);t[n]=a(d)===!0&&ie.value(d)}}return t}),Pe=m(()=>{let t,a;const{year:n,month:d}=S.value;if(e.calendar!=="persian")t=new Date(n,d-1,1),a=new Date(n,d-1,0).getDate();else{const v=Xt(n,d,1);t=new Date(v.gy,v.gm-1,v.gd);let z=d-1,p=n;z===0&&(z=12,p--),a=$t(p,z)}return{days:t.getDay()-M.value-1,endDay:a}}),me=m(()=>{const t=[],{days:a,endDay:n}=Pe.value,d=a<0?a+7:a;if(d<6)for(let p=n-d;p<=n;p++)t.push({i:p,fill:!0});const v=t.length;for(let p=1;p<=V.value;p++){const _={i:p,event:ot.value[p],classes:[]};Le.value[p]===!0&&(_.in=!0,_.flat=!0),t.push(_)}if(Ie.value[te.value]!==void 0&&Ie.value[te.value].forEach(p=>{const _=v+p-1;Object.assign(t[_],{selected:!0,unelevated:!0,flat:!1,color:ve.value,textColor:pe.value})}),xe.value[te.value]!==void 0&&xe.value[te.value].forEach(p=>{if(p.from!==void 0){const _=v+p.from-1,I=v+(p.to||V.value)-1;for(let ye=_;ye<=I;ye++)Object.assign(t[ye],{range:p.range,unelevated:!0,color:ve.value,textColor:pe.value});Object.assign(t[_],{rangeFrom:!0,flat:!1}),p.to!==void 0&&Object.assign(t[I],{rangeTo:!0,flat:!1})}else if(p.to!==void 0){const _=v+p.to-1;for(let I=v;I<=_;I++)Object.assign(t[I],{range:p.range,unelevated:!0,color:ve.value,textColor:pe.value});Object.assign(t[_],{flat:!1,rangeTo:!0})}else{const _=v+V.value-1;for(let I=v;I<=_;I++)Object.assign(t[I],{range:p.range,unelevated:!0,color:ve.value,textColor:pe.value})}}),fe.value!==void 0){const p=v+fe.value.from-1,_=v+fe.value.to-1;for(let I=p;I<=_;I++)t[I].color=ve.value,t[I].editRange=!0;fe.value.includeFrom===!0&&(t[p].editRangeFrom=!0),fe.value.includeTo===!0&&(t[_].editRangeTo=!0)}S.value.year===P.value.year&&S.value.month===P.value.month&&(t[v+P.value.day-1].today=!0);const z=t.length%7;if(z>0){const p=7-z;for(let _=1;_<=p;_++)t.push({i:_,fill:!0})}return t.forEach(p=>{let _="q-date__calendar-item ";p.fill===!0?_+="q-date__calendar-item--fill":(_+=`q-date__calendar-item--${p.in===!0?"in":"out"}`,p.range!==void 0&&(_+=` q-date__range${p.rangeTo===!0?"-to":p.rangeFrom===!0?"-from":""}`),p.editRange===!0&&(_+=` q-date__edit-range${p.editRangeFrom===!0?"-from":""}${p.editRangeTo===!0?"-to":""}`),(p.range!==void 0||p.editRange===!0)&&(_+=` text-${p.color}`)),p.classes=_}),t}),ue=m(()=>e.disable===!0?{"aria-disabled":"true"}:{});ke(()=>e.modelValue,t=>{if(A===t)A=0;else{const a=De(U.value,b.value);Ee(a.year,a.month,a)}}),ke(ee,()=>{G.value!==null&&C.$el.contains(document.activeElement)===!0&&G.value.focus()}),ke(()=>S.value.year+"|"+S.value.month,()=>{s("navigation",{year:S.value.year,month:S.value.month})}),ke(ae,t=>{wt(t,b.value,"mask"),U.value=t}),ke(_e,t=>{wt(U.value,t,"locale"),b.value=t});function Oe(){const{year:t,month:a,day:n}=P.value,d={...S.value,year:t,month:a,day:n},v=Ie.value[Ge(d)];(v===void 0||v.includes(d.day)===!1)&&vt(d),Xe(d.year,d.month)}function We(t){tl(t)===!0&&(ee.value=t)}function qt(t,a){["month","year"].includes(t)&&(t==="month"?Ye:ut)(a===!0?-1:1)}function Xe(t,a){ee.value="Calendar",Ee(t,a)}function it(t,a){if(e.range===!1||!t){J.value=null;return}const n=Object.assign({...S.value},t),d=a!==void 0?Object.assign({...S.value},a):n;J.value={init:n,initHash:Re(n),final:d,finalHash:Re(d)},Xe(n.year,n.month)}function bt(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Je(t,a,n){return Jl(t,a,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function De(t,a){const n=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(n.length===0)return $e();const d=n[n.length-1],v=Je(d.from!==void 0?d.from:d,t,a);return v.dateHash===null?$e():v}function $e(){let t,a;if(e.defaultYearMonth!==void 0){const n=e.defaultYearMonth.split("/");t=parseInt(n[0],10),a=parseInt(n[1],10)}else{const n=P.value!==void 0?P.value:w();t=n.year,a=n.month}return{year:t,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+St(a)+"/01"}}function Ye(t){let a=S.value.year,n=Number(S.value.month)+t;n===13?(n=1,a++):n===0&&(n=12,a--),Ee(a,n),we.value===!0&&Ne("month")}function ut(t){const a=Number(S.value.year)+t;Ee(a,S.value.month),we.value===!0&&Ne("year")}function rt(t){Ee(t,S.value.month),ee.value=e.defaultView==="Years"?"Months":"Calendar",we.value===!0&&Ne("year")}function st(t){Ee(S.value.year,t),ee.value="Calendar",we.value===!0&&Ne("month")}function pt(t,a){const n=Ie.value[a];(n!==void 0&&n.includes(t.day)===!0?Ze:vt)(t)}function qe(t){return{year:t.year,month:t.month,day:t.day}}function Ee(t,a,n){if(Y.value!==null&&t<=Y.value.year&&((a<Y.value.month||t<Y.value.year)&&(a=Y.value.month),t=Y.value.year),W.value!==null&&t>=W.value.year&&((a>W.value.month||t>W.value.year)&&(a=W.value.month),t=W.value.year),n!==void 0){const{hour:v,minute:z,second:p,millisecond:_,timezoneOffset:I,timeHash:ye}=n;Object.assign(S.value,{hour:v,minute:z,second:p,millisecond:_,timezoneOffset:I,timeHash:ye})}const d=t+"/"+St(a)+"/01";d!==S.value.dateHash&&(de.value=S.value.dateHash<d==(x.lang.rtl!==!0)?"left":"right",t!==S.value.year&&(be.value=de.value),Ae(()=>{he.value=t-t%Qe-(t<0?Qe:0),Object.assign(S.value,{year:t,month:a,day:1,dateHash:d})}))}function ct(t,a,n){const d=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;A=d;const{reason:v,details:z}=dt(a,n);s("update:modelValue",d,v,z)}function Ne(t){const a=oe.value[0]!==void 0&&oe.value[0].dateHash!==null?{...oe.value[0]}:{...S.value};Ae(()=>{a.year=S.value.year,a.month=S.value.month;const n=e.calendar!=="persian"?new Date(a.year,a.month,0).getDate():$t(a.year,a.month);a.day=Math.min(Math.max(1,a.day),n);const d=He(a);A=d;const{details:v}=dt("",a);s("update:modelValue",d,t,v)})}function dt(t,a){return a.from!==void 0?{reason:`${t}-range`,details:{...qe(a.target),from:qe(a.from),to:qe(a.to)}}:{reason:`${t}-day`,details:qe(a)}}function He(t,a,n){return t.from!==void 0?{from:ze.value(t.from,a,n),to:ze.value(t.to,a,n)}:ze.value(t,a,n)}function vt(t){let a;if(e.multiple===!0)if(t.from!==void 0){const n=Re(t.from),d=Re(t.to),v=oe.value.filter(p=>p.dateHash<n||p.dateHash>d),z=ge.value.filter(({from:p,to:_})=>_.dateHash<n||p.dateHash>d);a=v.concat(z).concat(t).map(p=>He(p))}else{const n=re.value.slice();n.push(He(t)),a=n}else a=He(t);ct(a,"add",t)}function Ze(t){if(e.noUnset===!0)return;let a=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const n=He(t);t.from!==void 0?a=e.modelValue.filter(d=>d.from!==void 0?d.from!==n.from&&d.to!==n.to:!0):a=e.modelValue.filter(d=>d!==n),a.length===0&&(a=null)}ct(a,"remove",t)}function wt(t,a,n){const d=oe.value.concat(ge.value).map(v=>He(v,t,a)).filter(v=>v.from!==void 0?v.from.dateHash!==null&&v.to.dateHash!==null:v.dateHash!==null);s("update:modelValue",(e.multiple===!0?d:d[0])||null,n)}function Ct(){if(e.minimal!==!0)return c("div",{class:"q-date__header "+D.value},[c("div",{class:"relative-position"},[c(mt,{name:"q-transition--fade"},()=>c("div",{key:"h-yr-"+j.value,class:"q-date__header-subtitle q-date__header-link "+(ee.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:u.value,...r("vY",{onClick(){ee.value="Years"},onKeyup(t){t.keyCode===13&&(ee.value="Years")}})},[j.value]))]),c("div",{class:"q-date__header-title relative-position flex no-wrap"},[c("div",{class:"relative-position col"},[c(mt,{name:"q-transition--fade"},()=>c("div",{key:"h-sub"+g.value,class:"q-date__header-title-label q-date__header-link "+(ee.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:u.value,...r("vC",{onClick(){ee.value="Calendar"},onKeyup(t){t.keyCode===13&&(ee.value="Calendar")}})},[g.value]))]),e.todayBtn===!0?c(X,{class:"q-date__header-today self-start",icon:x.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:u.value,onClick:Oe}):null])])}function Be({label:t,type:a,key:n,dir:d,goTo:v,boundaries:z,cls:p}){return[c("div",{class:"row items-center q-date__arrow"},[c(X,{round:!0,dense:!0,size:"sm",flat:!0,icon:T.value[0],tabindex:u.value,disable:z.prev===!1,...r("go-#"+a,{onClick(){v(-1)}})})]),c("div",{class:"relative-position overflow-hidden flex flex-center"+p},[c(mt,{name:"q-transition--jump-"+d},()=>c("div",{key:n},[c(X,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:u.value,...r("view#"+a,{onClick:()=>{ee.value=a}})})]))]),c("div",{class:"row items-center q-date__arrow"},[c(X,{round:!0,dense:!0,size:"sm",flat:!0,icon:T.value[1],tabindex:u.value,disable:z.next===!1,...r("go+#"+a,{onClick(){v(1)}})})])]}const je={Calendar:()=>[c("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[c("div",{class:"q-date__navigation row items-center no-wrap"},Be({label:b.value.months[S.value.month-1],type:"Months",key:S.value.month,dir:de.value,goTo:Ye,boundaries:se.value.month,cls:" col"}).concat(Be({label:S.value.year,type:"Years",key:S.value.year,dir:be.value,goTo:ut,boundaries:se.value.year,cls:""}))),c("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},Q.value.map(t=>c("div",{class:"q-date__calendar-item"},[c("div",t)]))),c("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[c(mt,{name:"q-transition--slide-"+de.value},()=>c("div",{key:te.value,class:"q-date__calendar-days fit"},me.value.map(t=>c("div",{class:t.classes},[t.in===!0?c(X,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:u.value,...r("day#"+t.i,{onClick:()=>{Fe(t.i)},onMouseover:()=>{Mt(t.i)}})},t.event!==!1?()=>c("div",{class:"q-date__event bg-"+t.event}):null):c("div",""+t.i)]))))])])],Months(){const t=S.value.year===P.value.year,a=d=>Y.value!==null&&S.value.year===Y.value.year&&Y.value.month>d||W.value!==null&&S.value.year===W.value.year&&W.value.month<d,n=b.value.monthsShort.map((d,v)=>{const z=S.value.month===v+1;return c("div",{class:"q-date__months-item flex flex-center"},[c(X,{class:t===!0&&P.value.month===v+1?"q-date__today":null,flat:z!==!0,label:d,unelevated:z,color:z===!0?ve.value:null,textColor:z===!0?pe.value:null,tabindex:u.value,disable:a(v+1),...r("month#"+v,{onClick:()=>{st(v+1)}})})])});return e.yearsInMonthView===!0&&n.unshift(c("div",{class:"row no-wrap full-width"},[Be({label:S.value.year,type:"Years",key:S.value.year,dir:be.value,goTo:ut,boundaries:se.value.year,cls:" col"})])),c("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=he.value,a=t+Qe,n=[],d=v=>Y.value!==null&&Y.value.year>v||W.value!==null&&W.value.year<v;for(let v=t;v<=a;v++){const z=S.value.year===v;n.push(c("div",{class:"q-date__years-item flex flex-center"},[c(X,{key:"yr"+v,class:P.value.year===v?"q-date__today":null,flat:!z,label:v,dense:!0,unelevated:z,color:z===!0?ve.value:null,textColor:z===!0?pe.value:null,tabindex:u.value,disable:d(v),...r("yr#"+v,{onClick:()=>{rt(v)}})})]))}return c("div",{class:"q-date__view q-date__years flex flex-center"},[c("div",{class:"col-auto"},[c(X,{round:!0,dense:!0,flat:!0,icon:T.value[0],tabindex:u.value,disable:d(t),...r("y-",{onClick:()=>{he.value-=Qe}})})]),c("div",{class:"q-date__years-content col self-stretch row items-center"},n),c("div",{class:"col-auto"},[c(X,{round:!0,dense:!0,flat:!0,icon:T.value[1],tabindex:u.value,disable:d(a),...r("y+",{onClick:()=>{he.value+=Qe}})})])])}};function Fe(t){const a={...S.value,day:t};if(e.range===!1){pt(a,te.value);return}if(J.value===null){const n=me.value.find(v=>v.fill!==!0&&v.i===t);if(e.noUnset!==!0&&n.range!==void 0){Ze({target:a,from:n.range.from,to:n.range.to});return}if(n.selected===!0){Ze(a);return}const d=Re(a);J.value={init:a,initHash:d,final:a,finalHash:d},s("rangeStart",qe(a))}else{const n=J.value.initHash,d=Re(a),v=n<=d?{from:J.value.init,to:a}:{from:a,to:J.value.init};J.value=null,vt(n===d?a:{target:a,...v}),s("rangeEnd",{from:qe(v.from),to:qe(v.to)})}}function Mt(t){if(J.value!==null){const a={...S.value,day:t};Object.assign(J.value,{final:a,finalHash:Re(a)})}}return Object.assign(C,{setToday:Oe,setView:We,offsetCalendar:qt,setCalendarTo:Xe,setEditingRange:it}),()=>{const t=[c("div",{class:"q-date__content col relative-position"},[c(mt,{name:"q-transition--fade"},je[ee.value])])],a=zl(o.default);return a!==void 0&&t.push(c("div",{class:"q-date__actions"},a)),e.name!==void 0&&e.disable!==!0&&H(t,"push"),c("div",{class:ne.value,...ue.value},[Ct(),c("div",{ref:G,class:"q-date__main col column",tabindex:-1},t)])}}});function ll(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}var pa=Ol({name:"close-popup",beforeMount(e,{value:o}){const s={depth:ll(o),handler(C){s.depth!==0&&setTimeout(()=>{const x=$l(e);x!==void 0&&El(x,C,s.depth)})},handlerKey(C){dl(C,13)===!0&&s.handler(C)}};e.__qclosepopup=s,e.addEventListener("click",s.handler),e.addEventListener("keyup",s.handlerKey)},updated(e,{value:o,oldValue:s}){o!==s&&(e.__qclosepopup.depth=ll(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}});const wa=Bl({name:"IndexPage",data(){return{changeAlertTimeDialog:!1,coinsStorageKey:"coins",enableNotificationsBeta:!1,days:[{label:"Sunday",value:0},{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6}]}},beforeMount(){this.goalsStore=na(),this.goalsStore.initialize(),this.successesStore=oa(),this.successesStore.initialize(),this.settingsStore=Jt(),this.settingsStore.initialize(),this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()),this.$emit("refresh-header")},computed:{...Fl(Jt,["useBigButtons","goalsSortStyle"]),buttonClass(){return this.useBigButtons?"bigBtn":""},sortStyle(){return this.goalsSortStyle},buttonText(){return`Sort: ${this.sortStyle}`}},methods:{saveGoals(){this.$q.notify("Goals saved!"),this.goalsStore.saveGoals()},completeGoal(e){if(e.goal.length<1){this.$q.notify("Enter a title first!");return}if(e.stepsEnabled){for(var o=!0,s=0;s<e.stepsSize;s++)e.steps[s].value||(o=!1);if(!o){this.$q.notify("Complete all steps first!");return}}this.$q.dialog({title:"Confirm",message:'Confirm completion of goal: "'+e.goal+'"',cancel:!0,persistent:!0}).onOk(()=>{var C=this.goalsStore.goalReward(e);this.$q.notify("Rewarded "+C+" coins for completion!"),this.settingsStore.coins=this.settingsStore.coins+C,this.settingsStore.totalCoins=this.settingsStore.totalCoins+C;var x=Object.assign({},e);if(x.alertTime=null,x.date=this.getDateWithTime(),x.dateTieBreaker=this.getTime(),x.type="goal",this.successesStore.addEntry(x),this.$q.notify('Goal complete! "'+x.goal+'"'),this.settingsStore.saveCoins(),Array.isArray(e.repeatDays)&&e.repeatDays.length>0){var h=Object.assign({},e);if(h.date=this.goalsStore.nextDate(e),h.nextDate=this.goalsStore.nextDate(h),h.stepsEnabled)for(var r=0;r<h.stepsSize;r++)h.steps[r].value=!1;this.goalsStore.addGoal(h,this.settingsStore.getGoalsSortStyle()),this.$q.notify("Repeat goal "+h.goal+" set for "+h.date)}this.goalsStore.removeGoal(e),this.$emit("refresh-header")})},toggleSteps(e){e.steps?(e.stepsEnabled=!e.stepsEnabled,e.stepsEnabled&&e.stepsSize==0&&this.addSteps(e)):(e.stepsEnabled=!0,e.steps=[],e.stepsSize=0,this.addSteps(e)),this.saveGoals()},toggleGoalsSortStyle(){this.settingsStore.toggleGoalsSortStyle(),this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle())},findMatchingInput(){return new Promise(e=>{this.$nextTick(()=>{this.$nextTick(()=>{for(const o in this.$refs.stepDescRef){const s=this.$refs.stepDescRef[o];if(s.modelValue==this.selectedStep.label){e(s);return}}e(null)})})})},handleStepInput(e){if(e.key){if(e.key=="Enter")e.preventDefault(),e.stopPropagation(),this.addSteps(this.selectedGoal,this.selectedStepIndex+1),this.findMatchingInput().then(o=>{o&&(this.selectedStep.label="",o.focus(),this.saveGoals())}),this.saveGoals();else if(e.key=="End")e.preventDefault(),e.stopPropagation(),this.$q.dialog({title:"Confirm",message:"Confirm deletion of step.",cancel:!0,persistent:!0}).onOk(()=>{this.selectedGoal.steps.splice(this.selectedStepIndex,1),this.selectedGoal.stepsSize--,this.selectedGoal.stepsSize==0&&(this.selectedGoal.stepsEnabled=!1,this.selectedStep=null),this.saveGoals()});else if(e.key=="Backspace"&&this.selectedStep.label==""){if(e.preventDefault(),e.stopPropagation(),this.selectedGoal.stepsSize==0){this.selectedGoal.stepsEnabled=!1,this.selectedStep=null;return}this.selectedStepIndex+1<this.selectedGoal.steps.length&&(this.selectedStep=this.selectedGoal.steps[this.selectedStepIndex+1]),this.selectedGoal.steps.splice(this.selectedStepIndex,1),this.selectedGoal.stepsSize--,this.selectedStep=this.selectedGoal.steps[this.selectedStepIndex],this.saveGoals()}}},addSteps(e,o){e.stepsSize<20&&(e.stepsSize++,o?(e.steps.splice(o,0,{label:"",value:!1}),this.selectedStep=e.steps[o],this.selectedStep.label="   "):(e.steps.push({label:"",value:!1}),this.selectedStep=e.steps[e.stepsSize-1]),this.saveGoals())},removeSteps(e){e.steps.splice(e.stepsSize-1,1),e.stepsSize--,e.stepsSize==0&&(e.stepsEnabled=!1,this.selectedStep=null),this.saveGoals()},removeGoal(e){var o='Are you sure you want to delete the goal: "'+e.goal+'"?';e.goal.length<1&&(o="Are you sure you want to delete the unnamed goal?"),this.$q.dialog({title:"Confirm",message:o,cancel:!0,persistent:!0}).onOk(()=>{this.$q.notify('Goal deleted: "'+e.goal+'"'),this.goalsStore.removeGoal(e)})},getDate(){const e=Date().toString();return Et.formatDate(e,"MMM D, YYYY")},getDateWithTime(){const e=Date().toString();return Et.formatDate(e,"MMM D, YYYY, hh:mm A")},getTime(){return new Date().getTime()},displayAlertTime(e){const o=new Date;return o.setHours(parseInt(e.split(":")[0],10)),o.setMinutes(parseInt(e.split(":")[1],10)),o.toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0})},openDatePicker(e){e.changeDateDialog=!0},closeDatePicker(e){e.date=Et.formatDate(e.date,"MMM D, YYYY"),e.changeDateDialog=!1,this.$q.notify("Goals saved!"),this.settingsStore.getGoalsSortStyle()=="Date"&&this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle())},closeAlertTimeDialog(e){e.changeAlertTimeDialog=!1,this.saveGoals()}}}),Ca={class:"q-gutter-md row justify-center"},Va={class:"goal-data"},ka={class:"text-h6"},_a={class:"difficulty-select"},xa={key:0},Da=Z("br",null,null,-1),qa={class:"steps_checkboxes full-width"},Ma={class:"stepTable full-width"},Aa={scope:"row",class:"firstColumn"},Ta=Z("br",null,null,-1),za={key:1},Ia={"q-pa-lg":"",class:"text-black"},Oa={key:0},$a=Z("br",null,null,-1),Ea={class:"row items-center justify-end"},Ha={key:2,class:"alert-data"},Ba={key:0,"q-pa-lg":"",class:"text-black"},Fa=Z("br",null,null,-1),Ra={class:"row items-center justify-center"},Ga={key:0,class:"alert-data"},La={key:1};function Pa(e,o,s,C,x,h){return Se(),jt(aa,{"items-center":"",class:"goal-page"},{default:ce(()=>[Z("div",Ca,[E(Nl,{"no-wrap":""},{default:ce(()=>[E(X,{size:"lg",class:"top-button",onClick:o[0]||(o[0]=r=>this.goalsStore.addGoal(null,this.settingsStore.getGoalsSortStyle())),style:{"margin-left":"0.5rem"}},{default:ce(()=>[ht("Add New Goal")]),_:1}),E(X,{size:"lg",class:"top-button",onClick:o[1]||(o[1]=r=>this.toggleGoalsSortStyle()),style:{"margin-left":"1rem","margin-right":"0.5rem"}},{default:ce(()=>[ht(lt(e.buttonText),1)]),_:1})]),_:1})]),E(jl,null,{default:ce(()=>[(Se(!0),Me(Qt,null,Ut(this.goalsStore.goals,r=>Kt((Se(),jt(vl,{key:r},{default:ce(()=>[E(Rl,{class:"goal-card text-white full-width"},{default:ce(()=>[E(Gl,null,{default:ce(()=>[Z("div",Va,[Z("div",ka,[E(It,{multiline:"",autogrow:"",wrap:"on","min-rows":1,"max-rows":10,standout:"bg-primary text-black",class:"full-width text-h6","input-class":"text-left",label:"Goal Title",modelValue:r.goal,"onUpdate:modelValue":[u=>r.goal=u,o[2]||(o[2]=u=>this.goalsStore.saveGoals())],onFocus:o[3]||(o[3]=u=>this.$q.notify("Goal will be saved once you enter a title"))},null,8,["modelValue","onUpdate:modelValue"])]),Z("div",_a,[E(Vt,{"keep-color":"",modelValue:r.difficulty,"onUpdate:modelValue":[u=>r.difficulty=u,o[4]||(o[4]=u=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Easy",label:"Easy",color:"green"},null,8,["modelValue","onUpdate:modelValue"]),E(Vt,{"keep-color":"",modelValue:r.difficulty,"onUpdate:modelValue":[u=>r.difficulty=u,o[5]||(o[5]=u=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Moderate",label:"Moderate",color:"orange"},null,8,["modelValue","onUpdate:modelValue"]),E(Vt,{"keep-color":"",modelValue:r.difficulty,"onUpdate:modelValue":[u=>r.difficulty=u,o[6]||(o[6]=u=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Hard",label:"Hard",color:"red"},null,8,["modelValue","onUpdate:modelValue"]),E(Vt,{"keep-color":"",modelValue:r.difficulty,"onUpdate:modelValue":[u=>r.difficulty=u,o[7]||(o[7]=u=>this.goalsStore.sortGoals(this.settingsStore.getGoalsSortStyle()))],val:"Epic",label:"Epic",color:"black"},null,8,["modelValue","onUpdate:modelValue"])]),r.stepsEnabled?(Se(),Me("div",xa,[Z("p",null,[ht(" Base Reward: "+lt(this.goalsStore.baseReward(r))+" coins.",1),Da]),Z("div",qa,[Z("table",Ma,[Z("thead",null,[(Se(!0),Me(Qt,null,Ut(r.steps,(u,D)=>(Se(),Me("tr",{key:D},[Z("th",Aa,[E(Ll,{modelValue:u.value,"onUpdate:modelValue":[O=>u.value=O,o[8]||(o[8]=O=>this.saveGoals())]},null,8,["modelValue","onUpdate:modelValue"])]),Z("th",null,[E(It,{ref_for:!0,ref:"stepDescRef",multiline:"",autogrow:"",wrap:"on","min-rows":1,"max-rows":10,standout:"bg-primary text-black",class:"full-width","input-class":"text-left",label:"Step Description",modelValue:u.label,"onUpdate:modelValue":[O=>u.label=O,o[9]||(o[9]=O=>this.goalsStore.saveGoals())],onKeydown:e.handleStepInput,onFocus:O=>{this.selectedGoal=r,this.selectedStep=u,this.selectedStepIndex=D}},null,8,["modelValue","onUpdate:modelValue","onKeydown","onFocus"])])]))),128))])]),E(X,{flat:"",dense:"",glossy:"",icon:"add",color:"green",onClick:u=>e.addSteps(r)},null,8,["onClick"]),E(X,{flat:"",dense:"",glossy:"",icon:"remove",color:"red",onClick:u=>e.removeSteps(r)},null,8,["onClick"])]),ht(" Total Reward: "+lt(this.goalsStore.goalReward(r))+" coins.",1),Ta])):(Se(),Me("div",za,[Z("p",Ia," Reward for completion: "+lt(this.goalsStore.goalReward(r))+" coins. ",1)])),Z("div",{class:gt(["text-goal",{overdue:this.goalsStore.goalExpired(r)}])},[E(ga,{modelValue:r.repeatDays,"onUpdate:modelValue":[u=>r.repeatDays=u,o[10]||(o[10]=u=>this.saveGoals())],multiple:"","multiple-sort":"",options:e.days,label:"Repeats on these days","display-value":this.goalsStore.displayRepeatDays(r.repeatDays)},null,8,["modelValue","onUpdate:modelValue","options","display-value"]),r.repeatDays&&r.repeatDays.length>0?(Se(),Me("div",Oa,[$a,Z("p",null," Will occur again on "+lt(this.goalsStore.nextDate(r)),1)])):Ot("",!0),E(It,{"no-outline":"",style:{"padding-right":"1e","min-width":"35%"},"input-class":"text-left text-bold",label:"Complete By",modelValue:r.date,"onUpdate:modelValue":u=>r.date=u,onClick:u=>e.openDatePicker(r)},{default:ce(()=>[E(Ft,{modelValue:r.changeDateDialog,"onUpdate:modelValue":u=>r.changeDateDialog=u},{default:ce(()=>[E(ba,{modelValue:r.date,"onUpdate:modelValue":[u=>r.date=u,u=>e.closeDatePicker(r)]},{default:ce(()=>[Z("div",Ea,[Kt(E(X,{onClick:u=>e.closeDatePicker(r),label:"Close",color:"primary",flat:""},null,8,["onClick"]),[[pa]])])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["modelValue","onUpdate:modelValue","onClick"])],2),this.settingsStore.useNotificationBeta?(Se(),Me("div",Ha,[r.alertTime?(Se(),Me("p",Ba,[Fa,ht("Alert Time: "+lt(e.displayAlertTime(r.alertTime))+" day of goal. ",1)])):Ot("",!0),E(Ft,{modelValue:r.changeAlertTimeDialog,"onUpdate:modelValue":u=>r.changeAlertTimeDialog=u},{default:ce(()=>[E(la,{modelValue:r.alertTime,"onUpdate:modelValue":[u=>r.alertTime=u,o[11]||(o[11]=u=>this.saveGoals())],onClose:u=>e.closeAlertTimeDialog(r)},{default:ce(()=>[Z("div",Ra,[E(X,{"float-left":"",label:"Disable",onClick:u=>this.goalsStore.disableNotification(r),color:"primary",flat:""},null,8,["onClick"]),E(X,{label:"Close",color:"primary",onClick:u=>e.closeAlertTimeDialog(r),flat:""},null,8,["onClick"])])]),_:2},1032,["modelValue","onUpdate:modelValue","onClose"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])):Ot("",!0)])]),_:2},1024),E(Pl,{dark:""}),E(Yl,null,{default:ce(()=>[E(X,{class:gt(e.buttonClass),flat:"",glossy:"",icon:"check",color:"green",onClick:u=>e.completeGoal(r)},null,8,["class","onClick"]),E(X,{class:gt(e.buttonClass),flat:"",glossy:"",icon:"123",color:"yellow",onClick:u=>e.toggleSteps(r),style:{"margin-left":"0"}},null,8,["class","onClick"]),this.settingsStore.useNotificationBeta?(Se(),Me("div",Ga,[E(X,{class:gt(e.buttonClass),flat:"",glossy:"",icon:"notifications",color:"red",onClick:u=>r.changeAlertTimeDialog=!0},null,8,["class","onClick"])])):(Se(),Me("div",La)),E(X,{class:gt(e.buttonClass),flat:"",glossy:"",icon:"delete",color:"black",onClick:u=>e.removeGoal(r)},null,8,["class","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)),[[rl]])),128))]),_:1})]),_:1})}var nn=Hl(wa,[["render",Pa]]);export{nn as default};
